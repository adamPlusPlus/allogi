(()=>{"use strict";var e,n={25:(e,n,t)=>{t.d(n,{A:()=>r});var a=t(645),i=t.n(a),o=t(278),s=t.n(o)()(i());s.push([e.id,".settings-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n  backdrop-filter: blur(2px);\n}\n\n.settings-modal {\n  background: white;\n  border-radius: 12px;\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);\n  width: 90vw;\n  max-width: 1200px;\n  max-height: 90vh;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  animation: slideIn 0.3s ease-out;\n}\n\n@keyframes slideIn {\n  from {\n    opacity: 0;\n    transform: translateY(-20px) scale(0.95);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0) scale(1);\n  }\n}\n\n.settings-header {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  padding: 20px 24px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.settings-header h2 {\n  margin: 0;\n  font-size: 24px;\n  font-weight: 600;\n}\n\n.close-btn {\n  background: none;\n  border: none;\n  color: white;\n  font-size: 28px;\n  cursor: pointer;\n  padding: 0;\n  width: 32px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  transition: background-color 0.2s;\n}\n\n.close-btn:hover {\n  background-color: rgba(255, 255, 255, 0.2);\n}\n\n.settings-content {\n  flex: 1;\n  overflow-y: auto;\n  padding: 24px;\n  background: #f8f9fa;\n}\n\n.settings-section {\n  background: white;\n  border-radius: 8px;\n  padding: 20px;\n  margin-bottom: 24px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  border: 1px solid #e9ecef;\n}\n\n.settings-section h3 {\n  margin: 0 0 16px 0;\n  font-size: 18px;\n  font-weight: 600;\n  color: #2c3e50;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.settings-section p {\n  margin: 0 0 20px 0;\n  color: #6c757d;\n  line-height: 1.5;\n}\n\n.recipients-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n  gap: 16px;\n  margin-top: 20px;\n}\n\n.recipient-card {\n  background: white;\n  border: 2px solid #e9ecef;\n  border-radius: 8px;\n  padding: 16px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  position: relative;\n  overflow: hidden;\n}\n\n.recipient-card:hover {\n  border-color: #667eea;\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15);\n  transform: translateY(-2px);\n}\n\n.recipient-card.selected {\n  border-color: #667eea;\n  background: linear-gradient(135deg, #f8f9ff 0%, #e8f0ff 100%);\n  box-shadow: 0 4px 16px rgba(102, 126, 234, 0.2);\n}\n\n.recipient-header {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 16px;\n}\n\n.type-icon {\n  font-size: 20px;\n}\n\n.status-icon {\n  font-size: 16px;\n}\n\n.recipient-header h4 {\n  margin: 0;\n  font-size: 16px;\n  font-weight: 600;\n  color: #2c3e50;\n  flex: 1;\n}\n\n.recipient-details {\n  margin-bottom: 16px;\n}\n\n.detail-row {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 8px 0;\n  border-bottom: 1px solid #f1f3f4;\n}\n\n.detail-row:last-child {\n  border-bottom: none;\n}\n\n.detail-row .label {\n  font-weight: 500;\n  color: #6c757d;\n  font-size: 14px;\n}\n\n.detail-row .value {\n  color: #2c3e50;\n  font-size: 14px;\n  font-weight: 500;\n}\n\n.detail-row .value.path {\n  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n  background: #f8f9fa;\n  padding: 4px 8px;\n  border-radius: 4px;\n  font-size: 12px;\n  color: #495057;\n}\n\n.save-logs-section {\n  background: #f8f9fa;\n  border-radius: 6px;\n  padding: 12px;\n  margin-top: 12px;\n}\n\n.open-dir-btn {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  border: none;\n  border-radius: 6px;\n  padding: 8px 16px;\n  font-size: 14px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s;\n  width: 100%;\n  margin-top: 12px;\n}\n\n.open-dir-btn:hover {\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);\n}\n\n.setting-row {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px 0;\n  border-bottom: 1px solid #f1f3f4;\n}\n\n.setting-row:last-child {\n  border-bottom: none;\n}\n\n.setting-row label {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  font-weight: 500;\n  color: #2c3e50;\n  cursor: pointer;\n}\n\n.setting-row input[type=\"checkbox\"] {\n  width: 18px;\n  height: 18px;\n  accent-color: #667eea;\n}\n\n.setting-row select {\n  padding: 6px 12px;\n  border: 1px solid #ced4da;\n  border-radius: 4px;\n  background: white;\n  font-size: 14px;\n  color: #2c3e50;\n  cursor: pointer;\n}\n\n.setting-row select:disabled {\n  background: #f8f9fa;\n  color: #6c757d;\n  cursor: not-allowed;\n}\n\n.detail-view {\n  background: #f8f9fa;\n  border-radius: 6px;\n  padding: 16px;\n  margin-top: 16px;\n}\n\n.detail-view .detail-row {\n  padding: 12px 0;\n}\n\n.detail-view .detail-row .label {\n  font-weight: 600;\n  color: #495057;\n}\n\n.detail-view .detail-row .value {\n  font-weight: 500;\n  color: #2c3e50;\n}\n\n.settings-footer {\n  background: #f8f9fa;\n  padding: 20px 24px;\n  border-top: 1px solid #e9ecef;\n  display: flex;\n  justify-content: flex-end;\n  gap: 12px;\n}\n\n.save-btn {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  border: none;\n  border-radius: 6px;\n  padding: 10px 24px;\n  font-size: 16px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.save-btn:hover {\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);\n}\n\n/* Responsive design */\n@media (max-width: 768px) {\n  .settings-modal {\n    width: 95vw;\n    max-height: 95vh;\n  }\n  \n  .recipients-grid {\n    grid-template-columns: 1fr;\n  }\n  \n  .settings-content {\n    padding: 16px;\n  }\n  \n  .settings-header {\n    padding: 16px 20px;\n  }\n  \n  .settings-header h2 {\n    font-size: 20px;\n  }\n}\n\n/* Scrollbar styling */\n.settings-content::-webkit-scrollbar {\n  width: 8px;\n}\n\n.settings-content::-webkit-scrollbar-track {\n  background: #f1f1f1;\n  border-radius: 4px;\n}\n\n.settings-content::-webkit-scrollbar-thumb {\n  background: #c1c1c1;\n  border-radius: 4px;\n}\n\n.settings-content::-webkit-scrollbar-thumb:hover {\n  background: #a8a8a8;\n}\n\n/* Tab Navigation */\n.settings-tabs {\n  display: flex;\n  background: #f5f5f5;\n  border-bottom: 1px solid #ddd;\n  padding: 0;\n  margin: 0;\n}\n\n.tab-btn {\n  flex: 1;\n  padding: 12px 16px;\n  border: none;\n  background: transparent;\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 500;\n  color: #666;\n  border-bottom: 3px solid transparent;\n  transition: all 0.2s ease;\n}\n\n.tab-btn:hover {\n  background: #e9e9e9;\n  color: #333;\n}\n\n.tab-btn.active {\n  background: white;\n  color: #667eea;\n  border-bottom-color: #667eea;\n}\n\n/* Notifications */\n.settings-notification {\n  padding: 12px 16px;\n  margin: 16px 24px;\n  border-radius: 6px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-size: 14px;\n  animation: slideIn 0.3s ease-out;\n}\n\n.settings-notification.success {\n  background: #d4edda;\n  color: #155724;\n  border: 1px solid #c3e6cb;\n}\n\n.settings-notification.error {\n  background: #f8d7da;\n  color: #721c24;\n  border: 1px solid #f5c6cb;\n}\n\n.settings-notification.info {\n  background: #cce7ff;\n  color: #004085;\n  border: 1px solid #b6d7ff;\n}\n\n.settings-notification button {\n  background: none;\n  border: none;\n  font-size: 16px;\n  cursor: pointer;\n  padding: 0 4px;\n  opacity: 0.7;\n}\n\n.settings-notification button:hover {\n  opacity: 1;\n}\n\n/* Database Tab Styles */\n.database-info {\n  background: #f8f9fa;\n  border-radius: 8px;\n  padding: 20px;\n  margin-top: 16px;\n}\n\n.info-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n  gap: 16px;\n}\n\n.info-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 12px;\n  background: white;\n  border-radius: 6px;\n  border: 1px solid #e1e5e9;\n}\n\n.info-item .label {\n  font-weight: 500;\n  color: #495057;\n}\n\n.info-item .value {\n  font-weight: 600;\n}\n\n.db-type-file { color: #6c757d; }\n.db-type-sqlite { color: #0066cc; }\n.db-type-postgresql { color: #336791; }\n\n/* Statistics Grid */\n.stats-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: 16px;\n  margin-top: 16px;\n}\n\n.stat-card {\n  background: white;\n  border: 1px solid #e1e5e9;\n  border-radius: 8px;\n  padding: 20px;\n  text-align: center;\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\n}\n\n.stat-card:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n\n.stat-value {\n  font-size: 24px;\n  font-weight: 700;\n  color: #667eea;\n  margin-bottom: 8px;\n}\n\n.stat-label {\n  font-size: 14px;\n  color: #6c757d;\n  font-weight: 500;\n}\n\n/* Archive Management */\n.archive-controls {\n  background: #f8f9fa;\n  border-radius: 8px;\n  padding: 20px;\n  margin-top: 16px;\n}\n\n.action-btn {\n  padding: 10px 20px;\n  border: none;\n  border-radius: 6px;\n  font-size: 14px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.action-btn.primary {\n  background: #667eea;\n  color: white;\n}\n\n.action-btn.primary:hover:not(:disabled) {\n  background: #5a6fd8;\n  transform: translateY(-1px);\n}\n\n.action-btn.secondary {\n  background: #6c757d;\n  color: white;\n}\n\n.action-btn.secondary:hover:not(:disabled) {\n  background: #5a6268;\n  transform: translateY(-1px);\n}\n\n.action-btn:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n  transform: none;\n}\n\n.help-text {\n  margin-top: 8px;\n  font-size: 12px;\n  color: #6c757d;\n  line-height: 1.4;\n}\n\n/* Archive List */\n.archive-summary {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n  gap: 16px;\n  margin: 16px 0;\n  padding: 16px;\n  background: #f8f9fa;\n  border-radius: 6px;\n}\n\n.summary-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.archives-list {\n  max-height: 400px;\n  overflow-y: auto;\n  border: 1px solid #e1e5e9;\n  border-radius: 6px;\n}\n\n.archive-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 16px;\n  border-bottom: 1px solid #e1e5e9;\n  transition: background-color 0.2s ease;\n}\n\n.archive-item:hover {\n  background: #f8f9fa;\n}\n\n.archive-item:last-child {\n  border-bottom: none;\n}\n\n.archive-info {\n  flex: 1;\n}\n\n.archive-name {\n  font-weight: 500;\n  color: #333;\n  margin-bottom: 4px;\n}\n\n.archive-details {\n  display: flex;\n  gap: 16px;\n  font-size: 12px;\n  color: #6c757d;\n}\n\n.archive-actions {\n  display: flex;\n  gap: 8px;\n}\n\n/* Export Controls */\n.export-controls {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));\n  gap: 24px;\n  margin-top: 16px;\n}\n\n.export-group {\n  background: #f8f9fa;\n  border-radius: 8px;\n  padding: 20px;\n  border: 1px solid #e1e5e9;\n}\n\n.export-group h4 {\n  margin: 0 0 12px 0;\n  color: #495057;\n  font-size: 16px;\n}\n\n.export-buttons {\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n}\n\n.export-buttons .action-btn {\n  flex: 1;\n  min-width: 80px;\n  justify-content: center;\n}\n\n/* Overview Cards */\n.overview-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n  gap: 16px;\n  margin-top: 16px;\n}\n\n.overview-card {\n  background: white;\n  border: 1px solid #e1e5e9;\n  border-radius: 8px;\n  padding: 20px;\n}\n\n.overview-card h4 {\n  margin: 0 0 12px 0;\n  color: #495057;\n  font-size: 16px;\n  font-weight: 600;\n}\n\n.overview-stats {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.overview-stats div {\n  font-size: 14px;\n  color: #6c757d;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n/* Empty State */\n.empty-state {\n  text-align: center;\n  padding: 40px;\n  color: #6c757d;\n}\n\n.empty-state p {\n  margin: 8px 0;\n}\n\n/* Loading State */\n.loading {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 40px;\n  color: #6c757d;\n  font-style: italic;\n}\n\n/* Responsive Design */\n@media (max-width: 768px) {\n  .settings-modal {\n    width: 95vw;\n    max-height: 95vh;\n  }\n  \n  .settings-tabs {\n    flex-direction: column;\n  }\n  \n  .tab-btn {\n    text-align: left;\n    border-bottom: 1px solid #ddd;\n    border-right: 3px solid transparent;\n  }\n  \n  .tab-btn.active {\n    border-bottom-color: #ddd;\n    border-right-color: #667eea;\n  }\n  \n  .info-grid,\n  .stats-grid,\n  .export-controls,\n  .overview-grid {\n    grid-template-columns: 1fr;\n  }\n  \n  .archive-item {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 12px;\n  }\n  \n  .archive-actions {\n    width: 100%;\n    justify-content: flex-end;\n  }\n}",""]);const r=s},112:(e,n,t)=>{var a=t(696),i=t(470),o=t(292),s=t.n(o),r=t(893),l=t.n(r),c=t(383),d=t.n(c),p=t(884),g=t.n(p),m=t(88),u=t.n(m),h=t(997),x=t.n(h),f=t(457),b={};b.styleTagTransform=x(),b.setAttributes=g(),b.insert=d().bind(null,"head"),b.domAPI=l(),b.insertStyleElement=u(),s()(f.A,b),f.A&&f.A.locals&&f.A.locals;var v=t(345),w={};w.styleTagTransform=x(),w.setAttributes=g(),w.insert=d().bind(null,"head"),w.domAPI=l(),w.insertStyleElement=u(),s()(v.A,w),v.A&&v.A.locals&&v.A.locals;var y=t(540);function j({isVisible:e,x:n,y:t,items:i,onClose:o}){const s=(0,a.useRef)(null);return(0,a.useEffect)(()=>{const n=e=>{s.current&&!s.current.contains(e.target)&&o()};if(e)return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[e,o]),e?(0,y.jsx)("div",{ref:s,className:"context-menu",style:{left:n,top:t,position:"fixed",zIndex:1e3},onClick:e=>e.stopPropagation(),children:i.map((e,n)=>(0,y.jsx)(a.Fragment,{children:e.separator?(0,y.jsx)("div",{className:"context-menu-separator"}):(0,y.jsxs)("div",{className:`context-menu-item ${e.disabled?"disabled":""} ${e.submenu?"context-menu-item-submenu":""}`,onClick:()=>{e.disabled||(e.action(),o())},children:[e.icon&&(0,y.jsx)("span",{className:"context-menu-icon",children:e.icon}),(0,y.jsx)("span",{className:"context-menu-label",children:e.label}),e.submenu&&(0,y.jsx)("span",{className:"context-menu-arrow",children:"▶"}),e.submenu&&(0,y.jsx)("div",{className:"context-submenu",children:e.submenu.map((e,n)=>(0,y.jsxs)("div",{className:"context-menu-item "+(e.disabled?"disabled":""),onClick:n=>{n.stopPropagation(),e.disabled||(e.action(),o())},children:[e.icon&&(0,y.jsx)("span",{className:"context-menu-icon",children:e.icon}),(0,y.jsx)("span",{className:"context-menu-label",children:e.label})]},e.id||n))})]})},e.id||n))}):null}function k(e={}){const[n,t]=(0,a.useState)({isVisible:!1,x:0,y:0}),i=(0,a.useCallback)((e,n,a,i)=>{t({isVisible:!0,x:e,y:n,targetData:a,targetElement:i})},[]),o=(0,a.useCallback)(()=>{t(e=>({...e,isVisible:!1}))},[]),s=(0,a.useCallback)(n=>{try{const t={id:`highlight-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:`Highlight: ${n.text?.substring(0,30)}...`||"Unnamed Highlight",type:"highlight",parentId:"default-highlight",metadata:{description:"Created from context menu",tags:n.tags||[],createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),data:{text:n.text,sourceType:n.sourceType,timestamp:n.timestamp,scriptId:n.scriptId,moduleId:n.moduleId,additionalData:n.data}}};if(e.onCreateHighlight)e.onCreateHighlight(n);else{const e=localStorage.getItem("allog-save-system");let n=e?JSON.parse(e):{items:[]};n.items.push(t),localStorage.setItem("allog-save-system",JSON.stringify(n)),console.log("Highlight created and saved:",t.name)}return n}catch(e){return console.error("Failed to create highlight:",e),n}},[e.onCreateHighlight]),r=(0,a.useCallback)(e=>({id:"highlight",label:"Highlight",icon:"💡",action:()=>s(e)}),[s]);return{contextMenu:n,showContextMenu:i,hideContextMenu:o,createHighlight:s,createHighlightMenuItem:r}}function S(){const[e,n]=(0,a.useState)([]),[t,i]=(0,a.useState)(new Map);(0,a.useEffect)(()=>{const e=()=>{try{const e=localStorage.getItem("allog-save-system");if(e){const t=JSON.parse(e),a=(t.items?.filter(e=>e.type?.startsWith("highlight-")&&e.metadata?.highlightData)||[]).map(e=>({id:e.id,name:e.name,scriptId:e.metadata.highlightData.scriptId,moduleId:e.metadata.highlightData.moduleId,methodId:e.metadata.highlightData.methodId,valueId:e.metadata.highlightData.valueId,color:e.metadata.highlightData.color||"#ffff00",pattern:e.metadata.highlightData.pattern||"default",target:e.metadata.target||e.name||""}));n(a)}}catch(e){}};e();const t=n=>{"allog-save-system"===n.key&&e()};window.addEventListener("storage",t);const a=()=>{e()};return window.addEventListener("highlight-updated",a),()=>{window.removeEventListener("storage",t),window.removeEventListener("highlight-updated",a)}},[]);const o=(0,a.useCallback)((n,t,a,i,o)=>e.find(e=>{if(e.scriptId&&t&&!t.includes(e.scriptId))return!1;if(e.moduleId&&a&&!a.includes(e.moduleId))return!1;if(e.valueId&&i&&!i.includes(e.valueId))return!1;if("log"===n&&e.target&&o)return o.toLowerCase().includes(e.target.toLowerCase());if(i&&e.target)return i.toLowerCase().includes(e.target.toLowerCase());if(e.target){if("log"===n&&o)return o.toLowerCase().includes(e.target.toLowerCase());if(i)return i.toLowerCase().includes(e.target.toLowerCase())}return!1})||null,[e]),s=(0,a.useCallback)((e,n,t,a,i)=>{const s=o(e,n,t,a,i);return s?{className:`${"log"===e?"log-entry":"variable"===e||"state"===e||"function"===e||"property"===e||"event"===e?"monitoring-data-item":""} highlighted highlight-pattern-${s.pattern}`,style:{"--highlight-color":s.color},isHighlighted:!0,highlight:s,dataAttributes:{"data-highlight-name":s.name}}:{className:"",style:{},isHighlighted:!1}},[o]),r=(0,a.useCallback)(e=>{n(e)},[]);return{highlights:e,getHighlightForElement:o,getHighlightStyles:s,updateHighlights:r,isElementHighlighted:o}}function N({onStatsUpdate:e,onConnectionUpdate:n,saveSystemRef:t}){const{contextMenu:i,showContextMenu:o,hideContextMenu:s}=k(),{getHighlightStyles:r,isElementHighlighted:l}=S(),c=(0,a.useRef)(new Map),[d,p]=(0,a.useState)({}),[g,m]=(0,a.useState)({totalModules:0,totalScripts:0,totalVariables:0,totalStates:0,totalFunctions:0,totalProperties:0,totalEvents:0,lastUpdate:(new Date).toISOString()}),[u,h]=(0,a.useState)({isConnected:!1,retryCount:0}),[x,f]=(0,a.useState)(!0),[b,v]=(0,a.useState)(500),[w,N]=(0,a.useState)({moduleId:"",scriptId:"",type:"",search:"",showVariables:!0,showStates:!0,showFunctions:!0,showProperties:!0,showEvents:!0}),[I,C]=(0,a.useState)(new Set),[L,D]=(0,a.useState)(new Set),[O,A]=(0,a.useState)(null),[z,$]=(0,a.useState)("table"),[E,F]=(0,a.useState)(null),M=(0,a.useCallback)(async()=>{try{const t=await fetch("/api/monitoring");if(t.ok){const a=await t.json();p(a.modules||{});const i=a.stats||g;m(i);const o={...u,isConnected:!0,error:void 0};if(h(o),e?.(i),n?.(o),O){const e=a.modules?.[O.moduleId];if(e){const n=e.scripts?.[O.scriptId];if(n){const e=n[O.type+"s"];e&&e[O.name]||A(null)}else A(null)}else A(null)}}}catch(e){console.error("Failed to fetch monitoring data:",e);const t={...u,isConnected:!1,error:"Connection failed",retryCount:u.retryCount+1};h(t),n?.(t)}},[g,O]);(0,a.useEffect)(()=>{if(!x)return;const e=setInterval(M,b);return()=>clearInterval(e)},[x,b,M]),(0,a.useEffect)(()=>{M()},[M]);const T=(0,a.useMemo)(()=>{const e={};return d&&"object"==typeof d?(Object.entries(d).forEach(([n,t])=>{if(w.moduleId&&!n.includes(w.moduleId))return;if(!t||!t.scripts||"object"!=typeof t.scripts)return;const a={};Object.entries(t.scripts).forEach(([e,n])=>{if(w.scriptId&&!e.includes(w.scriptId))return;if(!n||"object"!=typeof n)return;const t={variables:{},states:{},functions:{},properties:{},events:{},lastUpdate:n.lastUpdate||Date.now()};w.showVariables&&n.variables&&"object"==typeof n.variables&&Object.entries(n.variables).forEach(([e,n])=>{w.search&&!e.toLowerCase().includes(w.search.toLowerCase())||(t.variables[e]=n)}),w.showStates&&n.states&&"object"==typeof n.states&&Object.entries(n.states).forEach(([e,n])=>{w.search&&!e.toLowerCase().includes(w.search.toLowerCase())||(t.states[e]=n)}),w.showFunctions&&n.functions&&"object"==typeof n.functions&&Object.entries(n.functions).forEach(([e,n])=>{w.search&&!e.toLowerCase().includes(w.search.toLowerCase())||(t.functions[e]=n)}),w.showProperties&&n.properties&&"object"==typeof n.properties&&Object.entries(n.properties).forEach(([e,n])=>{w.search&&!e.toLowerCase().includes(w.search.toLowerCase())||(t.properties[e]=n)}),w.showEvents&&n.events&&"object"==typeof n.events&&Object.entries(n.events).forEach(([e,n])=>{w.search&&!e.toLowerCase().includes(w.search.toLowerCase())||(t.events[e]=n)}),Object.values(t).some(e=>"object"==typeof e&&Object.keys(e).length>0)&&(a[e]=t)}),Object.keys(a).length>0&&(e[n]={...t,scripts:a})}),e):e},[d,w]),P=e=>{if(null===e)return"null";if(void 0===e)return"undefined";if("object"==typeof e)try{return JSON.stringify(e,null,2)}catch{return"[Complex Object]"}return String(e)},R=e=>null===e?"null":void 0===e?"undefined":Array.isArray(e)?"array":typeof e,U=e=>{const n=Date.now()-e;return n<1e3?"just now":n<6e4?`${Math.floor(n/1e3)}s ago`:n<36e5?`${Math.floor(n/6e4)}m ago`:`${Math.floor(n/36e5)}h ago`},V=e=>{let n="asc";E&&E.key===e&&"asc"===E.direction&&(n="desc"),F({key:e,direction:n})},H=e=>E&&E.key===e?"asc"===E.direction?"↑":"↓":"↕️",B=(e,n)=>{const t=r(e.type,e.scriptId,e.moduleId,e.name);return(0,y.jsxs)("div",{className:`monitoring-data-item monitoring-data-${e.type} ${t.className}`,style:t.style,onClick:()=>A(e),onContextMenu:n=>((e,n)=>{e.preventDefault();const t=`${n.moduleId}-${n.scriptId}-${n.name}`,a=c.current.get(t),i=Date.now();if(a&&i-a.lastClick<300)return a.timeout&&clearTimeout(a.timeout),void c.current.delete(t);const s=setTimeout(()=>{c.current.delete(t)},300);c.current.set(t,{lastClick:i,timeout:s}),o(e.clientX,e.clientY,{id:"monitoring-data",label:`Data: ${n.name}`,icon:"📊",action:()=>{}})})(n,e),...t.dataAttributes,children:[(0,y.jsxs)("div",{className:"data-header",children:[(0,y.jsx)("span",{className:"data-name",children:e.name}),(0,y.jsx)("span",{className:`data-type data-type-${e.type}`,children:e.type}),(0,y.jsx)("span",{className:"data-time",children:U(e.timestamp)})]}),(0,y.jsxs)("div",{className:"data-content",children:[(0,y.jsxs)("div",{className:"data-value",children:[(0,y.jsx)("span",{className:"value-label",children:"Value:"}),(0,y.jsx)("span",{className:`value-content value-${R(e.value)}`,children:P(e.value)})]}),void 0!==e.previousValue&&(0,y.jsxs)("div",{className:"data-previous",children:[(0,y.jsx)("span",{className:"value-label",children:"Previous:"}),(0,y.jsx)("span",{className:`value-content value-${R(e.previousValue)}`,children:P(e.previousValue)})]}),e.metadata&&(0,y.jsxs)("div",{className:"data-metadata",children:[e.metadata.file&&(0,y.jsxs)("span",{className:"metadata-item",children:["📁 ",e.metadata.file,":",e.metadata.line]}),e.metadata.functionName&&(0,y.jsxs)("span",{className:"metadata-item",children:["🔧 ",e.metadata.functionName]}),e.metadata.duration&&(0,y.jsxs)("span",{className:"metadata-item",children:["⏱️ ",e.metadata.duration,"ms"]})]})]})]},n)};return(0,y.jsxs)("div",{className:"monitoring-page",children:[(0,y.jsxs)("div",{className:"monitoring-filters",children:[(0,y.jsxs)("div",{className:"filter-group",children:[(0,y.jsx)("input",{type:"text",placeholder:"Filter by module...",value:w.moduleId,onChange:e=>N(n=>({...n,moduleId:e.target.value})),className:"filter-input"}),(0,y.jsx)("input",{type:"text",placeholder:"Filter by script...",value:w.scriptId,onChange:e=>N(n=>({...n,scriptId:e.target.value})),className:"filter-input"}),(0,y.jsx)("input",{type:"text",placeholder:"Search...",value:w.search,onChange:e=>N(n=>({...n,search:e.target.value})),className:"filter-input"})]}),(0,y.jsxs)("div",{className:"filter-group",children:[(0,y.jsxs)("label",{children:[(0,y.jsx)("input",{type:"checkbox",checked:w.showVariables,onChange:e=>N(n=>({...n,showVariables:e.target.checked}))}),"Variables"]}),(0,y.jsxs)("label",{children:[(0,y.jsx)("input",{type:"checkbox",checked:w.showStates,onChange:e=>N(n=>({...n,showStates:e.target.checked}))}),"States"]}),(0,y.jsxs)("label",{children:[(0,y.jsx)("input",{type:"checkbox",checked:w.showFunctions,onChange:e=>N(n=>({...n,showFunctions:e.target.checked}))}),"Functions"]}),(0,y.jsxs)("label",{children:[(0,y.jsx)("input",{type:"checkbox",checked:w.showProperties,onChange:e=>N(n=>({...n,showProperties:e.target.checked}))}),"Properties"]}),(0,y.jsxs)("label",{children:[(0,y.jsx)("input",{type:"checkbox",checked:w.showEvents,onChange:e=>N(n=>({...n,showEvents:e.target.checked}))}),"Events"]})]}),(0,y.jsxs)("div",{className:"view-mode-controls",children:[(0,y.jsx)("button",{className:"view-mode-btn "+("tree"===z?"active":""),onClick:()=>$("tree"),children:"Tree"}),(0,y.jsx)("button",{className:"view-mode-btn "+("table"===z?"active":""),onClick:()=>$("table"),children:"Table"}),(0,y.jsx)("button",{className:"view-mode-btn "+("timeline"===z?"active":""),onClick:()=>$("timeline"),children:"Timeline"})]})]}),(0,y.jsxs)("div",{className:"monitoring-content",children:[(0,y.jsxs)("div",{className:"monitoring-main",children:["tree"===z&&(0,y.jsx)("div",{className:"monitoring-tree",children:Object.entries(T).map(([e,n])=>(0,y.jsxs)("div",{className:"module-container",children:[(0,y.jsxs)("div",{className:"module-header",onClick:()=>(e=>{const n=new Set(I);n.has(e)?n.delete(e):n.add(e),C(n)})(e),children:[(0,y.jsx)("span",{className:"expand-icon",children:I.has(e)?"▼":"▶"}),(0,y.jsx)("span",{className:"module-name",children:e}),(0,y.jsxs)("span",{className:"module-stats",children:[Object.keys(n.scripts).length," scripts"]})]}),I.has(e)&&(0,y.jsx)("div",{className:"module-content",children:Object.entries(n.scripts).map(([e,n])=>(0,y.jsxs)("div",{className:"script-container",children:[(0,y.jsxs)("div",{className:"script-header",onClick:()=>(e=>{const n=new Set(L);n.has(e)?n.delete(e):n.add(e),D(n)})(e),children:[(0,y.jsx)("span",{className:"expand-icon",children:L.has(e)?"▼":"▶"}),(0,y.jsx)("span",{className:"script-name",children:e}),(0,y.jsxs)("span",{className:"script-stats",children:[(n.variables?Object.keys(n.variables).length:0)+(n.states?Object.keys(n.states).length:0)+(n.functions?Object.keys(n.functions).length:0)+(n.properties?Object.keys(n.properties).length:0)+(n.events?Object.keys(n.events).length:0)," items"]})]}),L.has(e)&&(0,y.jsxs)("div",{className:"script-content",children:[w.showVariables&&n.variables&&Object.keys(n.variables).length>0&&(0,y.jsxs)("div",{className:"data-category",children:[(0,y.jsx)("h4",{children:"Variables"}),Object.entries(n.variables).map(([n,t])=>B(t,`var-${e}-${n}`))]}),w.showStates&&n.states&&Object.keys(n.states).length>0&&(0,y.jsxs)("div",{className:"data-category",children:[(0,y.jsx)("h4",{children:"States"}),Object.entries(n.states).map(([n,t])=>B(t,`state-${e}-${n}`))]}),w.showFunctions&&n.functions&&Object.keys(n.functions).length>0&&(0,y.jsxs)("div",{className:"data-category",children:[(0,y.jsx)("h4",{children:"Functions"}),Object.entries(n.functions).map(([n,t])=>B(t,`func-${e}-${n}`))]}),w.showProperties&&n.properties&&Object.keys(n.properties).length>0&&(0,y.jsxs)("div",{className:"data-category",children:[(0,y.jsx)("h4",{children:"Properties"}),Object.entries(n.properties).map(([n,t])=>B(t,`prop-${e}-${n}`))]}),w.showEvents&&n.events&&Object.keys(n.events).length>0&&(0,y.jsxs)("div",{className:"data-category",children:[(0,y.jsx)("h4",{children:"Events"}),Object.entries(n.events).map(([n,t])=>B(t,`event-${e}-${n}`))]})]})]},e))})]},e))}),"table"===z&&(()=>{const e=[];return Object.entries(T).forEach(([n,t])=>{t&&t.scripts&&Object.entries(t.scripts).forEach(([t,a])=>{a&&"object"==typeof a&&Object.entries(a).forEach(([a,i])=>{"lastUpdate"!==a&&i&&"object"==typeof i&&Object.entries(i).forEach(([i,o])=>{if(o&&"object"==typeof o&&"value"in o){const s=a.slice(0,-1);e.push({moduleId:n,scriptId:t,name:i,type:s,value:o.value,timestamp:o.timestamp||Date.now(),metadata:o.metadata})}})})})}),(0,y.jsx)("div",{className:"monitoring-table",children:(0,y.jsxs)("table",{children:[(0,y.jsx)("thead",{children:(0,y.jsxs)("tr",{children:[(0,y.jsxs)("th",{className:"sortable "+("moduleId"===E?.key?"sorted":""),onClick:()=>V("moduleId"),children:["Module",(0,y.jsx)("span",{className:"sort-indicator",children:H("moduleId")})]}),(0,y.jsxs)("th",{className:"sortable "+("scriptId"===E?.key?"sorted":""),onClick:()=>V("scriptId"),children:["Script",(0,y.jsx)("span",{className:"sort-indicator",children:H("scriptId")})]}),(0,y.jsxs)("th",{className:"sortable "+("name"===E?.key?"sorted":""),onClick:()=>V("name"),children:["Name",(0,y.jsx)("span",{className:"sort-indicator",children:H("name")})]}),(0,y.jsxs)("th",{className:"sortable "+("type"===E?.key?"sorted":""),onClick:()=>V("type"),children:["Type",(0,y.jsx)("span",{className:"sort-indicator",children:H("type")})]}),(0,y.jsxs)("th",{className:"sortable "+("value"===E?.key?"sorted":""),onClick:()=>V("value"),children:["Value",(0,y.jsx)("span",{className:"sort-indicator",children:H("value")})]}),(0,y.jsx)("th",{children:"Context"}),(0,y.jsxs)("th",{className:"sortable "+("timestamp"===E?.key?"sorted":""),onClick:()=>V("timestamp"),children:["Time",(0,y.jsx)("span",{className:"sort-indicator",children:H("timestamp")})]})]})}),(0,y.jsx)("tbody",{children:(n=e,E?[...n].sort((e,n)=>{let t,a;switch(E.key){case"moduleId":t=e.moduleId.toLowerCase(),a=n.moduleId.toLowerCase();break;case"scriptId":t=e.scriptId.toLowerCase(),a=n.scriptId.toLowerCase();break;case"name":t=e.name.toLowerCase(),a=n.name.toLowerCase();break;case"type":t=e.type.toLowerCase(),a=n.type.toLowerCase();break;case"value":t=P(e.value).toLowerCase(),a=P(n.value).toLowerCase();break;case"timestamp":t=e.timestamp,a=n.timestamp;break;default:return 0}return t<a?"asc"===E.direction?-1:1:t>a?"asc"===E.direction?1:-1:0}):n).map((e,n)=>{const t=r(e.type,e.scriptId,e.moduleId,e.name);return(0,y.jsxs)("tr",{className:`table-row table-row-${e.type} ${t.className}`,style:t.style,onClick:()=>A({moduleId:e.moduleId,scriptId:e.scriptId,name:e.name,type:e.type,value:e.value,timestamp:e.timestamp}),onContextMenu:n=>((e,n)=>{e.preventDefault();const t=`table-row-${n.moduleId}-${n.scriptId}-${n.name}`,a=c.current.get(t),i=Date.now();if(a&&i-a.lastClick<300)return a.timeout&&clearTimeout(a.timeout),void c.current.delete(t);const s=setTimeout(()=>{c.current.delete(t)},300);c.current.set(t,{lastClick:i,timeout:s}),o(e.clientX,e.clientY,{id:"table-row",label:`Row: ${n.name}`,icon:"📋",action:()=>{}})})(n,e),...t.dataAttributes,children:[(0,y.jsx)("td",{className:"table-module",children:e.moduleId}),(0,y.jsx)("td",{className:"table-script",children:e.scriptId}),(0,y.jsx)("td",{className:"table-name",children:e.name}),(0,y.jsx)("td",{children:(0,y.jsx)("span",{className:`table-type table-type-${e.type}`,children:e.type})}),(0,y.jsx)("td",{className:"table-value",children:P(e.value)}),(0,y.jsx)("td",{className:"table-context",children:e.metadata&&(0,y.jsxs)("div",{className:"context-info",children:[e.metadata.file&&(0,y.jsxs)("span",{className:"context-file",title:`File: ${e.metadata.file}:${e.metadata.line||""}`,children:["📁 ",e.metadata.file.split("/").pop(),":",e.metadata.line]}),e.metadata.functionName&&(0,y.jsxs)("span",{className:"context-function",title:`Function: ${e.metadata.functionName}`,children:["🔧 ",e.metadata.functionName]}),e.metadata.duration&&(0,y.jsxs)("span",{className:"context-duration",title:`Duration: ${e.metadata.duration}ms`,children:["⏱️ ",e.metadata.duration,"ms"]})]})}),(0,y.jsx)("td",{className:"table-time",children:U(e.timestamp)})]},`${e.moduleId}-${e.scriptId}-${e.name}-${n}`)})})]})});var n})(),"timeline"===z&&(()=>{const e=[];return Object.entries(T).forEach(([n,t])=>{t&&t.scripts&&Object.entries(t.scripts).forEach(([t,a])=>{a&&"object"==typeof a&&(a.variables&&"object"==typeof a.variables&&Object.entries(a.variables).forEach(([a,i])=>e.push({moduleId:n,scriptId:t,data:i})),a.states&&"object"==typeof a.states&&Object.entries(a.states).forEach(([a,i])=>e.push({moduleId:n,scriptId:t,data:i})),a.functions&&"object"==typeof a.functions&&Object.entries(a.functions).forEach(([a,i])=>e.push({moduleId:n,scriptId:t,data:i})),a.properties&&"object"==typeof a.properties&&Object.entries(a.properties).forEach(([a,i])=>e.push({moduleId:n,scriptId:t,data:i})),a.events&&"object"==typeof a.events&&Object.entries(a.events).forEach(([a,i])=>e.push({moduleId:n,scriptId:t,data:i})))})}),e.sort((e,n)=>n.data.timestamp-e.data.timestamp),(0,y.jsx)("div",{className:"monitoring-timeline",children:e.map((e,n)=>{const t=r(e.data.type,e.data.scriptId,e.data.moduleId,e.data.name);return(0,y.jsxs)("div",{className:`timeline-item timeline-${e.data.type} ${t.className}`,style:t.style,onClick:()=>A(e.data),...t.dataAttributes,children:[(0,y.jsx)("div",{className:"timeline-time",children:new Date(e.data.timestamp).toLocaleTimeString()}),(0,y.jsxs)("div",{className:"timeline-content",children:[(0,y.jsxs)("div",{className:"timeline-header",children:[(0,y.jsx)("span",{className:"timeline-module",children:e.moduleId}),(0,y.jsx)("span",{className:"timeline-script",children:e.scriptId}),(0,y.jsx)("span",{className:"timeline-name",children:e.data.name}),(0,y.jsx)("span",{className:`timeline-type timeline-type-${e.data.type}`,children:e.data.type})]}),(0,y.jsx)("div",{className:"timeline-value",children:P(e.data.value)})]})]},n)})})})()]}),O&&(0,y.jsxs)("div",{className:"monitoring-detail",children:[(0,y.jsxs)("div",{className:"detail-header",children:[(0,y.jsx)("h3",{children:"Data Details"}),(0,y.jsxs)("div",{className:"detail-header-controls",children:[(0,y.jsx)("button",{className:"copy-btn",onClick:()=>{if(!O)return;const e={basicInformation:{name:O.name,type:O.type,timestamp:new Date(O.timestamp).toLocaleString(),moduleId:O.moduleId,scriptId:O.scriptId},valueInformation:{currentValue:O.value,previousValue:O.previousValue,valueType:R(O.value)},metadata:O.metadata||{}},n=JSON.stringify(e,null,2);navigator.clipboard.writeText(n).then(()=>{}).catch(e=>{})},title:"Copy data to clipboard",children:"📋 Copy"}),(0,y.jsx)("button",{className:"close-btn",onClick:()=>A(null),children:"×"})]})]}),(0,y.jsxs)("div",{className:"detail-content",children:[(0,y.jsxs)("div",{className:"detail-section",children:[(0,y.jsx)("h4",{children:"Basic Information"}),(0,y.jsxs)("div",{className:"detail-item",children:[(0,y.jsx)("span",{className:"detail-label",children:"Name:"}),(0,y.jsx)("span",{className:"detail-value",children:O.name})]}),(0,y.jsxs)("div",{className:"detail-item",children:[(0,y.jsx)("span",{className:"detail-label",children:"Type:"}),(0,y.jsx)("span",{className:`detail-value detail-type-${O.type}`,children:O.type})]}),(0,y.jsxs)("div",{className:"detail-item",children:[(0,y.jsx)("span",{className:"detail-label",children:"Timestamp:"}),(0,y.jsx)("span",{className:"detail-value",children:new Date(O.timestamp).toLocaleString()})]})]}),(0,y.jsxs)("div",{className:"detail-section",children:[(0,y.jsx)("h4",{children:"Value Information"}),(0,y.jsxs)("div",{className:"detail-item",children:[(0,y.jsx)("span",{className:"detail-label",children:"Current Value:"}),(0,y.jsx)("div",{className:"detail-value-container",children:(0,y.jsx)("span",{className:`detail-value detail-value-${R(O.value)}`,children:P(O.value)})})]}),void 0!==O.previousValue&&(0,y.jsxs)("div",{className:"detail-item",children:[(0,y.jsx)("span",{className:"detail-label",children:"Previous Value:"}),(0,y.jsx)("div",{className:"detail-value-container",children:(0,y.jsx)("span",{className:`detail-value detail-value-${R(O.previousValue)}`,children:P(O.previousValue)})})]})]}),O.metadata&&(0,y.jsxs)("div",{className:"detail-section",children:[(0,y.jsx)("h4",{children:"Metadata"}),O.metadata.file&&(0,y.jsxs)("div",{className:"detail-item",children:[(0,y.jsx)("span",{className:"detail-label",children:"File:"}),(0,y.jsxs)("span",{className:"detail-value",children:[O.metadata.file,":",O.metadata.line]})]}),O.metadata.functionName&&(0,y.jsxs)("div",{className:"detail-item",children:[(0,y.jsx)("span",{className:"detail-label",children:"Function:"}),(0,y.jsx)("span",{className:"detail-value",children:O.metadata.functionName})]}),O.metadata.duration&&(0,y.jsxs)("div",{className:"detail-item",children:[(0,y.jsx)("span",{className:"detail-label",children:"Duration:"}),(0,y.jsxs)("span",{className:"detail-value",children:[O.metadata.duration,"ms"]})]}),O.metadata.error&&(0,y.jsxs)("div",{className:"detail-item",children:[(0,y.jsx)("span",{className:"detail-label",children:"Error:"}),(0,y.jsx)("span",{className:"detail-value detail-error",children:O.metadata.error})]}),O.metadata.stack&&(0,y.jsxs)("div",{className:"detail-item",children:[(0,y.jsx)("span",{className:"detail-label",children:"Stack:"}),(0,y.jsx)("pre",{className:"detail-stack",children:O.metadata.stack})]})]})]})]},`${O.moduleId}-${O.scriptId}-${O.name}-${O.timestamp}`)]}),(0,y.jsx)(j,{isVisible:i.isVisible,x:i.x,y:i.y,items:(()=>{const e=i.targetData?l(i.targetData.data?.type||"variable",i.targetData.scriptId,i.targetData.moduleId,i.targetData.data?.name):null;return[{id:"highlight",label:e?"Remove Highlight":"Highlight",icon:e?"❌":"💡",action:()=>{i.targetData&&t?.current&&(e?t.current.removeHighlightForElement({elementType:i.targetData.data?.type||"variable",scriptId:i.targetData.scriptId,moduleId:i.targetData.moduleId,name:i.targetData.data?.name}):t.current.createHighlightFromData(i.targetData))}}]})(),onClose:s})]})}var I=t(664),C={};C.styleTagTransform=x(),C.setAttributes=g(),C.insert=d().bind(null,"head"),C.domAPI=l(),C.insertStyleElement=u(),s()(I.A,C),I.A&&I.A.locals&&I.A.locals;class L{constructor(e){this.serverUrl=e}async requestText(e,n){const t=await fetch(`${this.serverUrl}${e}`,n);if(!t.ok)throw new Error(`HTTP ${t.status}`);return t.text()}parseJsonFromText(e){try{const n=e.indexOf("{");return-1===n?{}:JSON.parse(e.slice(n))}catch{return{}}}async getLogs(){const e=await this.requestText("/api/logs");return(this.parseJsonFromText(e).logs||[]).map(e=>({...e,timestamp:e.timestamp||e.time||e.serverReceivedAt}))}async clearLogs(){await fetch(`${this.serverUrl}/api/logs`,{method:"DELETE"})}async exportLogs(){const e=await fetch(`${this.serverUrl}/api/export?format=csv`);if(!e.ok)throw new Error(`HTTP ${e.status}`);return e.text()}async getStats(){const e=await this.getLogs();return{totalLogs:e.length,byLevel:e.reduce((e,n)=>(e[n.level]=(e[n.level]||0)+1,e),{}),byScript:e.reduce((e,n)=>{const t=n.scriptId||"unknown";return e[t]=(e[t]||0)+1,e},{})}}async healthCheck(){try{return(await fetch(`${this.serverUrl}/api/status`)).ok}catch{return!1}}async getRecursiveLogs(){return this.getLogs()}async getRecursiveLogsStats(){const e=await this.getStats();return{totalRecursiveLogs:e.totalLogs,byScript:e.byScript,byLevel:e.byLevel}}async getLevelColor(e){switch(e){case"error":return"#ff4444";case"warn":return"#ffaa00";case"info":return"#44aa44";case"debug":return"#888888";default:return"#cccccc"}}async getScriptColor(e){const n=["#4ec9b0","#569cd6","#dcdcaa","#ce9178","#c586c0","#6a9955","#d7ba7d","#9cdcfe","#f44747","#ff7f50"],t=(e||"").split("").reduce((e,n)=>(e=(e<<5)-e+n.charCodeAt(0))&e,0);return n[Math.abs(t)%n.length]}async formatTime(e){try{return new Date(e).toLocaleTimeString()}catch{return String(e||"")}}}const D=JSON.parse('{"network":{"ports":{"viewer":3001,"server":3002},"urls":{"defaultServer":"http://localhost:3002","alternativeServer":"http://localhost:8080","productionServer":"https://api.example.com/allog"},"connection":{"timeout":5000,"retries":3,"minTimeout":1000,"maxTimeout":30000,"retryDelay":1000}},"refresh":{"intervals":{"default":30000,"minimum":1000,"options":[1000,2000,5000,10000,30000]},"autoRefresh":{"enabled":false,"minInterval":30000}},"logging":{"levels":{"valid":["info","warn","error","debug","test"],"default":"info","colors":{"info":"#007AFF","warn":"#FF9500","error":"#FF3B30","debug":"#888888","test":"#6c757d"}},"internal":{"maxLogs":1000,"enableConsole":true,"defaultLevel":"info"}},"ui":{"colors":{"status":{"connected":"#28a745","error":"#dc3545","neutral":"#6c757d","warning":"#FF9500"},"script":["#4ec9b0","#569cd6","#dcdcaa","#ce9178","#c586c0","#6a9955","#d7ba7d","#9cdcfe","#f44747","#ff7f50"]},"layout":{"imagePreview":{"maxWidth":"100%","maxHeight":300,"borderRadius":4},"notification":{"autoHideDelay":3000,"fadeOutDuration":300}}},"buffers":{"logs":{"default":500,"maximum":10000},"stats":{"enabledModules":0,"totalModules":0}},"instrumentation":{"levels":{"none":"none","basic":"basic","detailed":"detailed","comprehensive":"comprehensive"},"defaults":{"enabled":true,"level":"detailed"}},"defaults":{"fallback":{"sourceId":"unknown","scriptId":"unknown","sourceType":"unknown","sourceVersion":"1.0.0"},"messages":{"loading":"Loading logs...","noLogs":"No logs available","noMatching":"No logs match your current filters","disconnected":"Not connected to server","connectionFailed":"Connection failed"}},"export":{"formats":["csv","json"],"filenamePrefixes":{"logs":"allog-logs","stats":"allog-stats","config":"allog-config"}}}'),O=new class{constructor(){this.config=D}get viewerPort(){return this.config.network.ports.viewer}get serverPort(){return this.config.network.ports.server}get defaultServerUrl(){return this.config.network.urls.defaultServer}get alternativeServerUrl(){return this.config.network.urls.alternativeServer}get productionServerUrl(){return this.config.network.urls.productionServer}get connectionTimeout(){return this.config.network.connection.timeout}get connectionRetries(){return this.config.network.connection.retries}get minTimeout(){return this.config.network.connection.minTimeout}get maxTimeout(){return this.config.network.connection.maxTimeout}get defaultRefreshInterval(){return this.config.refresh.intervals.default}get minRefreshInterval(){return this.config.refresh.intervals.minimum}get refreshOptions(){return this.config.refresh.intervals.options}get autoRefreshEnabled(){return this.config.refresh.autoRefresh.enabled}get minAutoRefreshInterval(){return this.config.refresh.autoRefresh.minInterval}get validLogLevels(){return this.config.logging.levels.valid}get defaultLogLevel(){return this.config.logging.levels.default}get logLevelColors(){return this.config.logging.levels.colors}get maxInternalLogs(){return this.config.logging.internal.maxLogs}get enableConsoleLogging(){return this.config.logging.internal.enableConsole}get defaultInternalLogLevel(){return this.config.logging.internal.defaultLevel}get statusColors(){return this.config.ui.colors.status}get scriptColors(){return this.config.ui.colors.script}get imagePreviewConfig(){return this.config.ui.layout.imagePreview}get notificationConfig(){return this.config.ui.layout.notification}get defaultLogBuffer(){return this.config.buffers.logs.default}get maxLogBuffer(){return this.config.buffers.logs.maximum}get instrumentationLevels(){return this.config.instrumentation.levels}get defaultInstrumentationEnabled(){return this.config.instrumentation.defaults.enabled}get defaultInstrumentationLevel(){return this.config.instrumentation.defaults.level}get fallbackValues(){return this.config.defaults.fallback}get defaultMessages(){return this.config.defaults.messages}get exportFormats(){return this.config.export.formats}get exportFilenamePrefixes(){return this.config.export.filenamePrefixes}isValidLogLevel(e){return this.validLogLevels.includes(e)}getLogLevelColor(e){return this.logLevelColors[e]||this.statusColors.neutral}getScriptColor(e){const n=this.scriptColors,t=(e||this.fallbackValues.scriptId).split("").reduce((e,n)=>(e=(e<<5)-e+n.charCodeAt(0))&e,0);return n[Math.abs(t)%n.length]}getStatusColor(e){return this.statusColors[e]||this.statusColors.neutral}getConnectionConfig(){return{baseUrl:this.defaultServerUrl,timeout:this.connectionTimeout,retries:this.connectionRetries}}getWebSocketUrl(e){const n="https:"===window.location.protocol?"wss":"ws",t=window.location.hostname,a=e||window.location.port;return`${n}://${t}:${a===this.viewerPort.toString()?this.serverPort.toString():a||this.serverPort.toString()}`}getApiServerUrl(){return`http://${window.location.hostname}:${window.location.port===this.serverPort.toString()?this.viewerPort.toString():this.serverPort.toString()}`}formatMessage(e,n={}){return(this.defaultMessages[e]||e).replace(/\{(\w+)\}/g,(e,t)=>n[t]||e)}getServerUrl(){return window.ALLOG_INTERMEDIARY_URL||this.defaultServerUrl}getInitialLogStats(){return{totalLogs:0,bufferSize:this.defaultLogBuffer,enabledModules:this.config.buffers.stats.enabledModules,totalModules:this.config.buffers.stats.totalModules,logLevels:this.validLogLevels.reduce((e,n)=>(e[n]=0,e),{}),lastUpdate:(new Date).toISOString()}}getInitialConnectionStatus(){return{isConnected:!1,retryCount:0}}getInitialMonitoringStats(){return{totalModules:0,totalScripts:0,totalVariables:0,totalStates:0,totalFunctions:0,totalProperties:0,totalEvents:0,lastUpdate:(new Date).toISOString()}}};function A({serverUrl:e,autoRefresh:n,refreshInterval:t}){const[i,o]=(0,a.useState)([]),[s,r]=(0,a.useState)({level:"",scriptId:"",search:""}),[l,c]=(0,a.useState)(new Set),[d,p]=(0,a.useState)(!1),[g,m]=(0,a.useState)(null),[u,h]=(0,a.useState)({totalRecursiveLogs:0,byScript:{},byLevel:{}}),[x,f]=(0,a.useState)(null),[b,v]=(0,a.useState)(null),[w]=(0,a.useState)(()=>function(e){return new L(e)}(e)),j=(0,a.useCallback)(async()=>{console.log("🔄 RecursiveLogsPage: Fetching logs from server:",e);const n=await w.getRecursiveLogs();return console.log("✅ RecursiveLogsPage: Received logs:",n.length,"logs"),n},[w,e]),k=(0,a.useCallback)(async()=>{const e=await w.getRecursiveLogsStats();return console.log("📊 RecursiveLogsPage: Received stats:",e),e},[w]),S=(0,a.useCallback)(async()=>{try{const e=await j();o(e),p(!0),m(null);const n=await k();h(n)}catch(e){console.error("❌ RecursiveLogsPage: Error fetching logs:",e),m(`Connection failed: ${e instanceof Error?e.message:"Unknown error"}`),p(!1)}},[j,k]),N=(0,a.useCallback)(()=>{console.log("🔄 RecursiveLogsPage: Component mounted")},[]),I=(0,a.useCallback)(()=>{console.log("🔄 RecursiveLogsPage: Component unmounting")},[]);(0,a.useEffect)(()=>{if(!n)return;const e=Math.max(t,3e4),a=setInterval(()=>{S()},e);return()=>clearInterval(a)},[n,t,S]),(0,a.useEffect)(()=>{N(),S();const e=setInterval(()=>{console.log("🔄 RecursiveLogsPage: Periodic activity heartbeat",{component:"RecursiveLogsPage",timestamp:Date.now(),logCount:i.length})},6e4);return()=>{clearInterval(e),I()}},[S,N,I]);const C=(0,a.useCallback)(e=>{c(n=>{const t=new Set(n);return t.has(e)?t.delete(e):t.add(e),t}),console.log("🔄 RecursiveLogsPage: User interaction - Log expansion toggled",{action:"toggleLogExpansion",logId:e,timestamp:Date.now()})},[]),D=(0,a.useCallback)(e=>{f(e)},[]),A=(0,a.useCallback)(e=>{v(n=>n?.key===e?{key:e,direction:"asc"===n.direction?"desc":"asc"}:{key:e,direction:"asc"}),console.log("🔄 RecursiveLogsPage: User interaction - Logs sorted",{action:"requestSort",sortKey:e,timestamp:Date.now()})},[]),z=e=>b?.key!==e?"↕️":"asc"===b.direction?"↑":"↓",$=i.filter(e=>!(s.level&&e.level!==s.level||s.scriptId&&e.scriptId!==s.scriptId||s.search&&!e.message.toLowerCase().includes(s.search.toLowerCase()))),E=(F=$,b?[...F].sort((e,n)=>{let t=e[b.key],a=n[b.key];return"time"===b.key?(t=new Date(t).getTime(),a=new Date(a).getTime()):"string"==typeof t&&(t=t.toLowerCase(),a=a.toLowerCase()),t<a?"asc"===b.direction?-1:1:t>a?"asc"===b.direction?1:-1:0}):F);var F;const M=Array.from(new Set(i.map(e=>e.scriptId))).sort(),T=O.validLogLevels,P=e=>O.getLogLevelColor(e),R=e=>O.getScriptColor(e||O.fallbackValues.scriptId),U=e=>new Date(e).toLocaleTimeString();return(0,y.jsxs)("div",{className:"recursive-logs-page",children:[(0,y.jsxs)("div",{className:"recursive-logs-header",children:[(0,y.jsx)("h2",{children:"🔄 Recursive Logs"}),(0,y.jsx)("p",{className:"recursive-logs-description",children:"Self-referential logs from the Allog system itself. These logs show how the logging system operates."}),(0,y.jsxs)("div",{className:"recursive-logs-status",children:[(0,y.jsx)("span",{className:"status-indicator",children:"🔄 Active Filtering"}),(0,y.jsx)("span",{className:"status-detail",children:"Showing only self-logging scripts"})]})]}),(0,y.jsxs)("div",{className:"recursive-logs-stats",children:[(0,y.jsxs)("div",{className:"stat-card",children:[(0,y.jsx)("div",{className:"stat-number",children:u.totalRecursiveLogs}),(0,y.jsx)("div",{className:"stat-label",children:"Total Recursive Logs"})]}),(0,y.jsxs)("div",{className:"stat-card",children:[(0,y.jsx)("div",{className:"stat-number",children:Object.keys(u.byScript).length}),(0,y.jsx)("div",{className:"stat-label",children:"Self-Logging Scripts"})]}),(0,y.jsxs)("div",{className:"stat-card",children:[(0,y.jsx)("div",{className:"stat-number",children:Object.keys(u.byLevel).length}),(0,y.jsx)("div",{className:"stat-label",children:"Log Levels"})]})]}),(0,y.jsxs)("div",{className:"recursive-logs-content",children:[(0,y.jsxs)("div",{className:"recursive-logs-table-column",children:[(0,y.jsxs)("div",{className:"recursive-logs-table-header",children:[(0,y.jsx)("h3",{children:"📊 Recursive Logs Table"}),(0,y.jsx)("button",{className:"refresh-btn",onClick:S,disabled:!d,children:"🔄 Refresh"})]}),(0,y.jsx)("div",{className:"recursive-logs-table",children:(0,y.jsxs)("table",{children:[(0,y.jsx)("thead",{children:(0,y.jsxs)("tr",{children:[(0,y.jsxs)("th",{className:"sortable",onClick:()=>A("scriptId"),children:["Script ",z("scriptId")]}),(0,y.jsxs)("th",{className:"sortable",onClick:()=>A("level"),children:["Level ",z("level")]}),(0,y.jsxs)("th",{className:"sortable",onClick:()=>A("time"),children:["Time ",z("time")]}),(0,y.jsxs)("th",{className:"sortable",onClick:()=>A("message"),children:["Message ",z("message")]})]})}),(0,y.jsx)("tbody",{children:0===E.length?(0,y.jsx)("tr",{children:(0,y.jsx)("td",{colSpan:4,className:"no-data",children:0===i.length?"No recursive logs found":"No logs match current filter"})}):E.map(e=>(0,y.jsxs)("tr",{className:"table-row "+(x?.id===e.id?"selected":""),onClick:()=>D(e),children:[(0,y.jsx)("td",{className:"table-script",style:{color:R(e.scriptId)},children:e.scriptId||"unknown"}),(0,y.jsx)("td",{children:(0,y.jsx)("span",{className:"table-level",style:{color:P(e.level)},children:e.level.toUpperCase()})}),(0,y.jsx)("td",{className:"table-time",children:U(e.time)}),(0,y.jsx)("td",{className:"table-message",children:e.message})]},e.id))})]})})]}),(0,y.jsxs)("div",{className:"recursive-logs-logs-column",children:[(0,y.jsxs)("div",{className:"recursive-logs-filters",children:[(0,y.jsxs)("div",{className:"filter-group",children:[(0,y.jsx)("label",{children:"Script:"}),(0,y.jsxs)("select",{value:s.scriptId,onChange:e=>r(n=>({...n,scriptId:e.target.value})),children:[(0,y.jsx)("option",{value:"",children:"All Scripts"}),M.map(e=>(0,y.jsxs)("option",{value:e,children:[e," (",u.byScript[e]||0,")"]},e))]})]}),(0,y.jsxs)("div",{className:"filter-group",children:[(0,y.jsx)("label",{children:"Level:"}),(0,y.jsxs)("select",{value:s.level,onChange:e=>r(n=>({...n,level:e.target.value})),children:[(0,y.jsx)("option",{value:"",children:"All Levels"}),T.map(e=>(0,y.jsxs)("option",{value:e,children:[e.toUpperCase()," (",u.byLevel[e]||0,")"]},e))]})]}),(0,y.jsxs)("div",{className:"filter-group",children:[(0,y.jsx)("label",{children:"Search:"}),(0,y.jsx)("input",{type:"text",placeholder:"Search in messages...",value:s.search,onChange:e=>r(n=>({...n,search:e.target.value}))})]}),(0,y.jsx)("button",{className:"clear-btn",onClick:()=>{r({level:"",scriptId:"",search:""}),f(null)},children:"Clear Filters"})]}),g&&(0,y.jsxs)("div",{className:"error-message",children:["Error: ",g]}),(0,y.jsx)("div",{className:"recursive-logs-list",children:0===$.length?(0,y.jsx)("div",{className:"no-logs",children:0===i.length?"No recursive logs found":"No logs match current filter"}):$.map(e=>(0,y.jsxs)("div",{className:`log-entry ${l.has(e.id)?"expanded":""} ${x?.id===e.id?"selected":""}`,"data-script-id":e.scriptId,children:[(0,y.jsxs)("div",{className:"log-header",onClick:()=>C(e.id),children:[(0,y.jsx)("div",{className:"log-level",style:{color:P(e.level)},children:e.level.toUpperCase()}),(0,y.jsx)("div",{className:"log-time",children:U(e.time)}),(0,y.jsx)("div",{className:"log-script",style:{color:R(e.scriptId)},children:e.scriptId}),(0,y.jsx)("div",{className:"log-message",children:e.message}),(0,y.jsx)("div",{className:"log-expand",children:"▶"})]}),l.has(e.id)&&(0,y.jsxs)("div",{className:"log-details",children:[e.data&&(0,y.jsxs)("div",{className:"log-data",children:[(0,y.jsx)("strong",{children:"Data:"}),(0,y.jsx)("pre",{children:JSON.stringify(e.data,null,2)})]}),e.file&&(0,y.jsxs)("div",{className:"log-file",children:[(0,y.jsx)("strong",{children:"File:"})," ",e.file,":",e.line,":",e.column,e.functionName&&` (${e.functionName})`]}),e.stack&&(0,y.jsxs)("div",{className:"log-stack",children:[(0,y.jsx)("strong",{children:"Stack:"}),(0,y.jsx)("pre",{children:e.stack})]})]})]},e.id))})]})]})]})}var z=t(715),$={};$.styleTagTransform=x(),$.setAttributes=g(),$.insert=d().bind(null,"head"),$.domAPI=l(),$.insertStyleElement=u(),s()(z.A,$),z.A&&z.A.locals&&z.A.locals;const E=()=>{const[e,n]=(0,a.useState)(null),[t,i]=(0,a.useState)(null),[o,s]=(0,a.useState)(!0),[r,l]=(0,a.useState)(null),[c,d]=(0,a.useState)(!1),[p,g]=(0,a.useState)(null),m=async()=>{try{s(!0);const e=u(),[t,a]=await Promise.all([fetch("/api/instrumentation/config"),fetch("/api/monitoring")]);if(t.ok){const a=await t.json(),i=e||a.config;n(i),e&&await fetch("/api/instrumentation/config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({config:e})})}else e?n(e):l("Failed to fetch instrumentation configuration");if(a.ok){const e=await a.json();i(e)}else console.warn("Failed to fetch monitoring data");l(null)}catch(e){const t=u();t?(n(t),l(null)):l("Network error while fetching data")}finally{s(!1)}},u=()=>{try{const e=localStorage.getItem("allog-save-system");if(e){const n=JSON.parse(e);if(n.activeProfile){const e=n.activeProfile,t=n.items?.find(n=>n.id===e);if(t){g(t);const a=n.items?.find(n=>"profile-settings"===n.type&&n.parentId===e);if(a?.metadata?.data?.instrumentation)return a.metadata.data.instrumentation}}}}catch(e){console.warn("Failed to load profile instrumentation settings:",e)}return null},h=async e=>{try{d(!0),(await fetch("/api/instrumentation/config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({config:e})})).ok?(n(e),await x(e),l(null)):l("Failed to save instrumentation configuration")}catch(e){l("Network error while saving configuration")}finally{d(!1)}},x=async e=>{try{const n=localStorage.getItem("allog-save-system");if(n){const t=JSON.parse(n);if(t.activeProfile){const n=t.activeProfile;let a=t.items?.find(e=>"profile-settings"===e.type&&e.parentId===n);a?(a.metadata.data.instrumentation=e,a.metadata.updatedAt=(new Date).toISOString()):(a={id:`profile-settings-${n}`,name:"Profile Settings",type:"profile-settings",parentId:n,metadata:{description:"Settings for profile",tags:["profile","settings","system"],createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),data:{theme:"dark",autoSave:!0,notifications:!0,defaultView:"logs",instrumentation:e}}},t.items=t.items||[],t.items.push(a)),localStorage.setItem("allog-save-system",JSON.stringify(t))}}}catch(e){console.warn("Failed to save to profile:",e)}},f=async n=>{if(!e)return;let t={...e};switch(n){case"comprehensive":t.enabled=!0,t.defaultLevel="comprehensive",Object.keys(t.components).forEach(e=>{t.components[e].enabled=!0,t.components[e].level="comprehensive"}),Object.keys(t.methods).forEach(e=>{t.methods[e]=!0}),Object.keys(t.state).forEach(e=>{t.state[e]=!0}),Object.keys(t.dataFlow).forEach(e=>{t.dataFlow[e]=!0}),Object.keys(t.performance).forEach(e=>{t.performance[e]=!0});break;case"detailed":t.enabled=!0,t.defaultLevel="detailed",Object.keys(t.components).forEach(e=>{t.components[e].enabled=!0,t.components[e].level="detailed"}),t.methods.logMethodCalls=!0,t.methods.logMethodParameters=!0,t.methods.logMethodReturns=!0,t.methods.logMethodTiming=!1,t.methods.logMethodErrors=!0,t.state.logVariableChanges=!0,t.state.logConfigurationChanges=!0,t.state.logBufferOperations=!0,t.state.logModuleStateChanges=!1,t.state.logServerCommunication=!0,t.dataFlow.logDataTransformation=!0,t.dataFlow.logDataRouting=!0,t.dataFlow.logDataFiltering=!0,t.dataFlow.logDataSerialization=!1,t.performance.logExecutionTime=!0,t.performance.logMemoryUsage=!1,t.performance.logBufferStats=!0,t.performance.logServerLatency=!1;break;case"basic":t.enabled=!0,t.defaultLevel="basic",Object.keys(t.components).forEach(e=>{t.components[e].enabled=!0,t.components[e].level="basic"}),t.methods.logMethodCalls=!0,t.methods.logMethodParameters=!1,t.methods.logMethodReturns=!1,t.methods.logMethodTiming=!1,t.methods.logMethodErrors=!0,t.state.logVariableChanges=!1,t.state.logConfigurationChanges=!0,t.state.logBufferOperations=!1,t.state.logModuleStateChanges=!1,t.state.logServerCommunication=!1,t.dataFlow.logDataTransformation=!1,t.dataFlow.logDataRouting=!1,t.dataFlow.logDataFiltering=!1,t.dataFlow.logDataSerialization=!1,t.performance.logExecutionTime=!1,t.performance.logMemoryUsage=!1,t.performance.logBufferStats=!1,t.performance.logServerLatency=!1;break;case"none":t.enabled=!1,t.defaultLevel="none",Object.keys(t.components).forEach(e=>{t.components[e].enabled=!1,t.components[e].level="none"}),Object.keys(t.methods).forEach(e=>{t.methods[e]=!1}),Object.keys(t.state).forEach(e=>{t.state[e]=!1}),Object.keys(t.dataFlow).forEach(e=>{t.dataFlow[e]=!1}),Object.keys(t.performance).forEach(e=>{t.performance[e]=!1})}await h(t)},b=async(n,t)=>{if(!e)return;const a={...e},i=n.split(".");let o=a;for(let e=0;e<i.length-1;e++)o=o[i[e]];o[i[i.length-1]]=t,await h(a)};return(0,a.useEffect)(()=>{m()},[]),o?(0,y.jsx)("div",{className:"instrumentation-page",children:(0,y.jsx)("div",{className:"loading",children:"Loading instrumentation configuration..."})}):r?(0,y.jsx)("div",{className:"instrumentation-page",children:(0,y.jsxs)("div",{className:"error",children:[(0,y.jsx)("h3",{children:"Error"}),(0,y.jsx)("p",{children:r}),(0,y.jsx)("button",{onClick:m,children:"Retry"})]})}):e?(0,y.jsxs)("div",{className:"instrumentation-page",children:[(0,y.jsxs)("div",{className:"instrumentation-header",children:[(0,y.jsx)("h2",{children:"🔧 Instrumentation Controls"}),(0,y.jsx)("p",{children:"Configure what gets logged in the Allog system"}),p&&(0,y.jsx)("div",{className:"profile-indicator",children:(0,y.jsxs)("span",{className:"profile-badge",children:["📁 Settings auto-saved to profile: ",(0,y.jsx)("strong",{children:p.name})]})})]}),(0,y.jsxs)("div",{className:"preset-section",children:[(0,y.jsx)("h3",{children:"Quick Presets"}),(0,y.jsxs)("div",{className:"preset-buttons",children:[(0,y.jsx)("button",{className:"preset-btn comprehensive",onClick:()=>f("comprehensive"),disabled:c,children:"🔍 Comprehensive"}),(0,y.jsx)("button",{className:"preset-btn detailed",onClick:()=>f("detailed"),disabled:c,children:"📊 Detailed"}),(0,y.jsx)("button",{className:"preset-btn basic",onClick:()=>f("basic"),disabled:c,children:"📝 Basic"}),(0,y.jsx)("button",{className:"preset-btn none",onClick:()=>f("none"),disabled:c,children:"🚫 None"})]})]}),(0,y.jsxs)("div",{className:"config-section",children:[(0,y.jsx)("h3",{children:"Global Settings"}),(0,y.jsxs)("div",{className:"config-grid",children:[(0,y.jsx)("div",{className:"config-item",children:(0,y.jsxs)("label",{children:[(0,y.jsx)("input",{type:"checkbox",checked:e.enabled,onChange:e=>b("enabled",e.target.checked),disabled:c}),"Enable Instrumentation"]})}),(0,y.jsxs)("div",{className:"config-item",children:[(0,y.jsx)("label",{children:"Default Level:"}),(0,y.jsxs)("select",{value:e.defaultLevel,onChange:e=>b("defaultLevel",e.target.value),disabled:c,children:[(0,y.jsx)("option",{value:"none",children:"None"}),(0,y.jsx)("option",{value:"basic",children:"Basic"}),(0,y.jsx)("option",{value:"detailed",children:"Detailed"}),(0,y.jsx)("option",{value:"comprehensive",children:"Comprehensive"})]})]})]})]}),(0,y.jsxs)("div",{className:"config-section",children:[(0,y.jsxs)("h3",{children:["Active Components (",t?.stats.totalModules||0," discovered)"]}),t&&t.modules&&Object.keys(t.modules).length>0?(0,y.jsx)("div",{className:"components-table",children:(0,y.jsxs)("table",{children:[(0,y.jsx)("thead",{children:(0,y.jsxs)("tr",{children:[(0,y.jsx)("th",{children:"Module"}),(0,y.jsx)("th",{children:"Scripts"}),(0,y.jsx)("th",{children:"Variables"}),(0,y.jsx)("th",{children:"States"}),(0,y.jsx)("th",{children:"Functions"}),(0,y.jsx)("th",{children:"Properties"}),(0,y.jsx)("th",{children:"Events"}),(0,y.jsx)("th",{children:"Last Update"}),(0,y.jsx)("th",{children:"Level"}),(0,y.jsx)("th",{children:"Enabled"})]})}),(0,y.jsx)("tbody",{children:Object.entries(t.modules).map(([n,a])=>{const o=Object.keys(a.scripts||{}).length;let s=0,r=0,l=0,d=0,p=0;Object.values(a.scripts||{}).forEach(e=>{s+=Object.keys(e.variables||{}).length,r+=Object.keys(e.states||{}).length,l+=Object.keys(e.functions||{}).length,d+=Object.keys(e.properties||{}).length,p+=Object.keys(e.events||{}).length});const g=e.components&&e.components[n]?e.components[n]:{enabled:!0,level:e.defaultLevel||"detailed"};return(0,y.jsxs)("tr",{className:"module-row",children:[(0,y.jsxs)("td",{className:"module-name",children:[(0,y.jsx)("span",{className:"module-icon",children:"📦"}),n]}),(0,y.jsx)("td",{className:"module-scripts",children:o}),(0,y.jsx)("td",{className:"module-variables",children:s}),(0,y.jsx)("td",{className:"module-states",children:r}),(0,y.jsx)("td",{className:"module-functions",children:l}),(0,y.jsx)("td",{className:"module-properties",children:d}),(0,y.jsx)("td",{className:"module-events",children:p}),(0,y.jsx)("td",{className:"module-last-update",children:a.lastUpdate?new Date(a.lastUpdate).toLocaleString():"Never"}),(0,y.jsx)("td",{className:"module-level",children:(0,y.jsxs)("select",{value:g.level,onChange:a=>(async(n,a)=>{if(!t)return;const o={...t.modules};if(o[n]={...o[n],level:a},i({...t,modules:o}),e){const t={...e};t.components||(t.components={}),t.components[n]?t.components[n].level=a:t.components[n]={enabled:!0,level:a,methods:[],excludeMethods:[]},await h(t)}})(n,a.target.value),disabled:c,className:"level-select",children:[(0,y.jsx)("option",{value:"none",children:"None"}),(0,y.jsx)("option",{value:"basic",children:"Basic"}),(0,y.jsx)("option",{value:"detailed",children:"Detailed"}),(0,y.jsx)("option",{value:"comprehensive",children:"Comprehensive"})]})}),(0,y.jsx)("td",{className:"module-enabled",children:(0,y.jsx)("input",{type:"checkbox",checked:g.enabled,onChange:a=>(async(n,a)=>{if(!t)return;const o={...t.modules};if(o[n]={...o[n],enabled:a},i({...t,modules:o}),e){const t={...e};t.components||(t.components={}),t.components[n]?t.components[n].enabled=a:t.components[n]={enabled:a,level:"detailed",methods:[],excludeMethods:[]},await h(t)}})(n,a.target.checked),disabled:c,className:"enabled-checkbox"})})]},n)})})]})}):(0,y.jsxs)("div",{className:"no-components",children:[(0,y.jsx)("p",{children:"No active components detected. Components will appear here as they send logs."}),(0,y.jsx)("button",{onClick:m,disabled:o,children:"🔄 Refresh Discovery"})]})]}),(0,y.jsxs)("div",{className:"config-section",children:[(0,y.jsx)("h3",{children:"Method Logging"}),(0,y.jsx)("div",{className:"config-grid",children:Object.entries(e.methods||{}).map(([e,n])=>(0,y.jsx)("div",{className:"config-item",children:(0,y.jsxs)("label",{children:[(0,y.jsx)("input",{type:"checkbox",checked:n,onChange:n=>b(`methods.${e}`,n.target.checked),disabled:c}),e.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase())]})},e))})]}),(0,y.jsxs)("div",{className:"config-section",children:[(0,y.jsx)("h3",{children:"State Logging"}),(0,y.jsx)("div",{className:"config-grid",children:Object.entries(e.state||{}).map(([e,n])=>(0,y.jsx)("div",{className:"config-item",children:(0,y.jsxs)("label",{children:[(0,y.jsx)("input",{type:"checkbox",checked:n,onChange:n=>b(`state.${e}`,n.target.checked),disabled:c}),e.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase())]})},e))})]}),(0,y.jsxs)("div",{className:"config-section",children:[(0,y.jsx)("h3",{children:"Data Flow Logging"}),(0,y.jsx)("div",{className:"config-grid",children:Object.entries(e.dataFlow||{}).map(([e,n])=>(0,y.jsx)("div",{className:"config-item",children:(0,y.jsxs)("label",{children:[(0,y.jsx)("input",{type:"checkbox",checked:n,onChange:n=>b(`dataFlow.${e}`,n.target.checked),disabled:c}),e.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase())]})},e))})]}),(0,y.jsxs)("div",{className:"config-section",children:[(0,y.jsx)("h3",{children:"Performance Logging"}),(0,y.jsx)("div",{className:"config-grid",children:Object.entries(e.performance||{}).map(([e,n])=>(0,y.jsx)("div",{className:"config-item",children:(0,y.jsxs)("label",{children:[(0,y.jsx)("input",{type:"checkbox",checked:n,onChange:n=>b(`performance.${e}`,n.target.checked),disabled:c}),e.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase())]})},e))})]}),c&&(0,y.jsx)("div",{className:"saving-indicator",children:"Saving configuration..."})]}):(0,y.jsx)("div",{className:"instrumentation-page",children:(0,y.jsx)("div",{className:"error",children:"No configuration available"})})};var F=t(430),M={};M.styleTagTransform=x(),M.setAttributes=g(),M.insert=d().bind(null,"head"),M.domAPI=l(),M.insertStyleElement=u(),s()(F.A,M),F.A&&F.A.locals&&F.A.locals;const T=(0,a.forwardRef)(({isOpen:e,onToggle:n,onSave:t,onLoad:i,onDelete:o,onExport:s,onImport:r,currentData:l,currentView:c,onCreateHighlight:d},p)=>{const[g,m]=(0,a.useState)({items:[],expandedFolders:new Set,selectedItem:null,editingItem:null,activeProfile:null}),[u,h]=(0,a.useState)(""),[x,f]=(0,a.useState)("profile"),[b,v]=(0,a.useState)(!1),[w,j]=(0,a.useState)(!1),k=(0,a.useRef)(new Map),[S,N]=(0,a.useState)({isVisible:!1,x:0,y:0,targetItem:null}),[I,C]=(0,a.useState)(null),[L,D]=(0,a.useState)(""),[O,A]=(0,a.useState)({total:0,buffer:500,modules:0,info:0,warn:0,error:0,debug:0,scripts:15,variables:30,states:45,functions:30,properties:30,events:30});(0,a.useEffect)(()=>{const e=localStorage.getItem("allog-save-system");if(e)try{const n=JSON.parse(e),t=n.items||[],a=F(t);m(e=>({...e,items:a,expandedFolders:new Set(n.expandedFolders||[]),activeProfile:n.activeProfile||null}))}catch(e){z()}else z()},[]);const z=(0,a.useCallback)(()=>{const e=[{id:"default-profile",name:"Default Profile",type:"profile",metadata:{description:"Default profile for all saves",tags:["default"],createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()}},{id:"default-highlight",name:"Highlights",type:"highlight",parentId:"default-profile",metadata:{description:"Default highlight category",tags:["default","highlight"],createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()}},{id:"default-comparison",name:"Comparisons",type:"comparison",parentId:"default-profile",metadata:{description:"Default comparison category",tags:["default","comparison"],createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()}},{id:"default-filter-preset",name:"Filter Presets",type:"filter-preset",parentId:"default-profile",metadata:{description:"Default filter presets category",tags:["default","filter"],createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()}},{id:"default-view-preset",name:"View Presets",type:"view-preset",parentId:"default-profile",metadata:{description:"Default view presets category",tags:["default","view"],createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()}},{id:"default-log-session",name:"Log Sessions",type:"log-session",parentId:"default-profile",metadata:{description:"Default log sessions category",tags:["default","log"],createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()}},{id:"default-monitoring-session",name:"Monitoring Sessions",type:"monitoring-session",parentId:"default-profile",metadata:{description:"Default monitoring sessions category",tags:["default","monitoring"],createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()}}];m(n=>({...n,items:e,expandedFolders:new Set(["default-profile"])}))},[]),$=(0,a.useCallback)(e=>{if(!e)return null;if("profile"===e.type)return e;if(e.parentId){const n=g.items.find(n=>n.id===e.parentId);if(n)return"profile"===n.type?n:$(n)}return null},[g.items]),E=(0,a.useCallback)((e,n)=>{const t=(new Date).toISOString(),a=e.replace("profile-","");return[{id:`${a}-highlight`,name:"Highlights",type:"highlight",parentId:e,metadata:{description:`${n} highlight category`,tags:[n.toLowerCase(),"highlight"],createdAt:t,updatedAt:t}},{id:`${a}-comparison`,name:"Comparisons",type:"comparison",parentId:e,metadata:{description:`${n} comparison category`,tags:[n.toLowerCase(),"comparison"],createdAt:t,updatedAt:t}},{id:`${a}-filter-preset`,name:"Filter Presets",type:"filter-preset",parentId:e,metadata:{description:`${n} filter presets category`,tags:[n.toLowerCase(),"filter"],createdAt:t,updatedAt:t}},{id:`${a}-view-preset`,name:"View Presets",type:"view-preset",parentId:e,metadata:{description:`${n} view presets category`,tags:[n.toLowerCase(),"view"],createdAt:t,updatedAt:t}},{id:`${a}-log-session`,name:"Log Sessions",type:"log-session",parentId:e,metadata:{description:`${n} log sessions category`,tags:[n.toLowerCase(),"log"],createdAt:t,updatedAt:t}},{id:`${a}-monitoring-session`,name:"Monitoring Sessions",type:"monitoring-session",parentId:e,metadata:{description:`${n} monitoring sessions category`,tags:[n.toLowerCase(),"monitoring"],createdAt:t,updatedAt:t}}]},[]),F=(0,a.useCallback)(e=>{console.log("SaveSystem: Ensuring default structure exists...");const n=e.some(e=>"default-profile"===e.id),t=e.some(e=>"default-highlight"===e.id),a=e.some(e=>"default-comparison"===e.id),i=e.some(e=>"default-filter-preset"===e.id),o=e.some(e=>"default-view-preset"===e.id),s=e.some(e=>"default-log-session"===e.id),r=e.some(e=>"default-monitoring-session"===e.id),l=[];return n||l.push({id:"default-profile",name:"Default Profile",type:"profile",metadata:{description:"Default profile for all saves",tags:["default"],createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()}}),t||l.push({id:"default-highlight",name:"Highlights",type:"highlight",parentId:"default-profile",metadata:{description:"Default highlight category",tags:["default","highlight"],createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()}}),a||l.push({id:"default-comparison",name:"Comparisons",type:"comparison",parentId:"default-profile",metadata:{description:"Default comparison category",tags:["default","comparison"],createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()}}),i||l.push({id:"default-filter-preset",name:"Filter Presets",type:"filter-preset",parentId:"default-profile",metadata:{description:"Default filter presets category",tags:["default","filter"],createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()}}),o||l.push({id:"default-view-preset",name:"View Presets",type:"view-preset",parentId:"default-profile",metadata:{description:"Default view presets category",tags:["default","view"],createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()}}),s||l.push({id:"default-log-session",name:"Log Sessions",type:"log-session",parentId:"default-profile",metadata:{description:"Default log sessions category",tags:["default","log"],createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()}}),r||l.push({id:"default-monitoring-session",name:"Monitoring Sessions",type:"monitoring-session",parentId:"default-profile",metadata:{description:"Default monitoring sessions category",tags:["default","monitoring"],createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()}}),l.length>0?(console.log("SaveSystem: Adding missing default items:",l),[...e,...l]):e},[]);(0,a.useEffect)(()=>{console.log("SaveSystem: Saving state to localStorage:",{items:g.items,expandedFolders:Array.from(g.expandedFolders),activeProfile:g.activeProfile}),localStorage.setItem("allog-save-system",JSON.stringify({items:g.items,expandedFolders:Array.from(g.expandedFolders),activeProfile:g.activeProfile}))},[g.items,g.expandedFolders,g.activeProfile]),(0,a.useEffect)(()=>{const e=()=>{N(e=>({...e,isVisible:!1}))};if(S.isVisible)return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[S.isVisible]);const M=(0,a.useCallback)(()=>{if(console.log("SaveSystem: Creating new item:",{newItemName:u,newItemType:x,selectedItem:g.selectedItem}),!u.trim())return;const e="profile"===x||"highlight"===x||"comparison"===x||"filter-preset"===x||"view-preset"===x||"log-session"===x||"monitoring-session"===x,n=x.includes("-")&&"filter-preset"!==x&&"view-preset"!==x&&"log-session"!==x&&"monitoring-session"!==x;if(e){let e;if("profile"===x)e=void 0;else{const n=$(g.selectedItem);if(!n)return void console.warn("❌ Please select a profile or a subfolder within a profile to create this item.");e=n.id}const n={id:`folder-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:u.trim(),type:x,parentId:e,metadata:{description:"",tags:[],createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()}};console.log("SaveSystem: Creating new folder:",n),m(e=>{let t=[...e.items,n];if("profile"===x){const e=E(n.id,n.name);t=[...t,...e],console.log("SaveSystem: Created default folders for new profile:",e)}const a={...e,items:t};return"profile"===x&&(a.expandedFolders=new Set(Array.from(e.expandedFolders).concat(n.id))),console.log("SaveSystem: New state after creating folder:",a),a})}else if(n){if(!g.selectedItem||"highlight"!==g.selectedItem.type&&"comparison"!==g.selectedItem.type&&"filter-preset"!==g.selectedItem.type&&"view-preset"!==g.selectedItem.type&&"log-session"!==g.selectedItem.type&&"monitoring-session"!==g.selectedItem.type)return void console.warn("❌ Please select a category (highlight, comparison, etc.) first to create a save node.");const e={id:`node-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:u.trim(),type:x,parentId:g.selectedItem.id,metadata:{description:"",tags:[],createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),data:l,target:u.trim()}};console.log("SaveSystem: Creating new node:",e),m(n=>{const t={...n,items:[...n.items,e]};return console.log("SaveSystem: New state after creating node:",t),t})}h(""),f("profile"),v(!1)},[u,x,g.selectedItem,l,E,$]),T=(0,a.useCallback)(e=>{m(n=>{const t=new Set(n.expandedFolders);return t.has(e)?t.delete(e):t.add(e),{...n,expandedFolders:t}})},[]),R=(0,a.useCallback)(e=>{const n=$(e);m(t=>({...t,selectedItem:e,activeProfile:n})),"profile"===e.type?f("highlight"):"highlight"===e.type?f("highlight-script"):"comparison"===e.type&&f("comparison")},[$]),U=(0,a.useCallback)(e=>{m(n=>({...n,editingItem:e})),j(!0)},[]),V=(0,a.useCallback)(e=>{const n=g.items.find(n=>n.id===e),t="profile"===n?.type||"profile-settings"===n?.type,a=n?.type?.startsWith("highlight-");if(t&&!window.confirm("Are you sure you want to delete this profile?"))return;let i=[e];if("profile"===n?.type){const n=g.items.find(n=>"profile-settings"===n.type&&n.parentId===e);n&&i.push(n.id)}if(m(e=>({...e,items:e.items.filter(e=>!i.includes(e.id)),selectedItem:e.selectedItem&&!i.includes(e.selectedItem.id)?e.selectedItem:null,editingItem:e.editingItem&&!i.includes(e.editingItem.id)?e.editingItem:null,activeProfile:e.activeProfile&&!i.includes(e.activeProfile.id)?e.activeProfile:null})),i.forEach(e=>o(e)),a){const n=new CustomEvent("highlight-updated",{detail:{highlightId:e,deleted:!0}});window.dispatchEvent(n)}},[o,g.items]),H=(0,a.useCallback)(e=>{const n={...e,id:`${e.type}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:`${e.name} (Copy)`,metadata:{...e.metadata,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()}};m(e=>({...e,items:[...e.items,n]}))},[]),B=(0,a.useCallback)(e=>{C(e),D(e.name)},[]),J=(0,a.useCallback)(()=>{I&&L.trim()&&m(e=>({...e,items:e.items.map(e=>e.id===I.id?{...e,name:L.trim()}:e),selectedItem:e.selectedItem?.id===I.id?{...e.selectedItem,name:L.trim()}:e.selectedItem})),C(null),D("")},[I,L]),Y=(0,a.useCallback)(()=>{C(null),D("")},[]),W=(0,a.useCallback)((e,n)=>{const t=`save-item-${n.id}`,a=Date.now(),i=k.current.get(t);if(console.log("SaveSystem: Right-click detected on item:",n.name,"elementId:",t,"target:",e.target,"currentTarget:",e.currentTarget),i&&a-i.lastClick<300)return i.timeout&&clearTimeout(i.timeout),k.current.delete(t),void console.log("SaveSystem: Double right-click detected - allowing native context menu");i?.timeout&&clearTimeout(i.timeout);const o=setTimeout(()=>{k.current.delete(t)},300);k.current.set(t,{lastClick:a,timeout:o}),e.preventDefault(),e.stopPropagation();const s=$(n);m(e=>({...e,selectedItem:n,activeProfile:s})),N({isVisible:!0,x:e.clientX,y:e.clientY,targetItem:n,targetElement:e.currentTarget})},[R]),_=(0,a.useCallback)(e=>{const n="tree-container",t=Date.now(),a=k.current.get(n);if(console.log("SaveSystem: Right-click detected on tree container, target:",e.target,"currentTarget:",e.currentTarget),a&&t-a.lastClick<300)return a.timeout&&clearTimeout(a.timeout),k.current.delete(n),void console.log("SaveSystem: Double right-click detected - allowing native context menu");a?.timeout&&clearTimeout(a.timeout);const i=setTimeout(()=>{k.current.delete(n)},300);k.current.set(n,{lastClick:t,timeout:i}),e.preventDefault(),e.stopPropagation(),e.target===e.currentTarget&&N({isVisible:!0,x:e.clientX,y:e.clientY,targetItem:null,targetElement:e.currentTarget})},[]),q=(0,a.useCallback)(e=>{switch(e){case"profile":case"filter-preset":case"view-preset":case"log-session":case"monitoring-session":return["last-ui"];case"highlight":return["highlight-script","highlight-module","highlight-method","highlight-value"];case"comparison":return["comparison"];default:return[]}},[]),X=(0,a.useCallback)((e,n)=>{const t=`New ${n.replace("-"," ").replace(/\b\w/g,e=>e.toUpperCase())}`,a={id:`node-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:t,type:n,parentId:e.id,metadata:{description:`Auto-generated ${n} node`,tags:["auto-generated",n],createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),data:{},highlightData:n.startsWith("highlight-")?{color:"#ff0000",pattern:"default"}:void 0,comparisonData:"comparison"===n?{operation:"equals",leftOperand:"",rightOperand:"",isValid:!1}:void 0}};m(e=>({...e,items:[...e.items,a],selectedItem:a}));const i={items:[...g.items,a],expandedFolders:Array.from(g.expandedFolders)};localStorage.setItem("allog-save-system",JSON.stringify(i))},[g.items,g.expandedFolders]),G=(0,a.useCallback)(e=>{let n=g.items.find(e=>"highlight"===e.type&&"default-profile"===e.parentId);n||(n={id:"default-highlight",name:"Highlights",type:"highlight",parentId:"default-profile",metadata:{description:"Default highlight category",tags:["default","highlight"],createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()}},m(e=>({...e,items:[...e.items,n]})));let t="highlight-value";e.scriptId&&e.moduleId?t="highlight-script":e.moduleId&&(t="highlight-module");let a=e.name;if(e.data)if(e.data.type&&e.data.name&&e.moduleId&&e.scriptId){const n=e.moduleId.split("/"),t=n[n.length-1],i=e.scriptId.split("/");a=`.[${t}/${i[i.length-1]}]-${e.data.name}`}else if(e.data.message&&e.scriptId){const n=e.scriptId.split("/"),t=n[n.length-1],i=e.data.message;a=`.[${t}]-${i.length>30?i.substring(0,30).replace(/\s+\w*$/,"")+"...":i}`}const i={id:`highlight-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:a,type:t,parentId:n.id,metadata:{description:e.description,tags:e.tags,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),data:e.data,target:e.data?.name||e.data?.message||e.name,highlightData:{scriptId:e.scriptId,moduleId:e.moduleId,color:"#ffff00",pattern:"default"}}};m(e=>({...e,items:[...e.items,i],selectedItem:i}));const o={items:[...g.items,i],expandedFolders:Array.from(g.expandedFolders)};localStorage.setItem("allog-save-system",JSON.stringify(o)),d&&d(e);const s=new CustomEvent("highlight-updated",{detail:{highlightId:i.id,created:!0}});return window.dispatchEvent(s),i},[g.items,g.expandedFolders,d]),Z=(0,a.useCallback)(e=>{const n=g.items.find(n=>{if(n.type?.startsWith("highlight-")&&n.metadata?.highlightData){const t=n.metadata.highlightData;if(t.scriptId&&e.scriptId&&!e.scriptId.includes(t.scriptId))return!1;if(t.moduleId&&e.moduleId&&!e.moduleId.includes(t.moduleId))return!1;if(t.valueId&&e.name&&!e.name.includes(t.valueId))return!1;if("log"===e.elementType&&n.metadata?.target&&e.logMessage)return e.logMessage.toLowerCase().includes(n.metadata.target.toLowerCase());if(e.name&&n.metadata?.target)return e.name.toLowerCase().includes(n.metadata.target.toLowerCase());if(n.metadata?.target){if("log"===e.elementType&&e.logMessage)return e.logMessage.toLowerCase().includes(n.metadata.target.toLowerCase());if(e.name)return e.name.toLowerCase().includes(n.metadata.target.toLowerCase())}return!1}return!1});if(n){m(e=>({...e,items:e.items.filter(e=>e.id!==n.id)}));const e={items:g.items.filter(e=>e.id!==n.id),expandedFolders:Array.from(g.expandedFolders)};localStorage.setItem("allog-save-system",JSON.stringify(e));const t=new CustomEvent("highlight-updated",{detail:{highlightId:n.id,removed:!0}});return window.dispatchEvent(t),!0}return!1},[g.items,g.expandedFolders]);(0,a.useImperativeHandle)(p,()=>({createHighlightFromData:G,removeHighlightForElement:Z}),[G,Z]);const K=(0,a.useCallback)((e,n)=>({id:`profile-settings-${e}`,name:"Profile Settings",type:"profile-settings",parentId:e,metadata:{description:`Settings for ${n}`,tags:["profile","settings","system"],createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),data:{theme:"dark",autoSave:!0,notifications:!0,defaultView:"logs",instrumentation:{enabled:!0,defaultLevel:"detailed",components:{},methods:{logMethodCalls:!0,logMethodParameters:!0,logMethodReturns:!0,logMethodTiming:!0,logMethodErrors:!0},state:{logVariableChanges:!0,logConfigurationChanges:!0,logBufferOperations:!0,logModuleStateChanges:!0,logServerCommunication:!0},dataFlow:{logDataTransformation:!0,logDataRouting:!0,logDataFiltering:!0,logDataSerialization:!0},performance:{logExecutionTime:!0,logMemoryUsage:!0,logBufferStats:!0,logServerLatency:!0}}}}}),[]),Q=(0,a.useCallback)(()=>{const e=`New Profile ${g.items.filter(e=>"profile"===e.type).length+1}`,n={id:`profile-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:e,type:"profile",metadata:{description:"New profile",tags:["new","profile"],createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()}},t=K(n.id,n.name);console.log("SaveSystem: Creating new profile:",n),m(e=>{let a=[...e.items,n,t];const i=E(n.id,n.name);a=[...a,...i],console.log("SaveSystem: Created default folders for new profile:",i);const o={...e,items:a,selectedItem:n,expandedFolders:new Set(Array.from(e.expandedFolders).concat(n.id))};return console.log("SaveSystem: New state after creating profile:",o),o});const a={items:[...g.items,n,t,...E(n.id,n.name)],expandedFolders:Array.from(g.expandedFolders).concat(n.id)};localStorage.setItem("allog-save-system",JSON.stringify(a))},[g.items,g.expandedFolders,E,K]),ee=(0,a.useCallback)((e,n)=>{switch(e){case"create-profile":Q();break;case"open":S.targetItem&&i(S.targetItem);break;case"edit":S.targetItem&&U(S.targetItem);break;case"rename":S.targetItem&&B(S.targetItem);break;case"duplicate":S.targetItem&&H(S.targetItem);break;case"delete":S.targetItem&&V(S.targetItem.id);break;case"properties":if(S.targetItem&&"profile"===S.targetItem.type){const e=g.items.find(e=>"profile-settings"===e.type&&e.parentId===S.targetItem.id);if(e)U(e);else{const e=K(S.targetItem.id,S.targetItem.name);m(n=>({...n,items:[...n.items,e]})),U(e)}}break;case"create-node":n&&S.targetItem&&X(S.targetItem,n)}N(e=>({...e,isVisible:!1}))},[S.targetItem,S.targetElement,Q,i,U,B,H,V,X]),ne=g.items,te=(e,n)=>e.filter(e=>e.parentId===n&&"profile-settings"!==e.type).map(n=>{if("profile"===n.type||"highlight"===n.type||"comparison"===n.type||"filter-preset"===n.type||"view-preset"===n.type||"log-session"===n.type||"monitoring-session"===n.type){const t=te(e,n.id);return{...n,children:t}}return n}),ae=te(ne),ie=e=>{if("profile"===e.type||"highlight"===e.type||"comparison"===e.type||"filter-preset"===e.type||"view-preset"===e.type||"log-session"===e.type||"monitoring-session"===e.type)switch(e.type){case"profile":return"👤";case"highlight":return"🔍";case"comparison":return"⚖️";case"filter-preset":return"🔧";case"view-preset":return"👁️";case"log-session":return"📋";case"monitoring-session":return"📊";default:return"📁"}else switch(e.type){case"profile-settings":return"⚙️";case"last-ui":return"🖥️";case"highlight-script":return"📜";case"highlight-module":return"📦";case"highlight-method":return"🔧";case"highlight-value":return"💎";case"comparison":return"⚖️";default:return"📄"}},oe=e=>"profile"===e.type||"highlight"===e.type||"comparison"===e.type||"filter-preset"===e.type||"view-preset"===e.type||"log-session"===e.type||"monitoring-session"===e.type?`\\${e.name}`:`.${e.name}`,se=(e,n=0)=>{const t=g.expandedFolders.has(e.id),a=g.selectedItem?.id===e.id,o="profile"===e.type||"highlight"===e.type||"comparison"===e.type||"filter-preset"===e.type||"view-preset"===e.type||"log-session"===e.type||"monitoring-session"===e.type,r=o&&"children"in e&&e.children&&e.children.length>0,l=I?.id===e.id;return(0,y.jsxs)("div",{className:"tree-item-container",onContextMenu:n=>W(n,e),children:[(0,y.jsxs)("div",{className:"tree-item "+(a?"selected":""),style:{paddingLeft:20*n+10+"px"},onClick:()=>R(e),onContextMenu:n=>W(n,e),children:[(0,y.jsxs)("div",{className:"tree-item-content",onContextMenu:n=>W(n,e),children:[o&&(0,y.jsx)("span",{className:"expand-icon",onClick:n=>{n.stopPropagation(),T(e.id)},onContextMenu:n=>W(n,e),children:t?"▼":"▶"}),(0,y.jsx)("span",{className:"item-icon",onContextMenu:n=>W(n,e),children:ie(e)}),l?(0,y.jsx)("input",{type:"text",value:L,onChange:e=>D(e.target.value),onBlur:J,onKeyDown:e=>{"Enter"===e.key?J():"Escape"===e.key&&Y()},className:"rename-input",autoFocus:!0}):(0,y.jsx)("span",{className:"item-name",onContextMenu:n=>W(n,e),children:oe(e)})]}),a&&!l&&(0,y.jsxs)("div",{className:"item-actions",onContextMenu:n=>W(n,e),children:[e.parentId&&("highlight"===e.type||"comparison"===e.type||"filter-preset"===e.type||"view-preset"===e.type||"log-session"===e.type||"monitoring-session"===e.type)||"profile-settings"===e.type?null:(0,y.jsx)("button",{className:"action-btn",onClick:n=>{n.stopPropagation(),U(e)},onContextMenu:n=>W(n,e),title:"Edit",children:"✏️"}),(0,y.jsx)("button",{className:"action-btn",onClick:n=>{n.stopPropagation(),i(e)},onContextMenu:n=>W(n,e),title:"Load",children:"📂"}),(0,y.jsx)("button",{className:"action-btn",onClick:n=>{n.stopPropagation(),s(e)},onContextMenu:n=>W(n,e),title:"Export",children:"📤"}),e.parentId&&("highlight"===e.type||"comparison"===e.type||"filter-preset"===e.type||"view-preset"===e.type||"log-session"===e.type||"monitoring-session"===e.type)||"profile-settings"===e.type?null:(0,y.jsx)("button",{className:"action-btn",onClick:n=>{n.stopPropagation(),V(e.id)},onContextMenu:n=>W(n,e),title:"Delete",children:"🗑️"})]})]}),o&&t&&(0,y.jsx)("div",{className:"tree-children",children:r?e.children.map(e=>se(e,n+1)):(0,y.jsx)("div",{className:"empty-folder",style:{paddingLeft:20*(n+1)+10+"px",color:"#666",fontStyle:"italic"},children:"Empty folder"})})]},e.id)};return(0,y.jsxs)("div",{className:"save-system "+(e?"open":""),children:[e&&(0,y.jsxs)("div",{className:"save-system-content",children:[(0,y.jsxs)("div",{className:"new-item-section",children:[(0,y.jsx)("button",{className:"new-item-btn",onClick:()=>v(!b),children:b?"Cancel":"+ New Save"}),(0,y.jsx)("button",{className:"import-btn",onClick:()=>{const e=document.createElement("input");e.type="file",e.accept=".json",e.style.display="none",e.onchange=n=>{const t=n.target.files?.[0];t&&r(t),document.body.removeChild(e)},document.body.appendChild(e),e.click()},title:"Import JSON file",children:"📥 Import"}),b&&(0,y.jsxs)("div",{className:"new-item-form",children:[(0,y.jsx)("input",{type:"text",placeholder:"Save name...",value:u,onChange:e=>h(e.target.value),className:"new-item-input"}),(0,y.jsx)("select",{value:x,onChange:e=>f(e.target.value),className:"new-item-type-select",children:(0,y.jsxs)("optgroup",{label:"Nodes",children:["profile"===g.selectedItem?.type&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("option",{value:"profile-settings",children:"Profile Settings"}),(0,y.jsx)("option",{value:"last-ui",children:"Last UI"})]}),"highlight"===g.selectedItem?.type&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("option",{value:"highlight-script",children:"Highlight Script"}),(0,y.jsx)("option",{value:"highlight-module",children:"Highlight Module"}),(0,y.jsx)("option",{value:"highlight-method",children:"Highlight Method"}),(0,y.jsx)("option",{value:"highlight-value",children:"Highlight Value"})]}),"comparison"===g.selectedItem?.type&&(0,y.jsx)("option",{value:"comparison",children:"Comparison"}),("filter-preset"===g.selectedItem?.type||"view-preset"===g.selectedItem?.type||"log-session"===g.selectedItem?.type||"monitoring-session"===g.selectedItem?.type)&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("option",{value:"profile-settings",children:"Profile Settings"}),(0,y.jsx)("option",{value:"last-ui",children:"Last UI"})]})]})}),(0,y.jsx)("button",{className:"create-btn",onClick:M,disabled:!u.trim(),children:"Create"})]})]}),(0,y.jsx)("div",{className:"tree-container",onContextMenu:_,children:0===ae.length?(0,y.jsxs)("div",{className:"empty-state",children:[(0,y.jsx)("p",{children:"No saves found"}),(0,y.jsx)("p",{children:"Create your first save to get started"})]}):ae.map(e=>se(e))}),g.selectedItem&&(0,y.jsxs)("div",{className:"selected-item-details",children:[(0,y.jsx)("h4",{children:oe(g.selectedItem)}),(0,y.jsx)("p",{className:"item-type",children:g.selectedItem.type}),g.selectedItem.metadata?.description&&(0,y.jsx)("p",{className:"item-description",children:g.selectedItem.metadata.description}),(0,y.jsxs)("div",{className:"item-metadata",children:[(0,y.jsxs)("span",{children:["Created: ",new Date(g.selectedItem.metadata?.createdAt||"").toLocaleDateString()]}),(0,y.jsxs)("span",{children:["Updated: ",new Date(g.selectedItem.metadata?.updatedAt||"").toLocaleDateString()]})]}),g.activeProfile&&g.activeProfile.id!==g.selectedItem.id&&(0,y.jsxs)("div",{className:"active-profile-indicator",children:[(0,y.jsx)("span",{className:"active-profile-label",children:"Active Profile:"}),(0,y.jsx)("span",{className:"active-profile-name",children:oe(g.activeProfile)})]})]})]}),(0,y.jsx)(P,{item:g.editingItem,isOpen:w,onClose:()=>{j(!1),m(e=>({...e,editingItem:null}))},onSave:e=>{m(n=>({...n,items:n.items.map(n=>n.id===e.id?e:n),editingItem:null})),j(!1)},items:g.items}),S.isVisible&&(0,y.jsx)("div",{className:"context-menu",style:{left:S.x,top:S.y},onClick:e=>e.stopPropagation(),children:S.targetItem?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:"context-menu-item",onClick:()=>ee("open"),children:[(0,y.jsx)("span",{className:"context-menu-icon",children:"📂"}),"Open"]}),S.targetItem.parentId&&("highlight"===S.targetItem.type||"comparison"===S.targetItem.type||"filter-preset"===S.targetItem.type||"view-preset"===S.targetItem.type||"log-session"===S.targetItem.type||"monitoring-session"===S.targetItem.type)||"profile-settings"===S.targetItem.type?null:(0,y.jsxs)("div",{className:"context-menu-item",onClick:()=>ee("edit"),children:[(0,y.jsx)("span",{className:"context-menu-icon",children:"✏️"}),"Edit"]}),S.targetItem.parentId&&("highlight"===S.targetItem.type||"comparison"===S.targetItem.type||"filter-preset"===S.targetItem.type||"view-preset"===S.targetItem.type||"log-session"===S.targetItem.type||"monitoring-session"===S.targetItem.type)||"profile-settings"===S.targetItem.type?null:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"context-menu-separator"}),(0,y.jsxs)("div",{className:"context-menu-item",onClick:()=>ee("rename"),children:[(0,y.jsx)("span",{className:"context-menu-icon",children:"✏️"}),"Rename"]})]}),S.targetItem.parentId&&("highlight"===S.targetItem.type||"comparison"===S.targetItem.type||"filter-preset"===S.targetItem.type||"view-preset"===S.targetItem.type||"log-session"===S.targetItem.type||"monitoring-session"===S.targetItem.type)||"profile-settings"===S.targetItem.type?null:(0,y.jsxs)("div",{className:"context-menu-item",onClick:()=>ee("duplicate"),children:[(0,y.jsx)("span",{className:"context-menu-icon",children:"📋"}),"Duplicate"]}),"profile"!==S.targetItem.type&&"profile-settings"!==S.targetItem.type&&"last-ui"!==S.targetItem.type&&"highlight-script"!==S.targetItem.type&&"highlight-module"!==S.targetItem.type&&"highlight-method"!==S.targetItem.type&&"highlight-value"!==S.targetItem.type&&"comparison"!==S.targetItem.type&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"context-menu-separator"}),q(S.targetItem.type).map(e=>(0,y.jsxs)("div",{className:"context-menu-item",onClick:()=>ee("create-node",e),children:[(0,y.jsx)("span",{className:"context-menu-icon",children:"profile-settings"===e?"⚙️":"last-ui"===e?"🖥️":"highlight-script"===e?"📜":"highlight-module"===e?"📦":"highlight-method"===e?"🔧":"highlight-value"===e?"💎":"comparison"===e?"⚖️":"📄"}),"Create ",e.replace("-"," ").replace(/\b\w/g,e=>e.toUpperCase())]},e))]}),(0,y.jsx)("div",{className:"context-menu-separator"}),(0,y.jsxs)("div",{className:"context-menu-item",onClick:()=>ee("properties"),children:[(0,y.jsx)("span",{className:"context-menu-icon",children:"ℹ️"}),"Properties"]}),S.targetItem.parentId&&("highlight"===S.targetItem.type||"comparison"===S.targetItem.type||"filter-preset"===S.targetItem.type||"view-preset"===S.targetItem.type||"log-session"===S.targetItem.type||"monitoring-session"===S.targetItem.type)||"profile-settings"===S.targetItem.type?null:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"context-menu-separator"}),(0,y.jsxs)("div",{className:"context-menu-item context-menu-item-danger",onClick:()=>ee("delete"),children:[(0,y.jsx)("span",{className:"context-menu-icon",children:"🗑️"}),"Delete"]})]})]}):(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)("div",{className:"context-menu-item",onClick:()=>ee("create-profile"),children:[(0,y.jsx)("span",{className:"context-menu-icon",children:"👤"}),"Create New Profile"]})})})]})}),P=({item:e,isOpen:n,onClose:t,onSave:i,items:o})=>{const[s,r]=(0,a.useState)(e),[l,c]=(0,a.useState)(e?.metadata?.description||""),[d,p]=(0,a.useState)(e?.metadata?.tags?.join(", ")||""),[g,m]=(0,a.useState)(!1),[u,h]=(0,a.useState)(!1),[x,f]=(0,a.useState)(e?.name||""),b=(0,a.useRef)(null);(0,a.useEffect)(()=>{e&&(r(e),c(e.metadata?.description||""),p(e.metadata?.tags?.join(", ")||""),f(e.name))},[e]);const v=(0,a.useCallback)(e=>{if(!e)return null;if("profile"===e.type)return e;if(e.parentId){const n=o.find(n=>n.id===e.parentId);if(n)return"profile"===n.type?n:v(n)}return null},[o]),w=v(e),j=(0,a.useRef)(null);if((0,a.useEffect)(()=>{u&&b.current&&(b.current.focus(),b.current.select())},[u]),(0,a.useEffect)(()=>{e&&f(e.name)},[e]),(0,a.useEffect)(()=>{if(!n||!j.current||!e)return;const t=()=>{if(!j.current)return;const e=document.querySelector(".save-system"),n=document.querySelector(".monitoring-detail"),t=window.innerWidth<=768,a=e?.classList.contains("open")?t?280:300:0;let i=0;if(n){const e=window.getComputedStyle(n),a=n.getBoundingClientRect();"none"!==e.display&&"hidden"!==e.visibility&&"0"!==e.opacity&&a.width>0&&a.height>0&&(i=a.width>0?a.width:t?320:400)}const o=a,s=`calc(100vw - ${a}px - ${i}px)`;j.current.style.setProperty("--save-editor-left",`${o}px`),j.current.style.setProperty("--save-editor-width",s),console.log("SaveEditor positioning:",{saveSystemWidth:a,monitoringDetailWidth:i,left:o,width:s,isMobile:t,monitoringDetailExists:!!n,monitoringDetailStyle:n?window.getComputedStyle(n).display:"N/A"})};t();const a=new MutationObserver(t);a.observe(document.body,{attributes:!0,attributeFilter:["class","style"],subtree:!0});const i=e=>{if(!g||!j.current)return;j.current.getBoundingClientRect();const n=window.innerHeight-e.clientY,t=.8*window.innerHeight;n>=300&&n<=t&&(j.current.style.height=`${n}px`)},o=()=>{m(!1)};return g&&(document.addEventListener("mousemove",i),document.addEventListener("mouseup",o)),window.addEventListener("resize",t),()=>{a.disconnect(),document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",o),window.removeEventListener("resize",t)}},[n,g,e]),!e)return null;const k=()=>{if(x.trim()&&x!==e.name&&s){const e={...s,name:x.trim(),metadata:{...s.metadata,createdAt:s.metadata?.createdAt||(new Date).toISOString(),updatedAt:(new Date).toISOString()}};r(e),i(e)}h(!1)};return(0,y.jsxs)("div",{className:"save-editor "+(n?"open":""),ref:j,children:[(0,y.jsxs)("div",{className:"save-editor-header",onMouseDown:e=>{e.target!==e.currentTarget&&e.target!==e.currentTarget.querySelector("h3")&&e.target!==e.currentTarget.querySelector("input")||m(!0)},children:[(0,y.jsxs)("h3",{children:["Edit"," ",u?(0,y.jsx)("input",{ref:b,type:"text",value:x,onChange:e=>{f(e.target.value)},onKeyDown:n=>{"Enter"===n.key?k():"Escape"===n.key&&(h(!1),f(e.name))},onBlur:()=>{k()},className:"title-edit-input",autoFocus:!0}):(0,y.jsx)("span",{className:"editable-title",onClick:()=>{h(!0),f(e.name)},title:"Click to edit title",children:e.name}),w&&w.id!==e.id&&(0,y.jsxs)("span",{className:"parent-profile-name",children:[" ","• ",w.name]})]}),(0,y.jsx)("button",{className:"close-btn",onClick:t,children:"✕"})]}),(0,y.jsxs)("div",{className:"save-editor-content",children:[(0,y.jsxs)("div",{className:"editor-section",children:[(0,y.jsx)("label",{children:"Description:"}),(0,y.jsx)("textarea",{value:l,onChange:e=>c(e.target.value),placeholder:"Enter description...",rows:3})]}),(0,y.jsxs)("div",{className:"editor-section",children:[(0,y.jsx)("label",{children:"Tags:"}),(0,y.jsx)("input",{type:"text",value:d,onChange:e=>p(e.target.value),placeholder:"Enter tags separated by commas..."})]}),!("children"in e)&&"comparison"===e.type&&(0,y.jsx)(R,{item:e,onUpdate:e=>r(e)}),!("children"in e)&&e.type.startsWith("highlight-")&&(0,y.jsx)(U,{item:e,onUpdate:e=>r(e)}),!("children"in e)&&"profile-settings"===e.type&&(0,y.jsx)(V,{item:e,onUpdate:e=>r(e)}),(0,y.jsxs)("div",{className:"editor-actions",children:[(0,y.jsx)("button",{className:"save-btn",onClick:()=>{if(!s)return;const e={...s,metadata:{...s.metadata,description:l,tags:d.split(",").map(e=>e.trim()).filter(e=>e),createdAt:s.metadata?.createdAt||(new Date).toISOString(),updatedAt:(new Date).toISOString()}};if(i(e),e.type?.startsWith("highlight-")){const n=new CustomEvent("highlight-updated",{detail:{highlightId:e.id,updated:!0}});window.dispatchEvent(n)}},children:"Save"}),(0,y.jsx)("button",{className:"cancel-btn",onClick:t,children:"Cancel"})]})]})]})},R=({item:e,onUpdate:n})=>{const[t,i]=(0,a.useState)(e.metadata?.comparisonData?.operation||""),[o,s]=(0,a.useState)(JSON.stringify(e.metadata?.comparisonData?.leftOperand||"")),[r,l]=(0,a.useState)(JSON.stringify(e.metadata?.comparisonData?.rightOperand||"")),c=(0,a.useCallback)(()=>{try{const a={...e,metadata:{...e.metadata,createdAt:e.metadata?.createdAt||(new Date).toISOString(),updatedAt:(new Date).toISOString(),comparisonData:{operation:t,leftOperand:JSON.parse(o),rightOperand:JSON.parse(r),isValid:!0,result:null}}};n(a)}catch(e){console.error("Invalid JSON in comparison operands:",e)}},[e,t,o,r,n]);return(0,a.useEffect)(()=>{c()},[t,o,r,c]),(0,y.jsxs)("div",{className:"editor-section",children:[(0,y.jsx)("h4",{children:"Comparison Settings"}),(0,y.jsxs)("div",{className:"comparison-inputs",children:[(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{children:"Operation:"}),(0,y.jsxs)("select",{value:t,onChange:e=>i(e.target.value),children:[(0,y.jsx)("option",{value:"",children:"Select operation..."}),(0,y.jsx)("option",{value:"equals",children:"Equals"}),(0,y.jsx)("option",{value:"not-equals",children:"Not Equals"}),(0,y.jsx)("option",{value:"greater-than",children:"Greater Than"}),(0,y.jsx)("option",{value:"less-than",children:"Less Than"}),(0,y.jsx)("option",{value:"contains",children:"Contains"}),(0,y.jsx)("option",{value:"matches",children:"Matches Pattern"})]})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{children:"Left Operand:"}),(0,y.jsx)("textarea",{value:o,onChange:e=>s(e.target.value),placeholder:"Enter left operand...",rows:2})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{children:"Right Operand:"}),(0,y.jsx)("textarea",{value:r,onChange:e=>l(e.target.value),placeholder:"Enter right operand...",rows:2})]})]})]})},U=({item:e,onUpdate:n})=>{const[t,i]=(0,a.useState)(e.metadata?.highlightData?.color||"#ffff00"),[o,s]=(0,a.useState)(e.metadata?.highlightData?.pattern||""),r=(0,a.useCallback)(()=>{const a={...e,metadata:{...e.metadata,createdAt:e.metadata?.createdAt||(new Date).toISOString(),updatedAt:(new Date).toISOString(),highlightData:{...e.metadata?.highlightData,color:t,pattern:o}}};n(a)},[e,t,o,n]);return(0,a.useEffect)(()=>{r()},[t,o,r]),(0,a.useEffect)(()=>{const n=new CustomEvent("highlight-updated",{detail:{highlightId:e.id,color:t,pattern:o}});window.dispatchEvent(n)},[t,o,e.id]),(0,y.jsxs)("div",{className:"editor-section",children:[(0,y.jsx)("h4",{children:"Highlight Settings"}),(0,y.jsxs)("div",{className:"highlight-inputs",children:[(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{children:"Color:"}),(0,y.jsx)("input",{type:"color",value:t,onChange:e=>i(e.target.value)})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{children:"Pattern:"}),(0,y.jsx)("input",{type:"text",value:o,onChange:e=>s(e.target.value),placeholder:"Enter highlight pattern..."})]})]})]})},V=({item:e,onUpdate:n})=>{const[t,i]=(0,a.useState)(e.metadata?.data?.theme||"dark"),[o,s]=(0,a.useState)(e.metadata?.data?.autoSave??!0),[r,l]=(0,a.useState)(e.metadata?.data?.notifications??!0),[c,d]=(0,a.useState)(e.metadata?.data?.defaultView||"logs"),[p,g]=(0,a.useState)(e.metadata?.data?.instrumentation?.enabled??!0),m=(0,a.useCallback)(()=>{const a={...e,metadata:{...e.metadata,createdAt:e.metadata?.createdAt||(new Date).toISOString(),updatedAt:(new Date).toISOString(),data:{theme:t,autoSave:o,notifications:r,defaultView:c,instrumentation:{...e.metadata?.data?.instrumentation,enabled:p}}}};n(a)},[e,t,o,r,c,p,n]);return(0,a.useEffect)(()=>{m()},[t,o,r,c,p,m]),(0,y.jsxs)("div",{className:"editor-section",children:[(0,y.jsx)("h4",{children:"Profile Settings"}),(0,y.jsxs)("div",{className:"profile-settings-inputs",children:[(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{children:"Theme:"}),(0,y.jsxs)("select",{value:t,onChange:e=>i(e.target.value),children:[(0,y.jsx)("option",{value:"dark",children:"Dark"}),(0,y.jsx)("option",{value:"light",children:"Light"}),(0,y.jsx)("option",{value:"auto",children:"Auto"})]})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{children:"Auto Save:"}),(0,y.jsx)("input",{type:"checkbox",checked:o,onChange:e=>s(e.target.checked)})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{children:"Notifications:"}),(0,y.jsx)("input",{type:"checkbox",checked:r,onChange:e=>l(e.target.checked)})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{children:"Default View:"}),(0,y.jsxs)("select",{value:c,onChange:e=>d(e.target.value),children:[(0,y.jsx)("option",{value:"logs",children:"Logs"}),(0,y.jsx)("option",{value:"monitoring",children:"Monitoring"})]})]})]})]})},H=T,B=({isOpen:e,imageUrl:n,overlay:t,json:a,onClose:i})=>e?(0,y.jsxs)("div",{className:"screenshot-modal-backdrop",onClick:e=>{e.target===e.currentTarget&&i()},children:[(0,y.jsxs)("div",{className:"screenshot-modal",children:[(0,y.jsxs)("div",{className:"screenshot-modal-header",children:[(0,y.jsx)("h3",{children:"Screenshot View"}),(0,y.jsx)("button",{className:"close-btn",onClick:i,children:"×"})]}),(0,y.jsxs)("div",{className:"screenshot-modal-content",children:[n&&(0,y.jsxs)("div",{className:"screenshot-container",children:[(0,y.jsx)("img",{src:n,alt:"Screenshot",className:"screenshot-image",style:{maxWidth:"100%",maxHeight:"70vh",objectFit:"contain"}}),t&&(0,y.jsx)("div",{className:"screenshot-overlay",children:(0,y.jsx)("pre",{children:JSON.stringify(t,null,2)})})]}),a&&(0,y.jsxs)("div",{className:"screenshot-json",children:[(0,y.jsx)("h4",{children:"Associated Data:"}),(0,y.jsx)("pre",{children:JSON.stringify(a,null,2)})]})]})]}),(0,y.jsx)("style",{jsx:!0,children:"\n        .screenshot-modal-backdrop {\n          position: fixed;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background-color: rgba(0, 0, 0, 0.8);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          z-index: 1000;\n        }\n        \n        .screenshot-modal {\n          background: white;\n          border-radius: 8px;\n          max-width: 90vw;\n          max-height: 90vh;\n          overflow: auto;\n          box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n        }\n        \n        .screenshot-modal-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 1rem;\n          border-bottom: 1px solid #e0e0e0;\n        }\n        \n        .screenshot-modal-header h3 {\n          margin: 0;\n          color: #333;\n        }\n        \n        .close-btn {\n          background: none;\n          border: none;\n          font-size: 1.5rem;\n          cursor: pointer;\n          color: #666;\n          padding: 0;\n          width: 2rem;\n          height: 2rem;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n        \n        .close-btn:hover {\n          color: #000;\n        }\n        \n        .screenshot-modal-content {\n          padding: 1rem;\n        }\n        \n        .screenshot-container {\n          text-align: center;\n          margin-bottom: 1rem;\n        }\n        \n        .screenshot-image {\n          border: 1px solid #ddd;\n          border-radius: 4px;\n        }\n        \n        .screenshot-overlay {\n          margin-top: 1rem;\n          background: #f5f5f5;\n          padding: 1rem;\n          border-radius: 4px;\n          text-align: left;\n        }\n        \n        .screenshot-json {\n          margin-top: 1rem;\n          background: #f8f9fa;\n          padding: 1rem;\n          border-radius: 4px;\n        }\n        \n        .screenshot-json h4 {\n          margin: 0 0 0.5rem 0;\n          color: #333;\n        }\n        \n        .screenshot-json pre {\n          margin: 0;\n          background: white;\n          padding: 0.5rem;\n          border: 1px solid #ddd;\n          border-radius: 4px;\n          overflow: auto;\n          max-height: 300px;\n        }\n      "})]}):null;var J=t(25),Y={};Y.styleTagTransform=x(),Y.setAttributes=g(),Y.insert=d().bind(null,"head"),Y.domAPI=l(),Y.insertStyleElement=u(),s()(J.A,Y),J.A&&J.A.locals&&J.A.locals;const W=({isOpen:e,onClose:n})=>{const[t,i]=(0,a.useState)([{id:"allog-server",name:"Allog Intermediary Server",type:"server",saveLogsDir:"./logs/allog-server",lastSeen:(new Date).toISOString(),status:"active",logCount:0,lastLogTime:(new Date).toISOString()},{id:"formwise-app",name:"FormWise Application",type:"client",saveLogsDir:"./logs/formwise",lastSeen:(new Date).toISOString(),status:"active",logCount:0,lastLogTime:(new Date).toISOString()},{id:"lib-interactive",name:"Interactive Library",type:"library",saveLogsDir:"./logs/lib/interactive",lastSeen:(new Date).toISOString(),status:"active",logCount:0,lastLogTime:(new Date).toISOString()},{id:"features-formhub",name:"FormHub Feature",type:"feature",saveLogsDir:"./logs/features/formhub",lastSeen:(new Date).toISOString(),status:"active",logCount:0,lastLogTime:(new Date).toISOString()},{id:"features-clausesight",name:"ClauseSight Feature",type:"feature",saveLogsDir:"./logs/features/clausesight",lastSeen:(new Date).toISOString(),status:"active",logCount:0,lastLogTime:(new Date).toISOString()}]),[o,s]=(0,a.useState)(null),[r,l]=(0,a.useState)(!0),[c,d]=(0,a.useState)(5e3),[p,g]=(0,a.useState)("recipients"),[m,u]=(0,a.useState)(null),[h,x]=(0,a.useState)(null),[f,b]=(0,a.useState)(null),[v,w]=(0,a.useState)(!1),[j,k]=(0,a.useState)(null);(0,a.useEffect)(()=>{if(e&&r){const e=setInterval(()=>{i(e=>e.map(e=>({...e,logCount:Math.floor(1e3*Math.random())+e.logCount,lastLogTime:(new Date).toISOString()})))},c);return()=>clearInterval(e)}},[e,r,c]),(0,a.useEffect)(()=>{e&&S()},[e,p]);const S=async()=>{try{const e=[];"database"!==p&&"maintenance"!==p||e.push(fetch("/api/database/config").then(e=>e.ok?e.json():null),fetch("/api/database/stats").then(e=>e.ok?e.json():null)),"archives"!==p&&"maintenance"!==p||e.push(fetch("/api/archives").then(e=>e.ok?e.json():null));const n=await Promise.all(e);"database"===p||"maintenance"===p?(u(n[0]),x(n[1]),"archives"!==p&&"maintenance"!==p||b(n[2])):"archives"===p&&b(n[0])}catch(e){console.error("Failed to load data management info:",e),N("Failed to load data management information","error")}},N=(e,n)=>{k({message:e,type:n}),setTimeout(()=>k(null),5e3)},I=async(e,n="json")=>{try{w(!0);let t="";switch(e){case"logs":t=`/api/export/logs?format=${n}`;break;case"monitoring":t=`/api/export/monitoring?format=${n}`;break;case"backup":t=`/api/export/backup?format=${n}`}const a=await fetch(t);if(a.ok){const t=await a.blob(),i=window.URL.createObjectURL(t),o=document.createElement("a");o.href=i,o.download=`allog-${e}-export-${(new Date).toISOString().slice(0,19).replace(/[-:]/g,"")}.${n}`,document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(i),N(`${e} data exported successfully`,"success")}else N(`Failed to export ${e} data`,"error")}catch(n){N(`Failed to export ${e} data`,"error")}finally{w(!1)}},C=e=>{switch(e){case"active":return"🟢";case"inactive":return"⚪";case"error":return"🔴";default:return"❓"}},L=e=>{switch(e){case"server":return"🖥️";case"client":return"📱";case"feature":return"✨";case"library":return"📚";default:return"❓"}};return e?(0,y.jsx)("div",{className:"settings-overlay",onClick:n,children:(0,y.jsxs)("div",{className:"settings-modal",onClick:e=>e.stopPropagation(),children:[(0,y.jsxs)("div",{className:"settings-header",children:[(0,y.jsx)("h2",{children:"⚙️ Allog Settings"}),(0,y.jsx)("button",{className:"close-btn",onClick:n,children:"×"})]}),j&&(0,y.jsxs)("div",{className:`settings-notification ${j.type}`,children:[(0,y.jsx)("span",{children:j.message}),(0,y.jsx)("button",{onClick:()=>k(null),children:"×"})]}),(0,y.jsxs)("div",{className:"settings-tabs",children:[(0,y.jsx)("button",{className:"tab-btn "+("recipients"===p?"active":""),onClick:()=>g("recipients"),children:"📊 Recipients"}),(0,y.jsx)("button",{className:"tab-btn "+("database"===p?"active":""),onClick:()=>g("database"),children:"🗄️ Database"}),(0,y.jsx)("button",{className:"tab-btn "+("archives"===p?"active":""),onClick:()=>g("archives"),children:"📁 Archives"}),(0,y.jsx)("button",{className:"tab-btn "+("maintenance"===p?"active":""),onClick:()=>g("maintenance"),children:"🔧 Maintenance"})]}),(0,y.jsxs)("div",{className:"settings-content",children:["recipients"===p&&(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)("div",{className:"settings-section",children:[(0,y.jsx)("h3",{children:"📊 Recipients & Save Logs Directories"}),(0,y.jsx)("p",{children:"View and manage save logs directories for each recipient sending data to Allog."}),(0,y.jsx)("div",{className:"recipients-grid",children:t.map(e=>(0,y.jsxs)("div",{className:"recipient-card "+(o?.id===e.id?"selected":""),onClick:()=>s(e),children:[(0,y.jsxs)("div",{className:"recipient-header",children:[(0,y.jsx)("span",{className:"type-icon",children:L(e.type)}),(0,y.jsx)("span",{className:"status-icon",children:C(e.status)}),(0,y.jsx)("h4",{children:e.name})]}),(0,y.jsxs)("div",{className:"recipient-details",children:[(0,y.jsxs)("div",{className:"detail-row",children:[(0,y.jsx)("span",{className:"label",children:"Type:"}),(0,y.jsx)("span",{className:"value",children:e.type})]}),(0,y.jsxs)("div",{className:"detail-row",children:[(0,y.jsx)("span",{className:"label",children:"Status:"}),(0,y.jsx)("span",{className:"value",children:e.status})]}),(0,y.jsxs)("div",{className:"detail-row",children:[(0,y.jsx)("span",{className:"label",children:"Log Count:"}),(0,y.jsx)("span",{className:"value",children:e.logCount.toLocaleString()})]}),(0,y.jsxs)("div",{className:"detail-row",children:[(0,y.jsx)("span",{className:"label",children:"Last Seen:"}),(0,y.jsx)("span",{className:"value",children:new Date(e.lastSeen||"").toLocaleString()})]}),e.lastLogTime&&(0,y.jsxs)("div",{className:"detail-row",children:[(0,y.jsx)("span",{className:"label",children:"Last Log:"}),(0,y.jsx)("span",{className:"value",children:new Date(e.lastLogTime).toLocaleString()})]})]}),e.saveLogsDir&&(0,y.jsxs)("div",{className:"save-logs-section",children:[(0,y.jsxs)("div",{className:"detail-row",children:[(0,y.jsx)("span",{className:"label",children:"Save Logs Dir:"}),(0,y.jsx)("span",{className:"value path",children:e.saveLogsDir})]}),(0,y.jsx)("button",{className:"open-dir-btn",onClick:n=>{n.stopPropagation(),(async e=>{if(e.saveLogsDir)try{if("showDirectoryPicker"in window){const n=await window.showDirectoryPicker();console.log(`Opened directory for ${e.name}:`,n)}else alert(`Save logs directory: ${e.saveLogsDir}`)}catch(n){console.error("Failed to open directory:",n),alert(`Save logs directory: ${e.saveLogsDir}`)}})(e)},children:"📁 Open Directory"})]})]},e.id))})]})}),"database"===p&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:"settings-section",children:[(0,y.jsx)("h3",{children:"🗄️ Database Configuration"}),m?(0,y.jsx)("div",{className:"database-info",children:(0,y.jsxs)("div",{className:"info-grid",children:[(0,y.jsxs)("div",{className:"info-item",children:[(0,y.jsx)("span",{className:"label",children:"Backend Type:"}),(0,y.jsxs)("span",{className:`value db-type-${m.type}`,children:[m.type.toUpperCase(),m.connected?" 🟢":" 🔴"]})]}),(0,y.jsxs)("div",{className:"info-item",children:[(0,y.jsx)("span",{className:"label",children:"Status:"}),(0,y.jsx)("span",{className:"value",children:m.connected?"Connected":"Disconnected"})]}),(0,y.jsxs)("div",{className:"info-item",children:[(0,y.jsx)("span",{className:"label",children:"Indexed Queries:"}),(0,y.jsx)("span",{className:"value",children:m.capabilities.indexedQueries?"✅":"❌"})]}),(0,y.jsxs)("div",{className:"info-item",children:[(0,y.jsx)("span",{className:"label",children:"Transactions:"}),(0,y.jsx)("span",{className:"value",children:m.capabilities.transactions?"✅":"❌"})]}),(0,y.jsxs)("div",{className:"info-item",children:[(0,y.jsx)("span",{className:"label",children:"Advanced Filtering:"}),(0,y.jsx)("span",{className:"value",children:m.capabilities.advancedFiltering?"✅":"❌"})]})]})}):(0,y.jsx)("div",{className:"loading",children:"Loading database configuration..."})]}),h&&(0,y.jsxs)("div",{className:"settings-section",children:[(0,y.jsx)("h3",{children:"📊 Database Statistics"}),(0,y.jsxs)("div",{className:"stats-grid",children:[(0,y.jsxs)("div",{className:"stat-card",children:[(0,y.jsx)("div",{className:"stat-value",children:h.logs.toLocaleString()}),(0,y.jsx)("div",{className:"stat-label",children:"Total Logs"})]}),(0,y.jsxs)("div",{className:"stat-card",children:[(0,y.jsx)("div",{className:"stat-value",children:h.monitoring.toLocaleString()}),(0,y.jsx)("div",{className:"stat-label",children:"Monitoring Entries"})]}),(0,y.jsxs)("div",{className:"stat-card",children:[(0,y.jsx)("div",{className:"stat-value",children:h.sources.toLocaleString()}),(0,y.jsx)("div",{className:"stat-label",children:"Data Sources"})]}),(0,y.jsxs)("div",{className:"stat-card",children:[(0,y.jsx)("div",{className:"stat-value",children:h.memoryIndexes.logIndexSize.toLocaleString()}),(0,y.jsx)("div",{className:"stat-label",children:"Log Index Size"})]})]})]})]}),"archives"===p&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:"settings-section",children:[(0,y.jsx)("h3",{children:"📁 Archive Management"}),(0,y.jsxs)("div",{className:"archive-controls",children:[(0,y.jsx)("button",{className:"action-btn primary",onClick:async()=>{try{w(!0);const e=await fetch("/api/archives/rotate",{method:"POST"}),n=await e.json();e.ok?(N("Log rotation completed successfully","success"),await S()):N(n.error||"Failed to trigger log rotation","error")}catch(e){N("Failed to trigger log rotation","error")}finally{w(!1)}},disabled:v,children:v?"⏳ Rotating...":"🔄 Trigger Log Rotation"}),(0,y.jsx)("p",{className:"help-text",children:"Manually trigger log rotation to archive current logs and start fresh."})]})]}),f&&(0,y.jsxs)("div",{className:"settings-section",children:[(0,y.jsxs)("h3",{children:["📦 Archive Files (",f.totalArchives,")"]}),(0,y.jsxs)("div",{className:"archive-summary",children:[(0,y.jsxs)("div",{className:"summary-item",children:[(0,y.jsx)("span",{className:"label",children:"Archive Directory:"}),(0,y.jsx)("span",{className:"value",children:f.archiveDirectory})]}),(0,y.jsxs)("div",{className:"summary-item",children:[(0,y.jsx)("span",{className:"label",children:"Total Size:"}),(0,y.jsxs)("span",{className:"value",children:[(f.totalSize/1024/1024).toFixed(2)," MB"]})]})]}),f.archives.length>0?(0,y.jsx)("div",{className:"archives-list",children:f.archives.map(e=>(0,y.jsxs)("div",{className:"archive-item",children:[(0,y.jsxs)("div",{className:"archive-info",children:[(0,y.jsx)("div",{className:"archive-name",children:e.filename}),(0,y.jsxs)("div",{className:"archive-details",children:[(0,y.jsx)("span",{children:e.sizeFormatted}),(0,y.jsx)("span",{children:new Date(e.created).toLocaleString()})]})]}),(0,y.jsx)("div",{className:"archive-actions",children:(0,y.jsx)("button",{className:"action-btn secondary",onClick:()=>(async e=>{try{const n=await fetch(`/api/archives/${e}`);if(n.ok){const t=await n.blob(),a=window.URL.createObjectURL(t),i=document.createElement("a");i.href=a,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(a),N(`Archive ${e} downloaded successfully`,"success")}else N("Failed to download archive","error")}catch(e){N("Failed to download archive","error")}})(e.filename),children:"📥 Download"})})]},e.filename))}):(0,y.jsxs)("div",{className:"empty-state",children:[(0,y.jsx)("p",{children:"No archive files available yet."}),(0,y.jsx)("p",{children:"Archives will appear here after log rotation occurs."})]})]})]}),"maintenance"===p&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:"settings-section",children:[(0,y.jsx)("h3",{children:"🔧 Data Export & Backup"}),(0,y.jsxs)("div",{className:"export-controls",children:[(0,y.jsxs)("div",{className:"export-group",children:[(0,y.jsx)("h4",{children:"Export Logs"}),(0,y.jsxs)("div",{className:"export-buttons",children:[(0,y.jsx)("button",{className:"action-btn secondary",onClick:()=>I("logs","json"),disabled:v,children:"JSON"}),(0,y.jsx)("button",{className:"action-btn secondary",onClick:()=>I("logs","csv"),disabled:v,children:"CSV"})]})]}),(0,y.jsxs)("div",{className:"export-group",children:[(0,y.jsx)("h4",{children:"Export Monitoring Data"}),(0,y.jsxs)("div",{className:"export-buttons",children:[(0,y.jsx)("button",{className:"action-btn secondary",onClick:()=>I("monitoring","json"),disabled:v,children:"JSON"}),(0,y.jsx)("button",{className:"action-btn secondary",onClick:()=>I("monitoring","csv"),disabled:v,children:"CSV"})]})]}),(0,y.jsxs)("div",{className:"export-group",children:[(0,y.jsx)("h4",{children:"Full System Backup"}),(0,y.jsx)("div",{className:"export-buttons",children:(0,y.jsx)("button",{className:"action-btn primary",onClick:()=>I("backup","json"),disabled:v,children:"📦 Complete Backup"})}),(0,y.jsx)("p",{className:"help-text",children:"Includes all logs, monitoring data, sources, and configuration."})]})]})]}),(h||f)&&(0,y.jsxs)("div",{className:"settings-section",children:[(0,y.jsx)("h3",{children:"📊 System Overview"}),(0,y.jsxs)("div",{className:"overview-grid",children:[h&&(0,y.jsxs)("div",{className:"overview-card",children:[(0,y.jsx)("h4",{children:"Database"}),(0,y.jsxs)("div",{className:"overview-stats",children:[(0,y.jsxs)("div",{children:[h.logs.toLocaleString()," logs"]}),(0,y.jsxs)("div",{children:[h.monitoring.toLocaleString()," monitoring entries"]}),(0,y.jsxs)("div",{children:[h.sources.toLocaleString()," sources"]})]})]}),f&&(0,y.jsxs)("div",{className:"overview-card",children:[(0,y.jsx)("h4",{children:"Archives"}),(0,y.jsxs)("div",{className:"overview-stats",children:[(0,y.jsxs)("div",{children:[f.totalArchives," archive files"]}),(0,y.jsxs)("div",{children:[(f.totalSize/1024/1024).toFixed(2)," MB total"]})]})]})]})]})]}),(0,y.jsxs)("div",{className:"settings-section",children:[(0,y.jsx)("h3",{children:"🔄 Auto-Refresh Settings"}),(0,y.jsx)("div",{className:"setting-row",children:(0,y.jsxs)("label",{children:[(0,y.jsx)("input",{type:"checkbox",checked:r,onChange:e=>l(e.target.checked)}),"Enable auto-refresh"]})}),(0,y.jsx)("div",{className:"setting-row",children:(0,y.jsxs)("label",{children:["Refresh interval:",(0,y.jsxs)("select",{value:c,onChange:e=>d(Number(e.target.value)),disabled:!r,children:[(0,y.jsx)("option",{value:1e3,children:"1 second"}),(0,y.jsx)("option",{value:2e3,children:"2 seconds"}),(0,y.jsx)("option",{value:5e3,children:"5 seconds"}),(0,y.jsx)("option",{value:1e4,children:"10 seconds"}),(0,y.jsx)("option",{value:3e4,children:"30 seconds"})]})]})})]}),(0,y.jsxs)("div",{className:"settings-section",children:[(0,y.jsx)("h3",{children:"📋 Server Information"}),(0,y.jsxs)("div",{className:"setting-row",children:[(0,y.jsx)("span",{className:"label",children:"Intermediary Server:"}),(0,y.jsx)("span",{className:"value",children:"http://localhost:3002"})]}),(0,y.jsxs)("div",{className:"setting-row",children:[(0,y.jsx)("span",{className:"label",children:"Viewer Port:"}),(0,y.jsx)("span",{className:"value",children:"3001"})]}),(0,y.jsxs)("div",{className:"setting-row",children:[(0,y.jsx)("span",{className:"label",children:"FormWise Port:"}),(0,y.jsx)("span",{className:"value",children:"3003"})]})]}),"recipients"===p&&o&&(0,y.jsxs)("div",{className:"settings-section",children:[(0,y.jsxs)("h3",{children:["🔍 ",o.name," Details"]}),(0,y.jsxs)("div",{className:"detail-view",children:[(0,y.jsxs)("div",{className:"detail-row",children:[(0,y.jsx)("span",{className:"label",children:"ID:"}),(0,y.jsx)("span",{className:"value",children:o.id})]}),(0,y.jsxs)("div",{className:"detail-row",children:[(0,y.jsx)("span",{className:"label",children:"Type:"}),(0,y.jsx)("span",{className:"value",children:o.type})]}),(0,y.jsxs)("div",{className:"detail-row",children:[(0,y.jsx)("span",{className:"label",children:"Status:"}),(0,y.jsx)("span",{className:"value",children:o.status})]}),(0,y.jsxs)("div",{className:"detail-row",children:[(0,y.jsx)("span",{className:"label",children:"Total Logs:"}),(0,y.jsx)("span",{className:"value",children:o.logCount.toLocaleString()})]}),o.saveLogsDir&&(0,y.jsxs)("div",{className:"detail-row",children:[(0,y.jsx)("span",{className:"label",children:"Save Logs Directory:"}),(0,y.jsx)("span",{className:"value path",children:o.saveLogsDir})]}),(0,y.jsxs)("div",{className:"detail-row",children:[(0,y.jsx)("span",{className:"label",children:"Last Seen:"}),(0,y.jsx)("span",{className:"value",children:new Date(o.lastSeen||"").toLocaleString()})]}),o.lastLogTime&&(0,y.jsxs)("div",{className:"detail-row",children:[(0,y.jsx)("span",{className:"label",children:"Last Log Time:"}),(0,y.jsx)("span",{className:"value",children:new Date(o.lastLogTime).toLocaleString()})]})]})]})]}),(0,y.jsx)("div",{className:"settings-footer",children:(0,y.jsx)("button",{className:"save-btn",onClick:n,children:"Close"})})]})}):null},_=new class{logs=[];maxLogs=O.maxInternalLogs;enableConsole=O.enableConsoleLogging;logLevel=O.defaultInternalLogLevel;levelOrder={debug:0,info:1,warn:2,error:3};constructor(e){e&&(this.enableConsole=e.enableConsole??O.enableConsoleLogging,this.logLevel=e.logLevel??O.defaultInternalLogLevel,this.maxLogs=e.maxLogs??O.maxInternalLogs)}shouldLog(e){return this.levelOrder[e]>=this.levelOrder[this.logLevel]}addLog(e,n,t,a){if(!this.shouldLog(e))return;const i={timestamp:new Date,level:e,component:n,message:t,data:a};if(this.logs.push(i),this.logs.length>this.maxLogs&&(this.logs=this.logs.slice(-this.maxLogs)),this.enableConsole){const i=`[${n}] ${t}`;switch(e){case"debug":console.debug(i,a||"");break;case"info":console.log(i,a||"");break;case"warn":console.warn(i,a||"");break;case"error":console.error(i,a||"")}}}debug(e,n,t){this.addLog("debug",e,n,t)}info(e,n,t){this.addLog("info",e,n,t)}warn(e,n,t){this.addLog("warn",e,n,t)}error(e,n,t){this.addLog("error",e,n,t)}getLogs(){return[...this.logs]}getLogsForComponent(e){return this.logs.filter(n=>n.component===e)}getLogsForLevel(e){return this.logs.filter(n=>n.level===e)}clearLogs(){this.logs=[]}configure(e){void 0!==e.enableConsole&&(this.enableConsole=e.enableConsole),void 0!==e.logLevel&&(this.logLevel=e.logLevel),void 0!==e.maxLogs&&(this.maxLogs=e.maxLogs)}},q=(e,n,t)=>{try{return _.info(e,n,t)}catch(a){console.log(`[${e}] ${n}`,t||"")}},X=(e,n,t)=>{try{return _.error(e,n,t)}catch(a){console.error(`[${e}] ${n}`,t||"")}},G=function(){const[e,n]=(0,a.useState)("logs"),[t,i]=(0,a.useState)(!1),o=(0,a.useRef)(null),s=(0,a.useCallback)(e=>{q("App","Highlight created from context menu",e)},[]),{contextMenu:r,showContextMenu:l,hideContextMenu:c,createHighlight:d}=k({onCreateHighlight:s}),{getHighlightStyles:p,isElementHighlighted:g}=S(),[m,u]=(0,a.useState)([]),[h,x]=(0,a.useState)({totalLogs:0,bufferSize:0,enabledModules:0,totalModules:0,logLevels:{info:0,warn:0,error:0,debug:0},lastUpdate:(new Date).toISOString()}),[f,b]=(0,a.useState)(O.getInitialConnectionStatus()),[v,w]=(0,a.useState)(O.getInitialConnectionStatus()),[I,C]=(0,a.useState)(O.getInitialMonitoringStats()),[L,D]=(0,a.useState)(O.autoRefreshEnabled),[z,$]=(0,a.useState)(O.defaultRefreshInterval),[F,M]=(0,a.useState)(!1),[T,P]=(0,a.useState)(new Set),[R,U]=(0,a.useState)(null),[V,J]=(0,a.useState)({open:!1}),[Y,_]=(0,a.useState)({message:"",type:"info",visible:!1}),[G,Z]=(0,a.useState)({level:"",scriptId:"",search:"",sourceId:"",startDate:"",endDate:""}),K=(0,a.useCallback)(()=>"logs"===e?{view:"logs",logs:m,stats:h,filters:G,autoRefresh:L,refreshInterval:z}:{view:"monitoring"},[e,m,h,G,L,z]),Q=((0,a.useCallback)((e,n="info")=>{_({message:e,type:n,visible:!0}),setTimeout(()=>_(e=>({...e,visible:!1})),3e3)},[]),(0,a.useCallback)(e=>{if(!0===e.recursive)return!0;if(!1===e.recursive)return!1;const n=(e.scriptId||e.sourceId||"").toLowerCase(),t=(e.message||"").toLowerCase();return n.includes("viewer")||n.includes("allog")||t.includes("viewer")||t.includes("webpack")},[]));(0,a.useEffect)(()=>{const e={}?.WS_TARGET,n={}?.API_TARGET;let t;if(e&&"string"==typeof e&&e.length>0)t=e;else if(n&&"string"==typeof n&&n.length>0)try{const e=new URL(n),a="https:"===e.protocol?"wss":"ws",i=e.port?`:${e.port}`:"";t=`${a}://${e.hostname}${i}`}catch{const e="https:"===window.location.protocol?"wss":"ws",n=window.location.hostname,a=window.location.port;t=`${e}://${n}:${a===O.viewerPort.toString()?O.serverPort.toString():a||O.serverPort.toString()}`}else{const e="https:"===window.location.protocol?"wss":"ws",n=window.location.hostname,a=window.location.port;t=`${e}://${n}:${a===O.viewerPort.toString()?O.serverPort.toString():a||O.serverPort.toString()}`}let a=null;try{a=new WebSocket(t),a.onmessage=e=>{try{const n=JSON.parse(e.data);if("new_log"===n.type){const e=n.data,t={id:e.id,scriptId:e.scriptId||e.sourceId||"unknown",message:e.message,time:e.time||e.timestamp||e.serverReceivedAt||(new Date).toISOString(),level:e.level,data:e.data,stack:e.stack};Q({...t,recursive:e.recursive})||u(e=>e.some(e=>e.id===t.id)?e:[t,...e])}"logs_cleared"===n.type&&(u([]),U(null)),n.type,"monitoring_update"===n.type&&q("App","Received monitoring update",n.data)}catch{}}}catch{}return()=>{try{a&&a.close()}catch{}}},[Q]);const ee=(0,a.useCallback)(async()=>{try{const e=await fetch("/api/logs?includeRecursive=false");if(e.ok){const n=await e.json(),t=(n.logs||[]).map(e=>({id:e.id,scriptId:e.scriptId||e.sourceId||"unknown",message:e.message,time:e.time||e.timestamp||e.serverReceivedAt||(new Date).toISOString(),level:e.level,data:e.data,stack:e.stack}));u(t.filter((e,t)=>!Q({...e,recursive:(n.logs||[])[t]?.recursive}))),U(e=>e&&t.some(n=>n.id===e.id)?e:null)}}catch(e){X("App","Failed to fetch logs",e)}},[]),ne=(0,a.useCallback)(async()=>{try{const e=await fetch("/api/status");if(e.ok){const n=await e.json();x(n),b(e=>({...e,isConnected:!0,error:void 0}))}}catch(e){X("App","Failed to fetch stats",e),b(e=>({...e,isConnected:!1,error:"Connection failed",retryCount:e.retryCount+1}))}},[]),te=(0,a.useCallback)(async()=>{try{let e=!1;try{e=(await fetch("/api/logs",{method:"DELETE"})).ok}catch{}e||(e=(await fetch("/api/logs/clear",{method:"POST"})).ok),e&&(u([]),await ne())}catch(e){X("App","Failed to clear logs",e)}},[ne]);(0,a.useEffect)(()=>{if(!L)return;const n=setInterval(()=>{"logs"===e&&(ee(),ne())},z);return()=>clearInterval(n)},[L,z,ee,ne,e]),(0,a.useEffect)(()=>{ee(),ne()},[ee,ne]);const ae=m.filter(e=>!(G.scriptId&&!e.scriptId.includes(G.scriptId)||G.level&&e.level!==G.level||G.search&&!e.message.toLowerCase().includes(G.search.toLowerCase()))),ie=Array.from(new Set(m.map(e=>e.scriptId))).sort(),oe=(0,a.useCallback)(async()=>{try{if("showDirectoryPicker"in window){const e=await window.showDirectoryPicker(),n=(new Date).toISOString().replace(/[:.]/g,"-"),t=`logs_${n}.json`,a={timestamp:n,totalLogs:m.length,logs:m.map(e=>({id:e.id,scriptId:e.scriptId,level:e.level,time:e.time,message:e.message,data:e.data,stack:e.stack}))},i=await e.getFileHandle(t,{create:!0}),o=await i.createWritable();await o.write(JSON.stringify(a,null,2)),await o.close(),q("App",`Logs saved to: ${t}`)}}catch(e){console.warn("Could not save logs to directory:",e)}},[m]),se=(0,a.useCallback)(()=>{if(!R)return;const e={id:R.id,scriptId:R.scriptId,level:R.level,time:R.time,message:R.message,data:R.data,stack:R.stack};try{navigator.clipboard.writeText(JSON.stringify(e,null,2))}catch{}},[R]),re=e=>{if(null===e)return"null";if(void 0===e)return"undefined";if(Array.isArray(e))return"array";const n=typeof e;return"object"===n?"object":"string"===n?"string":"number"===n?"number":"boolean"===n?"boolean":"unknown"},le=(0,a.useRef)(new Map),ce=(0,a.useCallback)(e=>{try{q("App","Saving item",{name:e.name,type:e.type});const n=K();"view-preset"!==e.type&&"log-session"!==e.type&&"filter-preset"!==e.type||e.metadata&&(e.metadata.data={...e.metadata.data,...n,savedAt:(new Date).toISOString()},e.metadata.updatedAt=(new Date).toISOString()),q("App","Enhanced save item with current state",{name:e.name})}catch(e){X("App","Failed to enhance save item",e)}},[K]),de=(0,a.useCallback)(e=>{try{switch(q("App","Loading item",{name:e.name,type:e.type}),e.type){case"filter-preset":e.metadata?.data?.filters&&(Z(e.metadata.data.filters),q("App","Applied filter preset",{name:e.name}));break;case"view-preset":{const t=e.metadata?.data;t&&(t.view&&n(t.view),t.filters&&Z(t.filters),void 0!==t.autoRefresh&&D(t.autoRefresh),q("App","Applied view preset",{name:e.name}));break}case"log-session":{const n=e.metadata?.data;n&&(n.logs&&u(n.logs),n.filters&&Z(n.filters),n.stats&&x(n.stats),q("App","Applied log session",{name:e.name}));break}case"monitoring-session":n("monitoring"),q("App","Switched to monitoring view for session",{name:e.name});break;case"highlight":q("App","Highlight loaded",{name:e.name});break;case"comparison":q("App","Comparison loaded",{name:e.name});break;case"profile":q("App","Profile loaded",{name:e.name});break;default:{const n=e;n.metadata?.data&&q("App","Loading generic save node",n.metadata.data);break}}if(e.metadata?.importedState){const t=e.metadata.importedState;t.view&&n(t.view),t.filters&&Z(t.filters),q("App","Applied imported state from",{name:e.name})}}catch(n){X("App","Failed to load item",n),alert(`Failed to load ${e.name}: ${n.message}`)}},[]),pe=(0,a.useCallback)(e=>{q("App","Deleting item",{itemId:e})},[]),ge=(0,a.useCallback)(async(e,n="json")=>{try{if("server-export"===n)return void await me(e);const t={version:"1.0.0",exportedAt:(new Date).toISOString(),exportedBy:"Allog Viewer",item:e,..."view-preset"===e.type&&{currentState:K()}},a=JSON.stringify(t,null,2),i=new Blob([a],{type:"application/json"}),o=URL.createObjectURL(i),s=document.createElement("a");s.href=o;const r=(new Date).toISOString().slice(0,19).replace(/:/g,"-"),l=e.name.replace(/[^a-zA-Z0-9-_]/g,"-");s.download=`allog-${e.type}-${l}-${r}.json`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(o),q("Export",`Successfully exported: ${e.name}`)}catch(e){X("App","Failed to export item",e)}},[K]),me=(0,a.useCallback)(async e=>{try{let n="";switch(K(),e.type){case"log-session":n=`/api/export/logs?${new URLSearchParams({format:"json",...G.level&&{level:G.level},...G.sourceId&&{sourceId:G.sourceId},...G.scriptId&&{scriptId:G.scriptId},...G.startDate&&{start:G.startDate},...G.endDate&&{end:G.endDate}})}`;break;case"monitoring-session":n=`/api/export/monitoring?${new URLSearchParams({format:"json"})}`;break;case"view-preset":case"filter-preset":case"profile":return void await ge(e,"json");default:n="/api/export/backup"}window.open(n,"_blank"),q("App","Server export initiated",{type:e.type,url:n})}catch(e){X("App","Server export failed",e)}},[K,G,ge]),ue=((0,a.useCallback)(async(e,n="json")=>{try{if(0===e.length)return;const n=e.reduce((e,n)=>(e[n.type]||(e[n.type]=[]),e[n.type].push(n),e),{}),t={metadata:{exportedAt:(new Date).toISOString(),exportedBy:"allog-viewer",version:"1.0",totalItems:e.length,itemTypes:Object.keys(n)},items:n},a=`allog-bulk-export-${(new Date).toISOString().split("T")[0]}.json`,i=JSON.stringify(t,null,2),o=new Blob([i],{type:"application/json"}),s=URL.createObjectURL(o),r=document.createElement("a");r.href=s,r.download=a,r.click(),URL.revokeObjectURL(s),q("App","Bulk export completed",{filename:a,itemCount:e.length,types:Object.keys(n)})}catch(e){X("App","Bulk export failed",e)}},[]),(0,a.useCallback)(e=>{try{if(e instanceof File){const n=new FileReader;return n.onload=e=>{try{const n=e.target?.result,t=JSON.parse(n);ue(t)}catch(e){X("App","Failed to parse imported file",e),alert("Invalid JSON file format")}},void n.readAsText(e)}if(he(e))return void be(e);if(xe(e))return void ve(e);fe(e)}catch(e){X("App","Failed to import data",e),alert(`Import failed: ${e.message}`)}},[])),he=e=>e.metadata&&e.items&&"object"==typeof e.items,xe=e=>e.metadata&&(e.logs||e.monitoringData)&&e.metadata.version?.includes("backup"),fe=(0,a.useCallback)(e=>{if(!e||"object"!=typeof e)throw new Error("Invalid import data format");if(!e.item||!e.version)throw new Error("Import file missing required fields (item, version)");const n=e.item;if(!n.id||!n.name||!n.type)throw new Error("Imported item missing required fields (id, name, type)");const t=`imported-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,a={...n,id:t,name:`${n.name} (Imported)`,metadata:{...n.metadata,importedAt:(new Date).toISOString(),originalId:n.id,importedFrom:e.exportedBy||"Unknown",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()}};"view-preset"===n.type&&e.currentState&&(a.metadata.importedState=e.currentState);const i=localStorage.getItem("allog-save-system");let o=i?JSON.parse(i):{items:[]};o.items.push(a),localStorage.setItem("allog-save-system",JSON.stringify(o)),window.location.reload(),q("App","Successfully imported",{name:a.name})},[]),be=(0,a.useCallback)(e=>{const{metadata:n,items:t}=e;let a=0,i=0;const o=localStorage.getItem("allog-save-system");let s=o?JSON.parse(o):{items:[]};Object.entries(t).forEach(([e,t])=>{Array.isArray(t)&&t.forEach(e=>{try{const t=`imported-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,i={...e,id:t,name:`${e.name} (Bulk Import)`,metadata:{...e.metadata,importedAt:(new Date).toISOString(),originalId:e.id,importedFrom:"Bulk Export",bulkImportId:n.exportedAt,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()}};s.items.push(i),a++}catch(e){X("App","Failed to import bulk item",e),i++}})}),localStorage.setItem("allog-save-system",JSON.stringify(s)),q("App","Bulk import completed",{imported:a,skipped:i,types:Object.keys(t)}),alert(`Bulk import completed: ${a} items imported, ${i} skipped`),window.location.reload()},[]),ve=(0,a.useCallback)(async e=>{try{if(confirm("This appears to be a server backup. Import as server data (replaces server data) or convert to client items?")){const n=await fetch("/api/import/backup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok)throw new Error(`Server import failed: ${n.statusText}`);{const e=await n.json();alert(`Server import completed: ${JSON.stringify(e.results,null,2)}`),q("App","Server backup imported",e)}}else we(e)}catch(e){X("App","Server backup import failed",e),alert(`Server backup import failed: ${e.message}`)}},[]),we=(0,a.useCallback)(e=>{const n=localStorage.getItem("allog-save-system");let t=n?JSON.parse(n):{items:[]},a=0;if(e.monitoringData&&Array.isArray(e.monitoringData)){const n={id:`converted-monitoring-${Date.now()}`,name:`Monitoring Session (${new Date(e.metadata.backupCreatedAt).toLocaleDateString()})`,type:"monitoring-session",metadata:{createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),convertedFromBackup:!0,originalBackupDate:e.metadata.backupCreatedAt,entryCount:e.monitoringData.length}};t.items.push(n),a++}if(e.logs&&Array.isArray(e.logs)&&e.logs.length>0){const n={id:`converted-logs-${Date.now()}`,name:`Log Session (${new Date(e.metadata.backupCreatedAt).toLocaleDateString()})`,type:"log-session",metadata:{createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),convertedFromBackup:!0,originalBackupDate:e.metadata.backupCreatedAt,logCount:e.logs.length}};t.items.push(n),a++}localStorage.setItem("allog-save-system",JSON.stringify(t)),q("App","Server backup converted to client items",{convertedCount:a,originalBackup:e.metadata.backupCreatedAt}),alert(`Converted ${a} server backup items to client save items`),window.location.reload()},[]);return(0,y.jsxs)("div",{className:"app-container",children:[(0,y.jsx)(H,{ref:o,isOpen:F,onToggle:()=>M(!F),onSave:ce,onLoad:de,onDelete:pe,onExport:ge,onImport:ue,currentData:K(),currentView:e,onCreateHighlight:s}),(0,y.jsx)(j,{isVisible:r.isVisible,x:r.x,y:r.y,items:(()=>{const e=r.targetData?g("log",r.targetData.scriptId,void 0,void 0,r.targetData.data?.message):null,n=[];return(()=>{const e=r.targetData?.data?.data?.imageUrl||r.targetData?.data?.imageUrl;return!!(e&&"string"==typeof e&&e.trim().length>0)})()&&n.push({id:"view-screenshot",label:"View Screenshot",icon:"🖼️",action:()=>{const e=r.targetData?.data?.data?.imageUrl||r.targetData?.data?.imageUrl,n=r.targetData?.data?.data?.overlay||r.targetData?.data?.overlay;if(e){let t=e;if(t.startsWith("/uploads"))try{t=new URL(t,(()=>{const e={}?.API_TARGET;return e&&"string"==typeof e&&e.length>0?e:`${window.location.protocol}//${window.location.host}`})()).toString()}catch{}J({open:!0,imageUrl:t,overlay:n})}}}),n.push({id:"inspect-log",label:"Inspect",icon:"🔎",action:()=>{const e=r.targetData?.data?.logId;if(!e)return;const n=m.find(n=>n.id===e);n&&U(n)}},{id:"save-log-to-directory",label:"Save Log to Directory",icon:"💾",action:async()=>{try{if("showDirectoryPicker"in window&&r.targetData?.data?.logId){const e=m.find(e=>e.id===r.targetData.data.logId);if(e){const n=await window.showDirectoryPicker(),t=(new Date).toISOString().replace(/[:.]/g,"-"),a=`log_${e.scriptId}_${t}.json`,i={timestamp:t,log:{id:e.id,scriptId:e.scriptId,level:e.level,time:e.time,message:e.message,data:e.data,stack:e.stack}},o=await n.getFileHandle(a,{create:!0}),s=await o.createWritable();await s.write(JSON.stringify(i,null,2)),await s.close(),e.info("App",`Log saved to: ${a}`)}}}catch(e){console.warn("Could not save log to directory:",e)}}},{id:"highlight",label:e?"Remove Highlight":"Highlight",icon:e?"❌":"💡",action:()=>{r.targetData&&o.current&&(e?o.current.removeHighlightForElement({elementType:"log",scriptId:r.targetData.scriptId,logMessage:r.targetData.data?.message}):o.current.createHighlightFromData(r.targetData))}}),n})(),onClose:c}),(0,y.jsxs)("div",{className:"main-content "+(F?"with-save-system":""),children:[(0,y.jsxs)("div",{className:"header",children:[(0,y.jsx)("button",{className:"save-system-toggle-btn",onClick:()=>M(!F),title:"Toggle Save System",children:"💾"}),(0,y.jsxs)("div",{className:"header-controls",children:[(0,y.jsxs)("div",{className:"view-toggle",children:[(0,y.jsx)("button",{className:"view-btn "+("logs"===e?"active":""),onClick:()=>n("logs"),children:"📋 Logs"}),(0,y.jsx)("div",{className:"view-separator"}),(0,y.jsx)("button",{className:"view-btn "+("monitoring"===e?"active":""),onClick:()=>n("monitoring"),children:"📊 Monitoring"}),(0,y.jsx)("div",{className:"view-separator"}),(0,y.jsx)("button",{className:"view-btn "+("recursive"===e?"active":""),onClick:()=>n("recursive"),children:"🔄 Recursive Logs"}),(0,y.jsx)("div",{className:"view-separator"}),(0,y.jsx)("button",{className:"view-btn "+("instrumentation"===e?"active":""),onClick:()=>n("instrumentation"),children:"🔧 Instrumentation"})]}),(0,y.jsxs)("div",{className:"connection-status",children:[(0,y.jsx)("span",{className:"status-indicator "+("logs"===e?f.isConnected?"connected":"disconnected":"monitoring"===e?v.isConnected?"connected":"disconnected":"connected"),children:"logs"===e?f.isConnected?"●":"○":"monitoring"===e?v.isConnected?"●":"○":"●"}),(0,y.jsx)("span",{className:"status-text",children:"logs"===e?f.isConnected?"Connected":"Disconnected":"monitoring"===e?v.isConnected?"Connected":"Disconnected":"Connected"})]}),(0,y.jsxs)("div",{className:"auto-refresh-controls",children:[(0,y.jsxs)("label",{children:[(0,y.jsx)("input",{type:"checkbox",checked:L,onChange:e=>D(e.target.checked)}),"Auto-refresh"]}),(0,y.jsx)("select",{value:z,onChange:e=>$(Number(e.target.value)),disabled:!L,children:O.refreshOptions.map(e=>(0,y.jsx)("option",{value:e,children:e>=1e3?e/1e3+"s":`${e}ms`},e))})]}),(0,y.jsx)("div",{className:"settings-controls",children:(0,y.jsx)("button",{onClick:()=>i(e=>!e),className:"settings-btn",title:"Open settings and view save logs directories",children:"⚙️ Settings"})})]})]}),Y.visible&&(0,y.jsxs)("div",{className:`notification notification-${Y.type}`,children:[(0,y.jsx)("span",{className:"notification-message",children:Y.message}),(0,y.jsx)("button",{className:"notification-close",onClick:()=>_(e=>({...e,visible:!1})),children:"×"})]}),"logs"===e?(0,y.jsxs)("div",{className:"app",children:[(0,y.jsxs)("div",{className:"filters",children:[(0,y.jsxs)("select",{value:G.scriptId,onChange:e=>Z(n=>({...n,scriptId:e.target.value})),children:[(0,y.jsx)("option",{value:"",children:"All Scripts"}),ie.map(e=>(0,y.jsx)("option",{value:e,children:e},e))]}),(0,y.jsxs)("select",{value:G.level,onChange:e=>Z(n=>({...n,level:e.target.value})),children:[(0,y.jsx)("option",{value:"",children:"All Levels"}),O.validLogLevels.map(e=>(0,y.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))]}),(0,y.jsx)("input",{type:"text",placeholder:"Search logs...",value:G.search,onChange:e=>Z(n=>({...n,search:e.target.value}))}),(0,y.jsx)("button",{onClick:te,className:"clear-btn",children:"Clear Logs"}),(0,y.jsx)("button",{onClick:oe,className:"save-btn",children:"💾 Save Logs"})]}),(0,y.jsxs)("div",{className:"monitoring-content",children:[(0,y.jsx)("div",{className:"monitoring-main",children:(0,y.jsx)("div",{className:"log-list",children:0===ae.length?(0,y.jsx)("div",{className:"no-logs",children:f.isConnected?0===m.length?(0,y.jsxs)("div",{className:"empty-state",children:[(0,y.jsx)("div",{className:"empty-state-icon",children:"📋"}),(0,y.jsx)("div",{className:"empty-state-title",children:"No Logs Yet"}),(0,y.jsxs)("div",{className:"empty-state-description",children:["No log entries have been received from any source.",(0,y.jsx)("br",{}),"Start sending logs using the Allog client library or test client."]})]}):(0,y.jsxs)("div",{className:"empty-state",children:[(0,y.jsx)("div",{className:"empty-state-icon",children:"🔍"}),(0,y.jsx)("div",{className:"empty-state-title",children:"No Matching Logs"}),(0,y.jsxs)("div",{className:"empty-state-description",children:["No logs match your current filters.",(0,y.jsx)("br",{}),"Try adjusting your search criteria or clearing filters."]})]}):(0,y.jsxs)("div",{className:"empty-state",children:[(0,y.jsx)("div",{className:"empty-state-icon",children:"🔌"}),(0,y.jsx)("div",{className:"empty-state-title",children:"Not Connected"}),(0,y.jsxs)("div",{className:"empty-state-description",children:["Unable to connect to the Allog intermediary server.",(0,y.jsx)("br",{}),"Make sure the server is running on port ",O.serverPort,"."]})]})}):ae.map(e=>{const n=p("log",e.scriptId,void 0,void 0,e.message),t=R?.id===e.id;return(0,y.jsxs)("div",{className:`log-entry log-${e.level} ${t?"selected":""} ${n.className}`,style:n.style,...n.dataAttributes,children:[(0,y.jsxs)("div",{className:"log-header",onClick:()=>{(e=>{const n=new Set(T);n.has(e)?n.delete(e):n.add(e),P(n)})(e.id)},onContextMenu:n=>((e,n)=>{const t=`log-${n.id}`,a=Date.now(),i=le.current.get(t);if(i&&a-i.lastClick<300)return i.timeout&&clearTimeout(i.timeout),le.current.delete(t),void n.debug("App","Double right-click detected - allowing native context menu");i?.timeout&&clearTimeout(i.timeout);const o=setTimeout(()=>{le.current.delete(t)},300);le.current.set(t,{lastClick:a,timeout:o}),e.preventDefault(),e.stopPropagation();const s={name:n.message.substring(0,50)+(n.message.length>50?"...":""),description:`Log Entry: ${n.message}\n\nScript: ${n.scriptId}\nLevel: ${n.level}\nTime: ${new Date(n.time).toLocaleString()}\n\n${n.data?`Data: ${JSON.stringify(n.data,null,2)}`:""}\n\n${n.stack?`Stack: ${n.stack}`:""}`,scriptId:n.scriptId,tags:[n.scriptId,n.level,"log"],data:{logId:n.id,scriptId:n.scriptId,level:n.level,time:n.time,message:n.message,data:n.data,stack:n.stack}};l(e.clientX,e.clientY,s,e.currentTarget)})(n,e),children:[(0,y.jsx)("div",{className:"log-time",children:new Date(e.time).toLocaleTimeString()}),(0,y.jsx)("div",{className:`log-level ${e.level}`,children:e.level.toUpperCase()}),(0,y.jsx)("div",{className:"log-script",children:e.scriptId}),(0,y.jsx)("div",{className:"log-message",children:e.message}),(0,y.jsx)("div",{className:"log-toggle",children:T.has(e.id)?"▼":"▶"})]}),T.has(e.id)&&(0,y.jsxs)("div",{className:"log-details",children:[e.data&&(0,y.jsxs)("div",{className:"log-data",children:[(0,y.jsx)("strong",{children:"Data:"}),(0,y.jsx)("pre",{children:JSON.stringify(e.data,null,2)})]}),e.stack&&(0,y.jsxs)("div",{className:"log-stack",children:[(0,y.jsx)("strong",{children:"Stack:"}),(0,y.jsx)("pre",{children:e.stack})]})]})]},e.id)})})}),R&&(0,y.jsxs)("div",{className:"monitoring-detail",children:[(0,y.jsxs)("div",{className:"detail-header",children:[(0,y.jsx)("h3",{children:"Data Details"}),(0,y.jsxs)("div",{className:"detail-header-controls",children:[(0,y.jsx)("button",{className:"copy-btn",onClick:se,title:"Copy data to clipboard",children:"📋 Copy"}),(0,y.jsx)("button",{className:"close-btn",onClick:()=>U(null),children:"×"})]})]}),(0,y.jsxs)("div",{className:"detail-content",children:[(0,y.jsxs)("div",{className:"detail-section",children:[(0,y.jsx)("h4",{children:"Basic Information"}),(0,y.jsxs)("div",{className:"detail-item",children:[(0,y.jsx)("span",{className:"detail-label",children:"Script:"}),(0,y.jsx)("span",{className:"detail-value",children:R.scriptId})]}),(0,y.jsxs)("div",{className:"detail-item",children:[(0,y.jsx)("span",{className:"detail-label",children:"Level:"}),(0,y.jsx)("span",{className:"detail-value",children:R.level.toUpperCase()})]}),(0,y.jsxs)("div",{className:"detail-item",children:[(0,y.jsx)("span",{className:"detail-label",children:"Time:"}),(0,y.jsx)("span",{className:"detail-value",children:new Date(R.time).toLocaleString()})]}),(0,y.jsxs)("div",{className:"detail-item",children:[(0,y.jsx)("span",{className:"detail-label",children:"Message:"}),(0,y.jsx)("span",{className:"detail-value",children:R.message})]})]}),void 0!==R.data&&(0,y.jsxs)("div",{className:"detail-section",children:[(0,y.jsx)("h4",{children:"Data"}),(0,y.jsxs)("div",{className:"detail-item",children:[(0,y.jsx)("span",{className:"detail-label",children:"Current Value:"}),(0,y.jsx)("div",{className:"detail-value-container",children:(0,y.jsx)("span",{className:`detail-value detail-value-${re(R.data)}`,children:(e=>{switch(re(e)){case"object":case"array":try{return JSON.stringify(e,null,2)}catch{return String(e)}case"string":case"number":case"boolean":case"null":case"undefined":return String(e);default:try{return JSON.stringify(e)}catch{return String(e)}}})(R.data)})})]})]}),R.stack&&(0,y.jsxs)("div",{className:"detail-section",children:[(0,y.jsx)("h4",{children:"Stack"}),(0,y.jsx)("pre",{className:"detail-stack",children:R.stack})]})]})]})]})]}):"monitoring"===e?(0,y.jsx)("div",{className:"app",children:(0,y.jsx)(N,{onStatsUpdate:C,onConnectionUpdate:w,saveSystemRef:o})}):"recursive"===e?(()=>{const e=window.location.hostname,n=(window.location.port,`http://${e}:3001`);return(0,y.jsx)("div",{className:"app",children:(0,y.jsx)(A,{serverUrl:n,autoRefresh:L,refreshInterval:z})})})():(0,y.jsx)(E,{})]}),(0,y.jsx)(B,{isOpen:V.open,imageUrl:V.imageUrl||"",overlay:V.overlay,json:R?.data,onClose:()=>J({open:!1})}),(0,y.jsx)(W,{isOpen:t,onClose:()=>i(!1)})]})};i.createRoot(document.getElementById("root")).render((0,y.jsx)(a.StrictMode,{children:(0,y.jsx)(G,{})}))},345:(e,n,t)=>{t.d(n,{A:()=>r});var a=t(645),i=t.n(a),o=t(278),s=t.n(o)()(i());s.push([e.id,"/* Monitoring Page Styles - Visual Studio Dark Mode */\n\n.monitoring-page {\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh;\n  background: #1e1e1e;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n  color: #d4d4d4;\n}\n\n/* Header - More Compact */\n.monitoring-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 12px 20px;\n  background: #2d2d30;\n  border-bottom: 1px solid #3e3e42;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);\n  min-height: 50px;\n}\n\n.monitoring-header h1 {\n  margin: 0;\n  font-size: 20px;\n  font-weight: 600;\n  color: #ffffff;\n}\n\n.header-controls {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n}\n\n.connection-status {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  padding: 6px 10px;\n  border-radius: 4px;\n  background: #3c3c3c;\n  font-size: 12px;\n}\n\n.status-indicator {\n  font-size: 10px;\n  font-weight: bold;\n}\n\n.status-indicator.connected {\n  color: #4ec9b0;\n}\n\n.status-indicator.disconnected {\n  color: #f44747;\n}\n\n.status-text {\n  font-size: 12px;\n  color: #cccccc;\n}\n\n.auto-refresh-controls {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 12px;\n}\n\n.auto-refresh-controls label {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  font-size: 12px;\n  color: #cccccc;\n  cursor: pointer;\n}\n\n.auto-refresh-controls input[type=\"checkbox\"] {\n  margin: 0;\n}\n\n.auto-refresh-controls select {\n  padding: 4px 8px;\n  border: 1px solid #3e3e42;\n  border-radius: 3px;\n  font-size: 12px;\n  background: #3c3c3c;\n  color: #cccccc;\n}\n\n/* Stats - More Compact */\n.monitoring-stats {\n  display: flex;\n  gap: 16px;\n  padding: 10px 20px;\n  background: #2d2d30;\n  border-bottom: 1px solid #3e3e42;\n  overflow-x: auto;\n  min-height: 40px;\n}\n\n.stat-item {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  min-width: 60px;\n}\n\n.stat-label {\n  font-size: 10px;\n  color: #858585;\n  margin-bottom: 2px;\n}\n\n.stat-value {\n  font-size: 14px;\n  font-weight: 600;\n  color: #ffffff;\n}\n\n/* Filters - More Compact */\n.monitoring-filters {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 10px 20px;\n  background: #2d2d30;\n  border-bottom: 1px solid #3e3e42;\n  gap: 16px;\n  min-height: 45px;\n}\n\n.filter-group {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.filter-input {\n  padding: 6px 10px;\n  border: 1px solid #3e3e42;\n  border-radius: 4px;\n  font-size: 12px;\n  min-width: 120px;\n  background: #3c3c3c;\n  color: #cccccc;\n}\n\n.filter-input:focus {\n  outline: none;\n  border-color: #007acc;\n  box-shadow: 0 0 0 2px rgba(0, 122, 204, 0.25);\n}\n\n.filter-input::placeholder {\n  color: #858585;\n}\n\n.filter-group label {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  font-size: 12px;\n  color: #cccccc;\n  cursor: pointer;\n}\n\n.filter-group input[type=\"checkbox\"] {\n  margin: 0;\n}\n\n.view-mode-controls {\n  display: flex;\n  gap: 2px;\n}\n\n.view-mode-btn {\n  padding: 6px 12px;\n  border: 1px solid #3e3e42;\n  background: #3c3c3c;\n  color: #cccccc;\n  border-radius: 4px;\n  font-size: 12px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.view-mode-btn:hover {\n  background: #4a4a4a;\n  border-color: #5a5a5a;\n}\n\n.view-mode-btn.active {\n  background: #007acc;\n  border-color: #007acc;\n  color: #ffffff;\n}\n\n/* Content - Optimized Layout */\n.monitoring-content {\n  display: flex;\n  flex: 1;\n  overflow: visible;\n  min-height: 0;\n}\n\n.monitoring-main {\n  flex: 1;\n  overflow: visible;\n  padding: 15px;\n  min-height: 0;\n  background: #1e1e1e;\n}\n\n/* Tree View - More Compact */\n.monitoring-tree {\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n}\n\n.module-container {\n  background: #2d2d30;\n  border: 1px solid #3e3e42;\n  border-radius: 6px;\n  overflow: hidden;\n}\n\n.module-header {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  padding: 10px 15px;\n  background: #3c3c3c;\n  cursor: pointer;\n  transition: background-color 0.2s ease;\n  min-height: 35px;\n}\n\n.module-header:hover {\n  background: #4a4a4a;\n}\n\n.expand-icon {\n  font-size: 10px;\n  color: #858585;\n  width: 14px;\n  text-align: center;\n}\n\n.module-name {\n  font-weight: 600;\n  color: #ffffff;\n  flex: 1;\n  font-size: 14px;\n}\n\n.module-stats {\n  font-size: 10px;\n  color: #858585;\n  background: #2d2d30;\n  padding: 3px 6px;\n  border-radius: 3px;\n}\n\n.module-content {\n  padding: 0 15px;\n}\n\n.script-container {\n  margin: 8px 0;\n  border-left: 2px solid #3e3e42;\n  padding-left: 12px;\n}\n\n.script-header {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  padding: 8px 12px;\n  background: #2d2d30;\n  border: 1px solid #3e3e42;\n  border-radius: 4px;\n  cursor: pointer;\n  transition: background-color 0.2s ease;\n  min-height: 30px;\n}\n\n.script-header:hover {\n  background: #3c3c3c;\n}\n\n.script-name {\n  font-weight: 500;\n  color: #cccccc;\n  flex: 1;\n  font-size: 13px;\n}\n\n.script-stats {\n  font-size: 10px;\n  color: #858585;\n  background: #3c3c3c;\n  padding: 3px 6px;\n  border-radius: 3px;\n}\n\n.script-content {\n  padding: 12px 0;\n}\n\n.data-category {\n  margin-bottom: 15px;\n}\n\n.data-category h4 {\n  margin: 0 0 8px 0;\n  font-size: 12px;\n  font-weight: 600;\n  color: #cccccc;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.monitoring-data-item {\n  background: #2d2d30;\n  border: 1px solid #3e3e42;\n  border-radius: 4px;\n  margin-bottom: 6px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.monitoring-data-item:hover {\n  border-color: #007acc;\n  box-shadow: 0 2px 6px rgba(0, 122, 204, 0.15);\n}\n\n.monitoring-data-item.monitoring-data-variable {\n  border-left: 3px solid #4ec9b0;\n}\n\n.monitoring-data-item.monitoring-data-state {\n  border-left: 3px solid #007acc;\n}\n\n.monitoring-data-item.monitoring-data-function {\n  border-left: 3px solid #dcdcaa;\n}\n\n.monitoring-data-item.monitoring-data-property {\n  border-left: 3px solid #c586c0;\n}\n\n.monitoring-data-item.monitoring-data-event {\n  border-left: 3px solid #ce9178;\n}\n\n.data-header {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  padding: 8px 12px;\n  border-bottom: 1px solid #3c3c3c;\n  min-height: 30px;\n}\n\n.data-name {\n  font-weight: 500;\n  color: #ffffff;\n  flex: 1;\n  font-size: 13px;\n}\n\n.data-type {\n  font-size: 9px;\n  font-weight: 600;\n  text-transform: uppercase;\n  padding: 2px 5px;\n  border-radius: 3px;\n  letter-spacing: 0.5px;\n}\n\n.data-type-variable {\n  background: #1e4e4e;\n  color: #4ec9b0;\n}\n\n.data-type-state {\n  background: #1e3a5f;\n  color: #007acc;\n}\n\n.data-type-function {\n  background: #5f5f1e;\n  color: #dcdcaa;\n}\n\n.data-type-property {\n  background: #4e1e4e;\n  color: #c586c0;\n}\n\n.data-type-event {\n  background: #5f3e1e;\n  color: #ce9178;\n}\n\n.data-time {\n  font-size: 10px;\n  color: #858585;\n}\n\n.data-content {\n  padding: 8px 12px;\n}\n\n.data-value,\n.data-previous {\n  display: flex;\n  align-items: flex-start;\n  gap: 6px;\n  margin-bottom: 6px;\n}\n\n.value-label {\n  font-size: 10px;\n  color: #858585;\n  min-width: 50px;\n  font-weight: 500;\n}\n\n.value-content {\n  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n  font-size: 11px;\n  padding: 3px 6px;\n  border-radius: 3px;\n  background: #3c3c3c;\n  border: 1px solid #3e3e42;\n  flex: 1;\n  word-break: break-all;\n  color: #cccccc;\n}\n\n.value-string {\n  color: #ce9178;\n  background: #3c2a1e;\n}\n\n.value-number {\n  color: #b5cea8;\n  background: #2e3c2e;\n}\n\n.value-boolean {\n  color: #569cd6;\n  background: #1e3a5f;\n}\n\n.value-object,\n.value-array {\n  color: #dcdcaa;\n  background: #5f5f1e;\n}\n\n.value-null,\n.value-undefined {\n  color: #858585;\n  background: #3c3c3c;\n}\n\n.data-metadata {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 6px;\n  margin-top: 6px;\n  padding-top: 6px;\n  border-top: 1px solid #3c3c3c;\n}\n\n.metadata-item {\n  font-size: 9px;\n  color: #858585;\n  background: #3c3c3c;\n  padding: 2px 5px;\n  border-radius: 3px;\n}\n\n/* Table View - More Compact */\n.monitoring-table {\n  background: #2d2d30;\n  border-radius: 6px;\n  overflow: auto;\n  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.3);\n  max-height: none;\n  display: flex;\n  flex-direction: column;\n}\n\n.monitoring-table table {\n  width: 100%;\n  border-collapse: collapse;\n  flex: 1;\n}\n\n.monitoring-table thead {\n  position: sticky;\n  top: 0;\n  z-index: 10;\n  background: #3c3c3c;\n  border-bottom: 2px solid #3e3e42;\n}\n\n.monitoring-table th {\n  background: #3c3c3c;\n  padding: 8px 12px;\n  text-align: left;\n  font-weight: 600;\n  color: #ffffff;\n  border-bottom: 2px solid #3e3e42;\n  font-size: 12px;\n  cursor: pointer;\n  user-select: none;\n  transition: all 0.2s ease;\n  position: sticky;\n  top: 0;\n  z-index: 10;\n}\n\n.monitoring-table th:hover {\n  background: #4a4a4a;\n  color: #007acc;\n}\n\n.monitoring-table th:active {\n  background: #5a5a5a;\n  transform: translateY(1px);\n}\n\n.monitoring-table th.sortable {\n  padding-right: 20px;\n}\n\n.monitoring-table th .sort-indicator {\n  font-size: 10px;\n  opacity: 0.6;\n  margin-left: 4px;\n  transition: opacity 0.2s ease;\n}\n\n.monitoring-table th:hover .sort-indicator {\n  opacity: 1;\n}\n\n.monitoring-table th.sorted .sort-indicator {\n  opacity: 1;\n  color: #007acc;\n}\n\n.monitoring-table tbody {\n  background: #2d2d30;\n}\n\n.monitoring-table td {\n  padding: 8px 12px;\n  border-bottom: 1px solid #3c3c3c;\n  font-size: 12px;\n  color: #cccccc;\n}\n\n.table-context {\n  max-width: 200px;\n  padding: 8px 12px;\n}\n\n.context-info {\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n  font-size: 11px;\n}\n\n.context-file,\n.context-function,\n.context-duration {\n  display: inline-flex;\n  align-items: center;\n  gap: 4px;\n  padding: 1px 4px;\n  border-radius: 3px;\n  background: rgba(76, 175, 80, 0.1);\n  color: #81c784;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.context-function {\n  background: rgba(33, 150, 243, 0.1);\n  color: #64b5f6;\n}\n\n.context-duration {\n  background: rgba(255, 152, 0, 0.1);\n  color: #ffb74d;\n}\n\n.table-row {\n  cursor: pointer;\n  transition: background-color 0.2s ease;\n}\n\n.table-row:hover {\n  background: #3c3c3c;\n}\n\n.table-row.table-row-variable {\n  border-left: 3px solid #4ec9b0;\n}\n\n.table-row.table-row-state {\n  border-left: 3px solid #007acc;\n}\n\n.table-row.table-row-function {\n  border-left: 3px solid #dcdcaa;\n}\n\n.table-row.table-row-property {\n  border-left: 3px solid #c586c0;\n}\n\n.table-row.table-row-event {\n  border-left: 3px solid #ce9178;\n}\n\n.table-module {\n  font-weight: 600;\n  color: #ffffff;\n}\n\n.table-script {\n  color: #cccccc;\n  font-weight: 500;\n}\n\n.table-name {\n  font-weight: 500;\n  color: #ffffff;\n}\n\n.table-time {\n  color: #858585;\n  font-size: 11px;\n}\n\n.table-type {\n  font-size: 9px;\n  font-weight: 600;\n  text-transform: uppercase;\n  padding: 2px 5px;\n  border-radius: 3px;\n  letter-spacing: 0.5px;\n}\n\n.table-type-variable {\n  background: #1e4e4e;\n  color: #4ec9b0;\n}\n\n.table-type-state {\n  background: #1e3a5f;\n  color: #007acc;\n}\n\n.table-type-function {\n  background: #5f5f1e;\n  color: #dcdcaa;\n}\n\n.table-type-property {\n  background: #4e1e4e;\n  color: #c586c0;\n}\n\n.table-type-event {\n  background: #5f3e1e;\n  color: #ce9178;\n}\n\n.table-value {\n  max-width: 150px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  color: #cccccc;\n  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n  font-size: 11px;\n}\n\n/* Timeline View - More Compact */\n.monitoring-timeline {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.timeline-item {\n  display: flex;\n  gap: 12px;\n  background: #2d2d30;\n  border: 1px solid #3e3e42;\n  border-radius: 6px;\n  padding: 10px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.timeline-item:hover {\n  border-color: #007acc;\n  box-shadow: 0 2px 6px rgba(0, 122, 204, 0.15);\n}\n\n.timeline-item.timeline-variable {\n  border-left: 3px solid #4ec9b0;\n}\n\n.timeline-item.timeline-state {\n  border-left: 3px solid #007acc;\n}\n\n.timeline-item.timeline-function {\n  border-left: 3px solid #dcdcaa;\n}\n\n.timeline-item.timeline-property {\n  border-left: 3px solid #c586c0;\n}\n\n.timeline-item.timeline-event {\n  border-left: 3px solid #ce9178;\n}\n\n.timeline-time {\n  font-size: 10px;\n  color: #858585;\n  min-width: 60px;\n  text-align: center;\n  padding-top: 2px;\n}\n\n.timeline-content {\n  flex: 1;\n}\n\n.timeline-header {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  margin-bottom: 6px;\n}\n\n.timeline-module {\n  font-weight: 600;\n  color: #ffffff;\n  font-size: 13px;\n}\n\n.timeline-script {\n  font-size: 10px;\n  color: #858585;\n}\n\n.timeline-name {\n  font-weight: 500;\n  color: #cccccc;\n  flex: 1;\n  font-size: 12px;\n}\n\n.timeline-type {\n  font-size: 9px;\n  font-weight: 600;\n  text-transform: uppercase;\n  padding: 2px 5px;\n  border-radius: 3px;\n  letter-spacing: 0.5px;\n}\n\n.timeline-type-variable {\n  background: #1e4e4e;\n  color: #4ec9b0;\n}\n\n.timeline-type-state {\n  background: #1e3a5f;\n  color: #007acc;\n}\n\n.timeline-type-function {\n  background: #5f5f1e;\n  color: #dcdcaa;\n}\n\n.timeline-type-property {\n  background: #4e1e4e;\n  color: #c586c0;\n}\n\n.timeline-type-event {\n  background: #5f3e1e;\n  color: #ce9178;\n}\n\n.timeline-value {\n  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n  font-size: 11px;\n  color: #cccccc;\n  background: #3c3c3c;\n  padding: 6px 10px;\n  border-radius: 3px;\n  border: 1px solid #3e3e42;\n  word-break: break-all;\n}\n\n/* Detail Panel - More Compact */\n.monitoring-detail {\n  width: 350px;\n  background: #2d2d30;\n  border-left: 1px solid #3e3e42;\n  display: flex;\n  flex-direction: column;\n}\n\n.detail-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 12px 16px;\n  border-bottom: 1px solid #3e3e42;\n  background: #3c3c3c;\n  min-height: 45px;\n}\n\n.detail-header-controls {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.detail-header h3 {\n  margin: 0;\n  font-size: 16px;\n  font-weight: 600;\n  color: #ffffff;\n}\n\n.copy-btn {\n  background: #007acc;\n  border: none;\n  color: #ffffff;\n  cursor: pointer;\n  padding: 6px 12px;\n  font-size: 12px;\n  border-radius: 4px;\n  transition: background-color 0.2s ease;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n\n.copy-btn:hover {\n  background: #005a9e;\n}\n\n.copy-btn:active {\n  background: #004578;\n}\n\n.close-btn {\n  background: none;\n  border: none;\n  font-size: 20px;\n  color: #858585;\n  cursor: pointer;\n  padding: 0;\n  width: 20px;\n  height: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 3px;\n  transition: background-color 0.2s ease;\n}\n\n.close-btn:hover {\n  background: #4a4a4a;\n  color: #cccccc;\n}\n\n.detail-content {\n  flex: 1;\n  overflow: auto;\n  padding: 15px 16px;\n  background: #2d2d30;\n}\n\n.detail-section {\n  margin-bottom: 20px;\n}\n\n.detail-section h4 {\n  margin: 0 0 12px 0;\n  font-size: 14px;\n  font-weight: 600;\n  color: #cccccc;\n  border-bottom: 1px solid #3e3e42;\n  padding-bottom: 6px;\n}\n\n.detail-item {\n  display: flex;\n  margin-bottom: 10px;\n}\n\n.detail-label {\n  font-weight: 500;\n  color: #858585;\n  min-width: 80px;\n  font-size: 12px;\n}\n\n.detail-value {\n  flex: 1;\n  font-size: 12px;\n  color: #ffffff;\n}\n\n.detail-type-variable {\n  color: #4ec9b0;\n  font-weight: 500;\n}\n\n.detail-type-state {\n  color: #007acc;\n  font-weight: 500;\n}\n\n.detail-type-function {\n  color: #dcdcaa;\n  font-weight: 500;\n}\n\n.detail-type-property {\n  color: #c586c0;\n  font-weight: 500;\n}\n\n.detail-type-event {\n  color: #ce9178;\n  font-weight: 500;\n}\n\n.detail-value-container {\n  flex: 1;\n}\n\n.detail-value-string {\n  color: #ce9178;\n  background: #3c2a1e;\n  padding: 3px 6px;\n  border-radius: 3px;\n  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n  font-size: 11px;\n}\n\n.detail-value-number {\n  color: #b5cea8;\n  background: #2e3c2e;\n  padding: 3px 6px;\n  border-radius: 3px;\n  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n  font-size: 11px;\n}\n\n.detail-value-boolean {\n  color: #569cd6;\n  background: #1e3a5f;\n  padding: 3px 6px;\n  border-radius: 3px;\n  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n  font-size: 11px;\n}\n\n.detail-value-object,\n.detail-value-array {\n  color: #dcdcaa;\n  background: #5f5f1e;\n  padding: 3px 6px;\n  border-radius: 3px;\n  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n  font-size: 11px;\n  white-space: pre-wrap;\n  max-height: 150px;\n  overflow: auto;\n}\n\n.detail-value-null,\n.detail-value-undefined {\n  color: #858585;\n  background: #3c3c3c;\n  padding: 3px 6px;\n  border-radius: 3px;\n  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n  font-size: 11px;\n}\n\n.detail-error {\n  color: #f44747;\n  background: #3c1e1e;\n  padding: 3px 6px;\n  border-radius: 3px;\n  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n  font-size: 11px;\n}\n\n.detail-stack {\n  background: #3c3c3c;\n  border: 1px solid #3e3e42;\n  border-radius: 3px;\n  padding: 8px;\n  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n  font-size: 10px;\n  color: #cccccc;\n  white-space: pre-wrap;\n  max-height: 150px;\n  overflow: auto;\n  margin: 0;\n}\n\n/* Responsive Design */\n@media (max-width: 1200px) {\n  .monitoring-detail {\n    width: 300px;\n  }\n}\n\n@media (max-width: 768px) {\n  .monitoring-header {\n    flex-direction: column;\n    gap: 10px;\n    align-items: flex-start;\n    padding: 10px 15px;\n  }\n  \n  .header-controls {\n    width: 100%;\n    justify-content: space-between;\n  }\n  \n  .monitoring-stats {\n    flex-wrap: wrap;\n    gap: 8px;\n    padding: 8px 15px;\n  }\n  \n  .monitoring-filters {\n    flex-direction: column;\n    align-items: stretch;\n    gap: 10px;\n    padding: 10px 15px;\n  }\n  \n  .filter-group {\n    justify-content: space-between;\n  }\n  \n  .monitoring-content {\n    flex-direction: column;\n  }\n  \n  .monitoring-detail {\n    width: 100%;\n    height: 250px;\n    border-left: none;\n    border-top: 1px solid #3e3e42;\n  }\n  \n  .monitoring-table {\n    overflow-x: auto;\n    max-height: none;\n  }\n  \n  .monitoring-table table {\n    min-width: 700px;\n  }\n  \n  .monitoring-table thead {\n    position: sticky;\n    top: 0;\n    z-index: 10;\n    background: #3c3c3c;\n  }\n  \n  .monitoring-table th {\n    position: sticky;\n    top: 0;\n    z-index: 10;\n  }\n}\n\n/* Scrollbar Styling */\n.monitoring-main::-webkit-scrollbar,\n.detail-content::-webkit-scrollbar,\n.monitoring-table::-webkit-scrollbar {\n  width: 6px;\n}\n\n.monitoring-main::-webkit-scrollbar-track,\n.detail-content::-webkit-scrollbar-track,\n.monitoring-table::-webkit-scrollbar-track {\n  background: #2d2d30;\n  border-radius: 3px;\n}\n\n.monitoring-main::-webkit-scrollbar-thumb,\n.detail-content::-webkit-scrollbar-thumb,\n.monitoring-table::-webkit-scrollbar-thumb {\n  background: #5a5a5a;\n  border-radius: 3px;\n}\n\n.monitoring-main::-webkit-scrollbar-thumb:hover,\n.detail-content::-webkit-scrollbar-thumb:hover,\n.monitoring-table::-webkit-scrollbar-thumb:hover {\n  background: #6a6a6a;\n} ",""]);const r=s},430:(e,n,t)=>{t.d(n,{A:()=>r});var a=t(645),i=t.n(a),o=t(278),s=t.n(o)()(i());s.push([e.id,"/* Save System Styles - Visual Studio Dark Mode */\n\n.save-system {\n  position: fixed;\n  left: 0;\n  top: 0;\n  height: 100vh;\n  background: #2d2d30;\n  border-right: 1px solid #3e3e42;\n  z-index: 1000;\n  transition: transform 0.3s ease;\n  display: flex;\n  flex-direction: column;\n  width: 300px;\n  transform: translateX(-100%);\n}\n\n.save-system.open {\n  transform: translateX(0);\n}\n\n.save-system-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 12px 16px;\n  background: #3c3c3c;\n  border-bottom: 1px solid #3e3e42;\n  min-height: 50px;\n}\n\n.save-system-header h3 {\n  margin: 0;\n  font-size: 16px;\n  font-weight: 600;\n  color: #ffffff;\n}\n\n.toggle-btn {\n  background: none;\n  border: none;\n  color: #cccccc;\n  font-size: 14px;\n  cursor: pointer;\n  padding: 4px 8px;\n  border-radius: 3px;\n  transition: background-color 0.2s ease;\n}\n\n.toggle-btn:hover {\n  background: #4a4a4a;\n}\n\n.save-system-content {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n\n/* Search and Filter Section */\n.search-filter-section {\n  padding: 12px 16px;\n  border-bottom: 1px solid #3e3e42;\n  background: #2d2d30;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.search-input {\n  flex: 1;\n  min-width: 200px;\n  padding: 8px 12px;\n  border: 1px solid #3e3e42;\n  border-radius: 4px;\n  background: #3c3c3c;\n  color: #cccccc;\n  font-size: 12px;\n}\n\n.search-input:focus {\n  outline: none;\n  border-color: #007acc;\n  box-shadow: 0 0 0 2px rgba(0, 122, 204, 0.25);\n}\n\n.search-input::placeholder {\n  color: #858585;\n}\n\n/* Stats Section */\n.stats {\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n  align-items: center;\n}\n\n.stat {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  font-size: 11px;\n  color: #cccccc;\n}\n\n.stat-label {\n  color: #858585;\n  font-weight: 500;\n}\n\n.stat-value {\n  font-weight: 600;\n  font-family: 'Consolas', 'Monaco', 'Courier New', monospace;\n}\n\n.stat-value.info {\n  color: #4ec9b0;\n}\n\n.stat-value.warn {\n  color: #ffcc00;\n}\n\n.stat-value.error {\n  color: #ff6b6b;\n}\n\n.stat-value.debug {\n  color: #9cdcfe;\n}\n\n.filter-select {\n  min-width: 120px;\n  padding: 6px 10px;\n  border: 1px solid #3e3e42;\n  border-radius: 4px;\n  background: #3c3c3c;\n  color: #cccccc;\n  font-size: 12px;\n}\n\n.filter-select:focus {\n  outline: none;\n  border-color: #007acc;\n}\n\n/* New Item Section */\n.new-item-section {\n  padding: 12px 16px;\n  border-bottom: 1px solid #3e3e42;\n  background: #2d2d30;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.new-item-btn {\n  width: 100%;\n  padding: 8px 12px;\n  background: #007acc;\n  border: none;\n  color: #ffffff;\n  border-radius: 4px;\n  font-size: 12px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: background-color 0.2s ease;\n}\n\n.new-item-btn:hover {\n  background: #005a9e;\n}\n\n.import-btn {\n  width: 100%;\n  padding: 8px 12px;\n  background: #4a90e2;\n  border: none;\n  color: #ffffff;\n  border-radius: 4px;\n  font-size: 12px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: background-color 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 4px;\n}\n\n.import-btn:hover {\n  background: #357ab8;\n}\n\n.new-item-form {\n  margin-top: 12px;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.new-item-input {\n  padding: 6px 10px;\n  border: 1px solid #3e3e42;\n  border-radius: 4px;\n  background: #3c3c3c;\n  color: #cccccc;\n  font-size: 12px;\n}\n\n.new-item-input:focus {\n  outline: none;\n  border-color: #007acc;\n}\n\n.new-item-type-select {\n  padding: 6px 10px;\n  border: 1px solid #3e3e42;\n  border-radius: 4px;\n  background: #3c3c3c;\n  color: #cccccc;\n  font-size: 12px;\n}\n\n.new-item-type-select optgroup {\n  font-weight: 600;\n  color: #858585;\n}\n\n.new-item-type-select option {\n  color: #cccccc;\n  background: #3c3c3c;\n}\n\n.create-btn {\n  padding: 6px 12px;\n  background: #4ec9b0;\n  border: none;\n  color: #ffffff;\n  border-radius: 4px;\n  font-size: 12px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: background-color 0.2s ease;\n}\n\n.create-btn:hover:not(:disabled) {\n  background: #3ba892;\n}\n\n.create-btn:disabled {\n  background: #5a5a5a;\n  cursor: not-allowed;\n}\n\n/* Tree Container */\n.tree-container {\n  flex: 1;\n  overflow-y: auto;\n  padding: 8px 0;\n}\n\n.empty-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 200px;\n  color: #858585;\n  text-align: center;\n  padding: 20px;\n}\n\n.empty-state p {\n  margin: 4px 0;\n  font-size: 12px;\n}\n\n/* Tree Items */\n.tree-item-container {\n  margin: 2px 0;\n}\n\n.tree-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 6px 16px;\n  cursor: pointer;\n  transition: background-color 0.2s ease;\n  min-height: 32px;\n}\n\n.tree-item:hover {\n  background: #3c3c3c;\n}\n\n.tree-item.selected {\n  background: #007acc;\n  color: #ffffff;\n}\n\n.tree-item-content {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  flex: 1;\n}\n\n.expand-icon {\n  font-size: 10px;\n  color: #858585;\n  width: 12px;\n  text-align: center;\n  cursor: pointer;\n  transition: color 0.2s ease;\n}\n\n.expand-icon:hover {\n  color: #cccccc;\n}\n\n.expand-icon.hidden {\n  visibility: hidden;\n}\n\n.item-icon {\n  font-size: 14px;\n  width: 16px;\n  text-align: center;\n}\n\n.item-name {\n  font-size: 12px;\n  color: inherit;\n  flex: 1;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  font-family: 'Consolas', 'Monaco', 'Courier New', monospace;\n}\n\n/* Rename Input */\n.rename-input {\n  font-size: 12px;\n  color: inherit;\n  background: transparent;\n  border: 1px solid #007acc;\n  border-radius: 2px;\n  padding: 2px 4px;\n  font-family: 'Consolas', 'Monaco', 'Courier New', monospace;\n  outline: none;\n  flex: 1;\n}\n\n.rename-input:focus {\n  border-color: #4ec9b0;\n  box-shadow: 0 0 0 1px #4ec9b0;\n}\n\n.item-actions {\n  display: flex;\n  gap: 4px;\n  opacity: 0;\n  transition: opacity 0.2s ease;\n}\n\n.tree-item:hover .item-actions,\n.tree-item.selected .item-actions {\n  opacity: 1;\n}\n\n.action-btn {\n  background: none;\n  border: none;\n  color: inherit;\n  font-size: 12px;\n  cursor: pointer;\n  padding: 2px 4px;\n  border-radius: 2px;\n  transition: background-color 0.2s ease;\n}\n\n.action-btn:hover {\n  background: rgba(255, 255, 255, 0.1);\n}\n\n.tree-children {\n  margin-left: 0;\n}\n\n/* Context Menu */\n.context-menu {\n  position: fixed;\n  background: #2d2d30;\n  border: 1px solid #3e3e42;\n  border-radius: 6px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n  z-index: 10000;\n  min-width: 160px;\n  padding: 4px 0;\n}\n\n.context-menu-item {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 8px 12px;\n  cursor: pointer;\n  font-size: 12px;\n  color: #cccccc;\n  transition: background-color 0.2s ease;\n}\n\n.context-menu-item:hover {\n  background: #3c3c3c;\n}\n\n.context-menu-item.context-menu-item-danger:hover {\n  background: #5a2a2a;\n  color: #ff6b6b;\n}\n\n.context-menu-icon {\n  font-size: 14px;\n  width: 16px;\n  text-align: center;\n}\n\n.context-menu-separator {\n  height: 1px;\n  background: #3e3e42;\n  margin: 4px 0;\n}\n\n/* Submenu styles */\n.context-menu-item-submenu {\n  position: relative;\n}\n\n.context-menu-arrow {\n  margin-left: auto;\n  font-size: 10px;\n  color: #858585;\n  transition: transform 0.2s ease;\n}\n\n.context-menu-item-submenu:hover .context-menu-arrow {\n  transform: rotate(90deg);\n}\n\n.context-submenu {\n  position: absolute;\n  left: 100%;\n  top: 0;\n  background: #2d2d30;\n  border: 1px solid #3e3e42;\n  border-radius: 6px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n  min-width: 160px;\n  padding: 4px 0;\n  opacity: 0;\n  visibility: hidden;\n  transition: opacity 0.2s ease, visibility 0.2s ease;\n  z-index: 10001;\n}\n\n.context-menu-item-submenu:hover .context-submenu {\n  opacity: 1;\n  visibility: visible;\n}\n\n.context-submenu .context-menu-item {\n  padding: 6px 12px;\n  font-size: 11px;\n}\n\n/* Selected Item Details */\n.selected-item-details {\n  padding: 12px 16px;\n  border-top: 1px solid #3e3e42;\n  background: #2d2d30;\n}\n\n.selected-item-details h4 {\n  margin: 0 0 8px 0;\n  font-size: 14px;\n  font-weight: 600;\n  color: #ffffff;\n  font-family: 'Consolas', 'Monaco', 'Courier New', monospace;\n}\n\n.item-type {\n  margin: 0 0 8px 0;\n  font-size: 11px;\n  color: #858585;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.item-description {\n  margin: 0 0 8px 0;\n  font-size: 11px;\n  color: #cccccc;\n  line-height: 1.4;\n}\n\n.item-metadata {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.item-metadata span {\n  font-size: 10px;\n  color: #858585;\n}\n\n.active-profile-indicator {\n  margin-top: 8px;\n  padding: 6px 8px;\n  background: rgba(52, 152, 219, 0.1);\n  border: 1px solid rgba(52, 152, 219, 0.3);\n  border-radius: 4px;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n}\n\n.active-profile-label {\n  font-size: 10px;\n  color: #3498db;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.active-profile-name {\n  font-size: 11px;\n  color: #ffffff;\n  font-weight: 500;\n}\n\n/* Bottom Editor Drawer */\n.save-editor {\n  position: fixed;\n  left: var(--save-editor-left, 300px);\n  bottom: 0;\n  width: var(--save-editor-width, calc(100vw - 300px));\n  height: 60vh;\n  min-height: 300px;\n  max-height: 80vh;\n  background: #2d2d30;\n  border-top: 1px solid #3e3e42;\n  border-left: 1px solid #3e3e42;\n  z-index: 1001;\n  display: flex;\n  flex-direction: column;\n  transform: translateY(100%);\n  transition: transform 0.3s ease, left 0.3s ease, width 0.3s ease;\n  box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.3);\n  resize: vertical;\n  overflow: hidden;\n}\n\n.save-editor.open {\n  transform: translateY(0);\n}\n\n/* When save system is closed, editor takes full width */\n.save-system:not(.open) ~ .save-editor {\n  left: 0;\n  width: 100vw;\n}\n\n.save-editor.open::before {\n  content: '';\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.1);\n  z-index: -1;\n  pointer-events: none;\n}\n\n.save-editor-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 12px 16px;\n  background: #3c3c3c;\n  border-bottom: 1px solid #3e3e42;\n  min-height: 50px;\n  cursor: grab;\n}\n\n.save-editor-header:active {\n  cursor: grabbing;\n}\n\n.save-editor-header h3 {\n  margin: 0;\n  font-size: 16px;\n  font-weight: 600;\n  color: #ffffff;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.editable-title {\n  cursor: pointer;\n  padding: 2px 4px;\n  border-radius: 3px;\n  transition: background-color 0.2s ease;\n}\n\n.editable-title:hover {\n  background-color: rgba(255, 255, 255, 0.1);\n}\n\n.title-edit-input {\n  background: transparent;\n  border: 1px solid #007acc;\n  border-radius: 3px;\n  color: #ffffff;\n  font-size: 16px;\n  font-weight: 600;\n  font-family: inherit;\n  padding: 2px 6px;\n  outline: none;\n  min-width: 100px;\n}\n\n.title-edit-input:focus {\n  border-color: #007acc;\n  box-shadow: 0 0 0 2px rgba(0, 122, 204, 0.3);\n}\n\n.parent-profile-name {\n  font-size: 12px;\n  color: #858585;\n  font-weight: normal;\n  margin-left: 8px;\n}\n\n.save-editor-header h3::before {\n  content: \"⋮⋮\";\n  font-size: 14px;\n  color: #858585;\n  cursor: grab;\n}\n\n/* Resize handle indicator */\n.save-editor::after {\n  content: \"\";\n  position: absolute;\n  top: 0;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 40px;\n  height: 4px;\n  background: #3e3e42;\n  border-radius: 2px;\n  cursor: ns-resize;\n  z-index: 1002;\n}\n\n.close-btn {\n  background: none;\n  border: none;\n  color: #cccccc;\n  font-size: 18px;\n  cursor: pointer;\n  padding: 4px 8px;\n  border-radius: 3px;\n  transition: background-color 0.2s ease;\n}\n\n.close-btn:hover {\n  background: #4a4a4a;\n}\n\n.save-editor-content {\n  flex: 1;\n  overflow-y: auto;\n  padding: 20px;\n  min-height: 0; /* Allow flex item to shrink */\n}\n\n.editor-section {\n  margin-bottom: 20px;\n}\n\n.editor-section h4 {\n  margin: 0 0 12px 0;\n  font-size: 14px;\n  font-weight: 600;\n  color: #ffffff;\n  border-bottom: 1px solid #3e3e42;\n  padding-bottom: 8px;\n}\n\n.editor-section label {\n  display: block;\n  margin-bottom: 8px;\n  font-size: 13px;\n  color: #cccccc;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.editor-section input,\n.editor-section textarea,\n.editor-section select {\n  width: 100%;\n  padding: 10px 14px;\n  border: 1px solid #3e3e42;\n  border-radius: 4px;\n  background: #3c3c3c;\n  color: #cccccc;\n  font-size: 13px;\n  font-family: 'Consolas', 'Monaco', 'Courier New', monospace;\n  box-sizing: border-box;\n}\n\n.editor-section input:focus,\n.editor-section textarea:focus,\n.editor-section select:focus {\n  outline: none;\n  border-color: #007acc;\n  box-shadow: 0 0 0 2px rgba(0, 122, 204, 0.25);\n}\n\n.editor-section textarea {\n  resize: vertical;\n  min-height: 60px;\n}\n\n/* Comparison Editor */\n.comparison-inputs {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n\n.comparison-inputs > div {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n/* Highlight Editor */\n.highlight-inputs {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n\n.highlight-inputs > div {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.highlight-inputs input[type=\"color\"] {\n  width: 60px;\n  height: 32px;\n  padding: 0;\n  border: 1px solid #3e3e42;\n  border-radius: 4px;\n  cursor: pointer;\n}\n\n/* Editor Actions */\n.editor-actions {\n  display: flex;\n  gap: 12px;\n  margin-top: 24px;\n  padding-top: 16px;\n  border-top: 1px solid #3e3e42;\n}\n\n.save-btn {\n  flex: 1;\n  padding: 10px 16px;\n  background: #4ec9b0;\n  border: none;\n  color: #ffffff;\n  border-radius: 4px;\n  font-size: 14px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: background-color 0.2s ease;\n}\n\n.save-btn:hover {\n  background: #3ba892;\n}\n\n.cancel-btn {\n  flex: 1;\n  padding: 10px 16px;\n  background: #5a5a5a;\n  border: none;\n  color: #ffffff;\n  border-radius: 4px;\n  font-size: 14px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: background-color 0.2s ease;\n}\n\n.cancel-btn:hover {\n  background: #4a4a4a;\n}\n\n/* Scrollbar Styling */\n.tree-container::-webkit-scrollbar,\n.save-editor-content::-webkit-scrollbar {\n  width: 6px;\n}\n\n.tree-container::-webkit-scrollbar-track,\n.save-editor-content::-webkit-scrollbar-track {\n  background: #2d2d30;\n}\n\n.tree-container::-webkit-scrollbar-thumb,\n.save-editor-content::-webkit-scrollbar-thumb {\n  background: #5a5a5a;\n  border-radius: 3px;\n}\n\n.tree-container::-webkit-scrollbar-thumb:hover,\n.save-editor-content::-webkit-scrollbar-thumb:hover {\n  background: #6a6a6a;\n}\n\n/* Responsive Design */\n@media (max-width: 768px) {\n  .save-system {\n    width: 280px;\n  }\n  \n  .save-editor {\n    --save-editor-left: 280px;\n    --save-editor-width: calc(100vw - 280px);\n    height: 70vh;\n  }\n  \n  .save-system-header,\n  .save-editor-header {\n    padding: 10px 12px;\n  }\n  \n  .search-filter-section,\n  .new-item-section,\n  .selected-item-details,\n  .save-editor-content {\n    padding: 10px 12px;\n  }\n  \n  .tree-item {\n    padding: 6px 12px;\n  }\n} ",""]);const r=s},457:(e,n,t)=>{t.d(n,{A:()=>r});var a=t(645),i=t.n(a),o=t(278),s=t.n(o)()(i());s.push([e.id,".app-container {\n  min-height: 100vh;\n  display: flex;\n  background-color: #1a1a1a;\n  color: #ffffff;\n}\n\n.app {\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n  background-color: #1a1a1a;\n  color: #ffffff;\n  flex: 1;\n}\n\n.main-content {\n  flex: 1;\n  transition: margin-left 0.3s ease;\n  overflow: visible;\n}\n\n.main-content.with-save-system {\n  margin-left: 300px;\n}\n\n/* Header */\n.header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 8px 16px;\n  background-color: #2d2d2d;\n  border-bottom: 1px solid #404040;\n  flex-shrink: 0;\n}\n\n.header-controls {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n}\n\n.view-toggle {\n  display: flex;\n  gap: 8px;\n  align-items: center;\n}\n\n.view-separator {\n  width: 1px;\n  height: 20px;\n  background-color: rgba(255, 255, 255, 0.2);\n  margin: 0 4px;\n}\n\n.save-system-toggle-btn {\n  background: rgba(255, 255, 255, 0.1);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  color: white;\n  padding: 8px 12px;\n  border-radius: 6px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  font-size: 16px;\n}\n\n.save-system-toggle-btn:hover {\n  background: rgba(255, 255, 255, 0.2);\n}\n\n.view-btn {\n  background: rgba(255, 255, 255, 0.1);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  color: white;\n  padding: 8px 16px;\n  border-radius: 6px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  font-size: 14px;\n}\n\n.view-btn:hover {\n  background: rgba(255, 255, 255, 0.2);\n}\n\n.view-btn.active {\n  background: #3498db;\n  border-color: #3498db;\n}\n\n.header-left {\n  display: flex;\n  align-items: center;\n  gap: 20px;\n}\n\n.header-left h1 {\n  margin: 0;\n  font-size: 18px;\n  font-weight: 600;\n  color: #ffffff;\n}\n\n.header h1 {\n  margin: 0;\n  font-size: 18px;\n  font-weight: 600;\n  color: #ffffff;\n}\n\n.connection-status {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 14px;\n}\n\n.status-dot {\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n}\n\n.status-dot.connected {\n  background-color: #34C759;\n}\n\n.status-dot.disconnected {\n  background-color: #FF3B30;\n}\n\n.error {\n  color: #FF3B30;\n}\n\n.header-right {\n  display: flex;\n  gap: 12px;\n}\n\n.header-right button {\n  padding: 8px 16px;\n  background-color: #007AFF;\n  color: white;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 500;\n  transition: background-color 0.2s;\n}\n\n.header-right button:hover:not(:disabled) {\n  background-color: #0056CC;\n}\n\n.header-right button:disabled {\n  background-color: #666;\n  cursor: not-allowed;\n}\n\n/* Stats Bar */\n.stats-bar {\n  display: flex;\n  align-items: center;\n  gap: 24px;\n  padding: 12px 24px;\n  background-color: #2d2d2d;\n  border-bottom: 1px solid #404040;\n  flex-shrink: 0;\n  font-size: 14px;\n}\n\n.stats {\n  display: flex;\n  align-items: center;\n  gap: 24px;\n  padding: 12px 24px;\n  background-color: #2d2d2d;\n  border-bottom: 1px solid #404040;\n  flex-shrink: 0;\n  font-size: 14px;\n}\n\n.stat {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.stat-label {\n  color: #999;\n}\n\n.stat-value {\n  font-weight: 600;\n  color: #ffffff;\n}\n\n.stat-value.info {\n  color: #007AFF;\n}\n\n.stat-value.warn {\n  color: #FF9500;\n}\n\n.stat-value.error {\n  color: #FF3B30;\n}\n\n.stat-value.debug {\n  color: #34C759;\n}\n\n.auto-refresh {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-left: auto;\n}\n\n.auto-refresh label {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  cursor: pointer;\n}\n\n.auto-refresh input[type=\"checkbox\"] {\n  margin: 0;\n}\n\n.auto-refresh select {\n  padding: 4px 8px;\n  background-color: #404040;\n  color: white;\n  border: 1px solid #666;\n  border-radius: 4px;\n  font-size: 12px;\n}\n\n/* Filters */\n.filters {\n  display: flex;\n  gap: 16px;\n  padding: 16px 24px;\n  background-color: #2d2d2d;\n  border-bottom: 1px solid #404040;\n  flex-shrink: 0;\n}\n\n.filters select,\n.filters input {\n  padding: 8px 12px;\n  background-color: #404040;\n  color: white;\n  border: 1px solid #666;\n  border-radius: 6px;\n  font-size: 14px;\n}\n\n.filters select:focus,\n.filters input:focus {\n  outline: none;\n  border-color: #007AFF;\n}\n\n.filters input {\n  flex: 1;\n}\n\n.filters input::placeholder {\n  color: #999;\n}\n\n.clear-btn {\n  padding: 8px 16px;\n  background-color: #FF3B30;\n  color: white;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 500;\n  transition: background-color 0.2s;\n}\n\n.clear-btn:hover {\n  background-color: #D70015;\n}\n\n/* Log List */\n.log-list {\n  flex: 1;\n  overflow-y: visible;\n  padding: 0;\n}\n\n.no-logs {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  color: #999;\n  font-size: 16px;\n}\n\n.empty-state {\n  text-align: center;\n  padding: 40px 20px;\n  max-width: 400px;\n}\n\n.empty-state-icon {\n  font-size: 48px;\n  margin-bottom: 16px;\n  opacity: 0.6;\n}\n\n.empty-state-title {\n  font-size: 20px;\n  font-weight: 600;\n  color: #ffffff;\n  margin-bottom: 12px;\n}\n\n.empty-state-description {\n  font-size: 14px;\n  line-height: 1.5;\n  color: #999999;\n}\n\n.log-entry {\n  border-bottom: 1px solid #404040;\n  transition: background-color 0.2s;\n}\n\n.log-entry:hover {\n  background-color: #2d2d2d;\n}\n\n.log-header {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 6px 12px;\n  min-height: 28px;\n  cursor: pointer;\n  user-select: none;\n}\n\n.log-time {\n  font-size: 12px;\n  color: #999;\n  min-width: 80px;\n}\n\n.log-level {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  height: 14px !important;\n  line-height: 14px !important;\n  padding: 0 6px !important;\n  border-radius: 3px !important;\n  font-size: 9px !important;\n  font-weight: 700;\n  text-transform: uppercase;\n  width: 54px;\n  text-align: center;\n  align-self: center;\n}\n\n.log-level.info {\n  background-color: #007AFF;\n  color: white;\n}\n\n.log-level.warn {\n  background-color: #FF9500;\n  color: white;\n}\n\n.log-level.error {\n  background-color: #FF3B30;\n  color: white;\n}\n\n.log-level.debug {\n  background-color: #34C759;\n  color: white;\n}\n\n/* New level: test (blue-green gradient) */\n.log-level.test {\n  background: linear-gradient(90deg, #00bcd4 0%, #4CAF50 100%);\n  color: white;\n}\n\n.log-script {\n  font-size: 12px;\n  color: #999;\n  min-width: 120px;\n  font-family: 'Courier New', monospace;\n}\n\n.log-message {\n  flex: 1;\n  font-size: 14px;\n  color: #ffffff;\n}\n\n.log-toggle {\n  font-size: 12px;\n  color: #999;\n  min-width: 20px;\n  text-align: center;\n}\n\n.log-details {\n  padding: 16px 24px;\n  background-color: #2d2d2d;\n  border-top: 1px solid #404040;\n}\n\n.log-data,\n.log-stack {\n  margin-bottom: 16px;\n}\n\n.log-data strong,\n.log-stack strong {\n  display: block;\n  margin-bottom: 8px;\n  color: #999;\n  font-size: 12px;\n  text-transform: uppercase;\n}\n\n.log-data pre,\n.log-stack pre {\n  background-color: #1a1a1a;\n  padding: 12px;\n  border-radius: 6px;\n  font-size: 12px;\n  color: #ffffff;\n  overflow-x: auto;\n  margin: 0;\n  border: 1px solid #404040;\n}\n\n/* Scrollbar styles removed - using page-level scrolling now */\n\n/* Highlight Styles */\n.highlighted {\n  position: relative;\n  transition: all 0.3s ease;\n}\n\n.highlighted::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  border-radius: inherit;\n  pointer-events: none;\n  z-index: 1;\n  opacity: 0.3;\n  transition: all 0.3s ease;\n}\n\n/* Highlight patterns */\n.highlighted.highlight-pattern-default::before {\n  background: var(--highlight-color, #ffff00);\n}\n\n.highlighted.highlight-pattern-stripes::before {\n  background: repeating-linear-gradient(\n    45deg,\n    var(--highlight-color, #ffff00),\n    var(--highlight-color, #ffff00) 10px,\n    transparent 10px,\n    transparent 20px\n  );\n}\n\n.highlighted.highlight-pattern-dots::before {\n  background-image: radial-gradient(\n    circle,\n    var(--highlight-color, #ffff00) 2px,\n    transparent 2px\n  );\n  background-size: 8px 8px;\n}\n\n.highlighted.highlight-pattern-border::before {\n  background: transparent;\n  border: 3px solid var(--highlight-color, #ffff00);\n  border-radius: 6px;\n}\n\n.highlighted.highlight-pattern-glow::before {\n  background: var(--highlight-color, #ffff00);\n  box-shadow: 0 0 10px var(--highlight-color, #ffff00);\n  opacity: 0.5;\n}\n\n/* Specific highlight styles for different elements */\n.log-entry.highlighted {\n  border-left: 4px solid var(--highlight-color, #ffff00);\n  background-color: rgba(255, 255, 0, 0.1);\n}\n\n.monitoring-data-item.highlighted {\n  border: 2px solid var(--highlight-color, #ffff00);\n  box-shadow: 0 0 8px rgba(255, 255, 0, 0.3);\n}\n\n/* Table row highlighting - prevent pseudo-element from affecting layout */\n.table-row.highlighted {\n  background-color: rgba(255, 255, 0, 0.1);\n  border-left: 4px solid var(--highlight-color, #ffff00);\n}\n\n/* Disable the ::before pseudo-element for table rows to prevent layout shifting */\n.table-row.highlighted::before {\n  display: none;\n}\n\n.timeline-item.highlighted {\n  border: 2px solid var(--highlight-color, #ffff00);\n  box-shadow: 0 0 8px rgba(255, 255, 0, 0.3);\n}\n\n/* Highlight indicator */\n.highlight-indicator {\n  position: absolute;\n  top: 4px;\n  right: 4px;\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  background: var(--highlight-color, #ffff00);\n  z-index: 2;\n  pointer-events: none;\n  box-shadow: 0 0 4px rgba(255, 255, 0, 0.6);\n}\n\n/* Highlight tooltip */\n.highlighted::after {\n  content: attr(data-highlight-name);\n  position: absolute;\n  top: -25px;\n  left: 50%;\n  transform: translateX(-50%);\n  background: rgba(0, 0, 0, 0.8);\n  color: white;\n  padding: 4px 8px;\n  border-radius: 4px;\n  font-size: 12px;\n  white-space: nowrap;\n  opacity: 0;\n  transition: opacity 0.2s ease;\n  pointer-events: none;\n  z-index: 10;\n}\n\n.highlighted:hover::after {\n  opacity: 1;\n} ",""]);const r=s},664:(e,n,t)=>{t.d(n,{A:()=>r});var a=t(645),i=t.n(a),o=t(278),s=t.n(o)()(i());s.push([e.id,"/* Recursive Logs Page Styles - Two Column Layout */\n\n.recursive-logs-page {\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh;\n  background: #1e1e1e;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n  color: #d4d4d4;\n}\n\n/* Header */\n.recursive-logs-header {\n  display: flex;\n  flex-direction: column;\n  padding: 16px 20px;\n  background: #2d2d30;\n  border-bottom: 1px solid #3e3e42;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);\n}\n\n.recursive-logs-header h2 {\n  margin: 0 0 8px 0;\n  font-size: 24px;\n  font-weight: 600;\n  color: #ffffff;\n}\n\n.recursive-logs-description {\n  margin: 0;\n  font-size: 14px;\n  color: #858585;\n  line-height: 1.4;\n}\n\n.recursive-logs-status {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-top: 8px;\n  padding: 8px 12px;\n  background: #3c3c3c;\n  border-radius: 6px;\n  border: 1px solid #4ec9b0;\n}\n\n.status-indicator {\n  font-size: 12px;\n  font-weight: 600;\n  color: #4ec9b0;\n  padding: 2px 8px;\n  background: rgba(78, 201, 176, 0.1);\n  border-radius: 4px;\n}\n\n.status-detail {\n  font-size: 12px;\n  color: #858585;\n}\n\n/* Stats */\n.recursive-logs-stats {\n  display: flex;\n  gap: 16px;\n  padding: 12px 20px;\n  background: #2d2d30;\n  border-bottom: 1px solid #3e3e42;\n  overflow-x: auto;\n}\n\n.stat-card {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  min-width: 80px;\n  padding: 8px 12px;\n  background: #3c3c3c;\n  border-radius: 6px;\n  border: 1px solid #3e3e42;\n}\n\n.stat-number {\n  font-size: 18px;\n  font-weight: 700;\n  color: #4ec9b0;\n  margin-bottom: 4px;\n}\n\n.stat-label {\n  font-size: 11px;\n  color: #858585;\n  text-align: center;\n  line-height: 1.2;\n}\n\n/* Two-Column Content Layout */\n.recursive-logs-content {\n  display: flex;\n  flex: 1;\n  overflow: hidden;\n}\n\n/* Left Column - Table View */\n.recursive-logs-table-column {\n  width: 50%;\n  display: flex;\n  flex-direction: column;\n  border-right: 1px solid #3e3e42;\n  background: #1e1e1e;\n}\n\n.recursive-logs-table-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 12px 16px;\n  background: #2d2d30;\n  border-bottom: 1px solid #3e3e42;\n  flex-shrink: 0;\n}\n\n.recursive-logs-table-header h3 {\n  margin: 0;\n  font-size: 16px;\n  font-weight: 600;\n  color: #ffffff;\n}\n\n.refresh-btn {\n  background: #3c3c3c;\n  border: 1px solid #3e3e42;\n  color: #cccccc;\n  padding: 6px 12px;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 12px;\n  transition: all 0.2s ease;\n}\n\n.refresh-btn:hover:not(:disabled) {\n  background: #4c4c4c;\n  border-color: #5e5e5e;\n}\n\n.refresh-btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.recursive-logs-table {\n  flex: 1;\n  overflow: visible;\n}\n\n.recursive-logs-table table {\n  width: 100%;\n  border-collapse: collapse;\n  font-size: 12px;\n}\n\n.recursive-logs-table thead {\n  position: sticky;\n  top: 0;\n  background: #2d2d30;\n  z-index: 10;\n}\n\n.recursive-logs-table th {\n  padding: 8px 12px;\n  text-align: left;\n  font-weight: 600;\n  color: #ffffff;\n  border-bottom: 1px solid #3e3e42;\n  background: #2d2d30;\n  cursor: pointer;\n  user-select: none;\n  transition: background-color 0.2s ease;\n}\n\n.recursive-logs-table th:hover {\n  background: #3c3c3c;\n}\n\n.recursive-logs-table th.sortable {\n  position: relative;\n}\n\n.recursive-logs-table tbody {\n  background: #1e1e1e;\n}\n\n.recursive-logs-table td {\n  padding: 8px 12px;\n  border-bottom: 1px solid #2d2d30;\n  vertical-align: top;\n}\n\n.table-row {\n  cursor: pointer;\n  transition: background-color 0.2s ease;\n}\n\n.table-row:hover {\n  background: #2d2d30;\n}\n\n.table-row.selected {\n  background: #264f78;\n}\n\n.table-script {\n  font-family: 'Consolas', 'Monaco', 'Courier New', monospace;\n  font-size: 11px;\n  font-weight: 500;\n}\n\n.table-level {\n  font-weight: 600;\n  font-size: 11px;\n  text-transform: uppercase;\n}\n\n.table-time {\n  font-family: 'Consolas', 'Monaco', 'Courier New', monospace;\n  font-size: 11px;\n  color: #858585;\n}\n\n.table-message {\n  max-width: 300px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  font-size: 11px;\n}\n\n.no-data {\n  text-align: center;\n  color: #858585;\n  font-style: italic;\n  padding: 20px;\n}\n\n/* Right Column - Logs View */\n.recursive-logs-logs-column {\n  width: 50%;\n  display: flex;\n  flex-direction: column;\n  background: #1e1e1e;\n}\n\n/* Filters */\n.recursive-logs-filters {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 12px 16px;\n  background: #2d2d30;\n  border-bottom: 1px solid #3e3e42;\n  gap: 12px;\n  flex-shrink: 0;\n}\n\n.filter-group {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.filter-group label {\n  font-size: 12px;\n  color: #cccccc;\n  white-space: nowrap;\n}\n\n.filter-group select,\n.filter-group input {\n  padding: 6px 10px;\n  border: 1px solid #3e3e42;\n  border-radius: 4px;\n  font-size: 12px;\n  background: #3c3c3c;\n  color: #cccccc;\n  min-width: 120px;\n}\n\n.filter-group select:focus,\n.filter-group input:focus {\n  outline: none;\n  border-color: #007acc;\n  box-shadow: 0 0 0 2px rgba(0, 122, 204, 0.2);\n}\n\n.filter-group input::placeholder {\n  color: #858585;\n}\n\n.clear-btn {\n  background: #3c3c3c;\n  border: 1px solid #3e3e42;\n  color: #cccccc;\n  padding: 6px 12px;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 12px;\n  transition: all 0.2s ease;\n  white-space: nowrap;\n}\n\n.clear-btn:hover {\n  background: #4c4c4c;\n  border-color: #5e5e5e;\n}\n\n/* Error Message */\n.error-message {\n  background: #3a1d1d;\n  border: 1px solid #5c2b2b;\n  color: #f48771;\n  padding: 8px 12px;\n  margin: 8px 16px;\n  border-radius: 4px;\n  font-size: 12px;\n}\n\n/* Logs List */\n.recursive-logs-list {\n  flex: 1;\n  overflow: visible;\n  padding: 0;\n}\n\n.no-logs {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 200px;\n  color: #858585;\n  font-style: italic;\n  font-size: 14px;\n}\n\n.log-entry {\n  border-bottom: 1px solid #2d2d30;\n  transition: background-color 0.2s ease;\n}\n\n.log-entry:hover {\n  background: #2d2d30;\n}\n\n.log-entry.selected {\n  background: #264f78;\n}\n\n.log-entry.expanded {\n  background: #2d2d30;\n}\n\n.log-header {\n  display: flex;\n  align-items: center;\n  padding: 8px 16px;\n  cursor: pointer;\n  gap: 12px;\n  min-height: 40px;\n}\n\n.log-level {\n  font-weight: 600;\n  font-size: 11px;\n  text-transform: uppercase;\n  min-width: 50px;\n}\n\n.log-time {\n  font-family: 'Consolas', 'Monaco', 'Courier New', monospace;\n  font-size: 11px;\n  color: #858585;\n  min-width: 80px;\n}\n\n.log-script {\n  font-family: 'Consolas', 'Monaco', 'Courier New', monospace;\n  font-size: 11px;\n  font-weight: 500;\n  min-width: 150px;\n  max-width: 150px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.log-message {\n  flex: 1;\n  font-size: 12px;\n  line-height: 1.4;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.log-expand {\n  font-size: 10px;\n  color: #858585;\n  transition: transform 0.2s ease;\n  min-width: 16px;\n}\n\n.log-entry.expanded .log-expand {\n  transform: rotate(90deg);\n}\n\n.log-details {\n  padding: 12px 16px;\n  background: #252526;\n  border-top: 1px solid #3e3e42;\n  font-size: 12px;\n}\n\n.log-data,\n.log-file,\n.log-stack {\n  margin-bottom: 12px;\n}\n\n.log-data strong,\n.log-file strong,\n.log-stack strong {\n  color: #cccccc;\n  font-weight: 600;\n  display: block;\n  margin-bottom: 4px;\n}\n\n.log-data pre,\n.log-stack pre {\n  background: #1e1e1e;\n  border: 1px solid #3e3e42;\n  border-radius: 4px;\n  padding: 8px;\n  margin: 4px 0 0 0;\n  overflow-x: auto;\n  font-family: 'Consolas', 'Monaco', 'Courier New', monospace;\n  font-size: 11px;\n  line-height: 1.4;\n  color: #d4d4d4;\n}\n\n.log-file {\n  font-family: 'Consolas', 'Monaco', 'Courier New', monospace;\n  color: #858585;\n}\n\n/* Scrollbars */\n.recursive-logs-table::-webkit-scrollbar,\n.recursive-logs-list::-webkit-scrollbar {\n  width: 8px;\n  height: 8px;\n}\n\n.recursive-logs-table::-webkit-scrollbar-track,\n.recursive-logs-list::-webkit-scrollbar-track {\n  background: #1e1e1e;\n}\n\n.recursive-logs-table::-webkit-scrollbar-thumb,\n.recursive-logs-list::-webkit-scrollbar-thumb {\n  background: #3e3e42;\n  border-radius: 4px;\n}\n\n.recursive-logs-table::-webkit-scrollbar-thumb:hover,\n.recursive-logs-list::-webkit-scrollbar-thumb:hover {\n  background: #5e5e5e;\n}\n\n/* Responsive Design */\n@media (max-width: 1200px) {\n  .recursive-logs-content {\n    flex-direction: column;\n  }\n  \n  .recursive-logs-table-column,\n  .recursive-logs-logs-column {\n    width: 100%;\n  }\n  \n  .recursive-logs-table-column {\n    border-right: none;\n    border-bottom: 1px solid #3e3e42;\n    height: 40%;\n  }\n  \n  .recursive-logs-logs-column {\n    height: 60%;\n  }\n}\n\n@media (max-width: 768px) {\n  .recursive-logs-header {\n    padding: 12px 16px;\n  }\n  \n  .recursive-logs-header h2 {\n    font-size: 20px;\n  }\n  \n  .recursive-logs-stats {\n    padding: 8px 16px;\n    gap: 8px;\n  }\n  \n  .stat-card {\n    min-width: 60px;\n    padding: 6px 8px;\n  }\n  \n  .stat-number {\n    font-size: 16px;\n  }\n  \n  .stat-label {\n    font-size: 10px;\n  }\n  \n  .recursive-logs-filters {\n    flex-direction: column;\n    align-items: stretch;\n    gap: 8px;\n    padding: 8px 16px;\n  }\n  \n  .filter-group {\n    justify-content: space-between;\n  }\n  \n  .filter-group select,\n  .filter-group input {\n    flex: 1;\n    min-width: 0;\n  }\n  \n  .log-header {\n    flex-wrap: wrap;\n    gap: 8px;\n    padding: 6px 12px;\n  }\n  \n  .log-script {\n    min-width: 100px;\n    max-width: 100px;\n  }\n  \n  .log-time {\n    min-width: 60px;\n  }\n  \n  .log-level {\n    min-width: 40px;\n  }\n}\n\n/* Animation for new logs */\n@keyframes logEntryAppear {\n  from {\n    opacity: 0;\n    transform: translateY(-10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.log-entry {\n  animation: logEntryAppear 0.3s ease-out;\n}\n\n/* Special styling for recursive logs */\n.log-entry[data-script-id=\"allog-react-viewer-server\"] {\n  border-left: 4px solid #ff6b6b;\n}\n\n.log-entry[data-script-id=\"allog-debug-console\"] {\n  border-left: 4px solid #4ecdc4;\n}\n\n.log-entry[data-script-id=\"allog-engine\"] {\n  border-left: 4px solid #45b7d1;\n}\n\n.log-entry[data-script-id=\"allog-manager\"] {\n  border-left: 4px solid #96ceb4;\n}\n\n.log-entry[data-script-id=\"allog-coordinator\"] {\n  border-left: 4px solid #feca57;\n}\n\n.log-entry[data-script-id=\"allog-instrumentation\"] {\n  border-left: 4px solid #ff9ff3;\n} ",""]);const r=s},715:(e,n,t)=>{t.d(n,{A:()=>r});var a=t(645),i=t.n(a),o=t(278),s=t.n(o)()(i());s.push([e.id,".instrumentation-page {\n  padding: 20px;\n  max-width: 1200px;\n  margin: 0 auto;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;\n}\n\n.instrumentation-header {\n  margin-bottom: 30px;\n  text-align: center;\n}\n\n.instrumentation-header h2 {\n  margin: 0 0 10px 0;\n  color: #007acc;\n  font-size: 28px;\n  font-weight: 600;\n}\n\n.instrumentation-header p {\n  margin: 0;\n  color: #858585;\n  font-size: 16px;\n}\n\n.profile-indicator {\n  margin-top: 10px;\n  padding: 8px 12px;\n  background: rgba(76, 175, 80, 0.1);\n  border: 1px solid rgba(76, 175, 80, 0.3);\n  border-radius: 6px;\n  display: inline-block;\n}\n\n.profile-badge {\n  color: #4caf50;\n  font-size: 13px;\n  font-weight: 500;\n}\n\n.profile-badge strong {\n  color: #ffffff;\n}\n\n/* Preset Section */\n.preset-section {\n  background: #2d2d30;\n  border: 1px solid #3e3e42;\n  border-radius: 8px;\n  padding: 20px;\n  margin-bottom: 30px;\n}\n\n.preset-section h3 {\n  margin: 0 0 15px 0;\n  color: #cccccc;\n  font-size: 18px;\n  font-weight: 500;\n}\n\n.preset-buttons {\n  display: flex;\n  gap: 12px;\n  flex-wrap: wrap;\n}\n\n.preset-btn {\n  padding: 10px 16px;\n  border: 1px solid #3e3e42;\n  border-radius: 6px;\n  background: #3c3c3c;\n  color: #cccccc;\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 500;\n  transition: all 0.2s ease;\n  min-width: 120px;\n}\n\n.preset-btn:hover:not(:disabled) {\n  background: #4c4c4c;\n  border-color: #007acc;\n}\n\n.preset-btn:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n.preset-btn.comprehensive {\n  border-color: #007acc;\n  background: #007acc20;\n}\n\n.preset-btn.comprehensive:hover:not(:disabled) {\n  background: #007acc40;\n}\n\n.preset-btn.detailed {\n  border-color: #28a745;\n  background: #28a74520;\n}\n\n.preset-btn.detailed:hover:not(:disabled) {\n  background: #28a74540;\n}\n\n.preset-btn.basic {\n  border-color: #ffc107;\n  background: #ffc10720;\n}\n\n.preset-btn.basic:hover:not(:disabled) {\n  background: #ffc10740;\n}\n\n.preset-btn.none {\n  border-color: #dc3545;\n  background: #dc354520;\n}\n\n.preset-btn.none:hover:not(:disabled) {\n  background: #dc354540;\n}\n\n/* Config Sections */\n.config-section {\n  background: #2d2d30;\n  border: 1px solid #3e3e42;\n  border-radius: 8px;\n  padding: 20px;\n  margin-bottom: 20px;\n}\n\n.config-section h3 {\n  margin: 0 0 15px 0;\n  color: #cccccc;\n  font-size: 18px;\n  font-weight: 500;\n  border-bottom: 1px solid #3e3e42;\n  padding-bottom: 10px;\n}\n\n.config-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n  gap: 15px;\n}\n\n.component-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n  gap: 15px;\n}\n\n.config-item {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.config-item label {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  color: #cccccc;\n  font-size: 14px;\n  cursor: pointer;\n  flex: 1;\n}\n\n.config-item input[type=\"checkbox\"] {\n  width: 16px;\n  height: 16px;\n  accent-color: #007acc;\n  cursor: pointer;\n}\n\n.config-item select {\n  padding: 6px 10px;\n  border: 1px solid #3e3e42;\n  border-radius: 4px;\n  background: #3c3c3c;\n  color: #cccccc;\n  font-size: 14px;\n  cursor: pointer;\n  min-width: 120px;\n}\n\n.config-item select:focus {\n  outline: none;\n  border-color: #007acc;\n  box-shadow: 0 0 0 2px #007acc40;\n}\n\n/* Component Items */\n.component-item {\n  background: #252526;\n  border: 1px solid #3e3e42;\n  border-radius: 6px;\n  padding: 15px;\n}\n\n.component-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 15px;\n}\n\n.component-header label {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  color: #cccccc;\n  font-size: 14px;\n  font-weight: 500;\n  cursor: pointer;\n  flex: 1;\n}\n\n.component-header input[type=\"checkbox\"] {\n  width: 16px;\n  height: 16px;\n  accent-color: #007acc;\n  cursor: pointer;\n}\n\n.component-header select {\n  padding: 6px 10px;\n  border: 1px solid #3e3e42;\n  border-radius: 4px;\n  background: #3c3c3c;\n  color: #cccccc;\n  font-size: 14px;\n  cursor: pointer;\n  min-width: 120px;\n}\n\n.component-header select:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n/* Loading and Error States */\n.loading, .error {\n  text-align: center;\n  padding: 40px;\n  color: #cccccc;\n  font-size: 16px;\n}\n\n.error {\n  color: #f44336;\n}\n\n.error button {\n  margin-top: 15px;\n  padding: 8px 16px;\n  background: #007acc;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 14px;\n}\n\n.error button:hover {\n  background: #005a9e;\n}\n\n/* Saving Indicator */\n.saving-indicator {\n  position: fixed;\n  bottom: 20px;\n  right: 20px;\n  background: #007acc;\n  color: white;\n  padding: 10px 16px;\n  border-radius: 6px;\n  font-size: 14px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n  z-index: 1000;\n}\n\n/* Dynamic Component Table */\n.components-table {\n  overflow-x: auto;\n  background: #252526;\n  border-radius: 6px;\n  border: 1px solid #3e3e42;\n}\n\n.components-table table {\n  width: 100%;\n  border-collapse: collapse;\n  font-size: 13px;\n}\n\n.components-table th {\n  background: #3e3e42;\n  color: #ffffff;\n  padding: 12px 8px;\n  text-align: left;\n  font-weight: 600;\n  border-bottom: 1px solid #4e4e52;\n}\n\n.components-table td {\n  padding: 10px 8px;\n  border-bottom: 1px solid #3e3e42;\n  vertical-align: middle;\n}\n\n.module-row:hover {\n  background: #2d2d30;\n}\n\n.module-name {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-weight: 500;\n  color: #ffffff;\n}\n\n.module-icon {\n  font-size: 16px;\n}\n\n.module-type {\n  color: #cccccc;\n  text-transform: capitalize;\n}\n\n.module-script {\n  color: #9cdcfe;\n  font-family: 'Consolas', 'Monaco', 'Courier New', monospace;\n  font-size: 11px;\n}\n\n.module-script code {\n  background: #1e1e1e;\n  padding: 2px 4px;\n  border-radius: 3px;\n  color: #9cdcfe;\n}\n\n.status-badge {\n  padding: 2px 6px;\n  border-radius: 3px;\n  font-size: 11px;\n  font-weight: 600;\n  text-transform: uppercase;\n}\n\n.status-badge.active {\n  background: #4caf50;\n  color: white;\n}\n\n.status-badge.registered {\n  background: #2196f3;\n  color: white;\n}\n\n.status-badge.inactive {\n  background: #757575;\n  color: white;\n}\n\n.module-logs {\n  color: #ffc107;\n  font-weight: 500;\n  text-align: center;\n}\n\n.module-methods {\n  color: #cccccc;\n  font-size: 12px;\n}\n\n.no-methods {\n  color: #757575;\n  font-style: italic;\n}\n\n.module-last-seen {\n  color: #cccccc;\n  font-size: 11px;\n}\n\n.level-select {\n  background: #3c3c3c;\n  border: 1px solid #3e3e42;\n  color: #cccccc;\n  padding: 4px 6px;\n  border-radius: 3px;\n  font-size: 12px;\n  min-width: 100px;\n}\n\n.level-select:focus {\n  outline: none;\n  border-color: #007acc;\n}\n\n.enabled-checkbox {\n  width: 16px;\n  height: 16px;\n  accent-color: #007acc;\n}\n\n.no-components {\n  text-align: center;\n  padding: 40px;\n  color: #cccccc;\n}\n\n.no-components p {\n  margin: 0 0 15px 0;\n  color: #999;\n}\n\n.no-components button {\n  background: #007acc;\n  color: white;\n  border: none;\n  padding: 8px 16px;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 14px;\n}\n\n.no-components button:hover:not(:disabled) {\n  background: #005a9e;\n}\n\n.no-components button:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n/* Module type styling */\n.module-row.module-library {\n  border-left: 3px solid #4caf50;\n}\n\n.module-row.module-feature {\n  border-left: 3px solid #ff9800;\n}\n\n.module-row.module-allog-system {\n  border-left: 3px solid #2196f3;\n}\n\n.module-row.module-server {\n  border-left: 3px solid #9c27b0;\n}\n\n.module-row.module-viewer {\n  border-left: 3px solid #00bcd4;\n}\n\n.module-row.module-application {\n  border-left: 3px solid #f44336;\n}\n\n/* Responsive Design */\n@media (max-width: 768px) {\n  .instrumentation-page {\n    padding: 15px;\n  }\n  \n  .preset-buttons {\n    flex-direction: column;\n  }\n  \n  .preset-btn {\n    min-width: auto;\n  }\n  \n  .config-grid {\n    grid-template-columns: 1fr;\n  }\n  \n  .component-grid {\n    grid-template-columns: 1fr;\n  }\n  \n  .component-header {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 10px;\n  }\n  \n  .component-header select {\n    width: 100%;\n  }\n  \n  .components-table {\n    font-size: 11px;\n  }\n  \n  .components-table th,\n  .components-table td {\n    padding: 8px 4px;\n  }\n  \n  .module-script code {\n    font-size: 10px;\n  }\n} ",""]);const r=s}},t={};function a(e){var i=t[e];if(void 0!==i)return i.exports;var o=t[e]={id:e,exports:{}};return n[e](o,o.exports,a),o.exports}a.m=n,e=[],a.O=(n,t,i,o)=>{if(!t){var s=1/0;for(d=0;d<e.length;d++){t=e[d][0],i=e[d][1],o=e[d][2];for(var r=!0,l=0;l<t.length;l++)(!1&o||s>=o)&&Object.keys(a.O).every(e=>a.O[e](t[l]))?t.splice(l--,1):(r=!1,o<s&&(s=o));if(r){e.splice(d--,1);var c=i();void 0!==c&&(n=c)}}return n}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[t,i,o]},a.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return a.d(n,{a:n}),n},a.d=(e,n)=>{for(var t in n)a.o(n,t)&&!a.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},a.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{var e={792:0};a.O.j=n=>0===e[n];var n=(n,t)=>{var i,o,s=t[0],r=t[1],l=t[2],c=0;if(s.some(n=>0!==e[n])){for(i in r)a.o(r,i)&&(a.m[i]=r[i]);if(l)var d=l(a)}for(n&&n(t);c<s.length;c++)o=s[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(d)},t=self.webpackChunkallog_viewer_app=self.webpackChunkallog_viewer_app||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))})(),a.nc=void 0;var i=a.O(void 0,[947],()=>a(112));i=a.O(i)})();